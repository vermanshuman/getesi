<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                template="/resources/tpl/Admin/EditBase.xhtml">
    <ui:param name="edit_title" value="#{msg.editUser}"/>
    <ui:param name="bean" value="#{userEditBean}"/>
    <ui:define name="edit_body">
        <p:fieldset legend="#{msg.general}">
            <p:outputPanel id="userType" style="background: transparent; border: none; padding:0;">
                <p:panelGrid columns="2" styleClass="ui-panelgrid-blank form-group"
                             columnClasses="ui-grid-col-2,ui-grid-col-3" layout="grid">
                    <span><span class="red">*</span>#{msg.category}:</span>
                    <p:selectOneMenu id="category" value="#{bean.entity.category}" styleClass="select-width ui-panelgrid-blank form-group"
                                     label="#{msg.category}">
                        <f:selectItems value="#{bean.categories}"/>
                        <p:ajax listener="#{bean.handleCategorySelect}" update="clientPanel"/>
                    </p:selectOneMenu>
                </p:panelGrid>
                <p:panelGrid columns="2" styleClass="ui-panelgrid-blank form-group"
                             columnClasses="ui-grid-col-2,ui-grid-col-3" layout="grid">

                    <span><span class="red">*</span> #{msg.userType}:</span>
                    <p:selectOneRadio value="#{bean.entity.type}" label="#{msg.userType}">
                        <f:selectItems value="#{bean.types}"/>
                        <p:ajax update="userType"/>
                    </p:selectOneRadio>
                </p:panelGrid>
                <p:panelGrid columns="2" styleClass="ui-panelgrid-blank form-group" id="physicalPanel"
                             columnClasses="ui-grid-col-2,ui-grid-col-3" layout="grid"
                             rendered="#{bean.entity.physical}">

                    <span><span class="red">*</span> #{msg.firstname}:</span>
                    <p:inputText id="firstname" maxlength="20" styleClass="input-width"
                                 value="#{bean.entity.firstName}" label="#{msg.firstname}"
                                 onkeypress="numbers_letters_only('#firstname');"/>

                    <span><span class="red">*</span> #{msg.lastname}:</span>
                    <p:inputText id="lastname" maxlength="20" styleClass="input-width"
                                 value="#{bean.entity.lastName}" label="#{msg.lastname}"
                                 onkeypress="numbers_letters_only('#lastname');"/>
                </p:panelGrid>
                <p:panelGrid columns="2" styleClass="ui-panelgrid-blank form-group" id="legalPanel"
                             columnClasses="ui-grid-col-2,ui-grid-col-3" layout="grid"
                             rendered="#{not bean.entity.physical}">

                    <span><span class="red">*</span> #{msg.businessName}:</span>
                    <p:inputText id="businessName" maxlength="20" styleClass="input-width"
                                 value="#{bean.entity.businessName}" label="#{msg.businessName}"/>

                    <span>#{msg.businessLevel}:</span>
                    <p:selectOneMenu id="businessLevel" value="#{bean.entity.level}"
                                     label="#{msg.businessLevel}" styleClass="select-width">
                        <f:selectItems value="#{bean.levels}"/>
                    </p:selectOneMenu>
                </p:panelGrid>
            </p:outputPanel>
            <p:outputPanel id="clientPanel" style="background: transparent; border: none; padding:0;">
                <p:panelGrid columns="2" styleClass="ui-panelgrid-blank form-group"
                             columnClasses="ui-grid-col-2,ui-grid-col-3" layout="grid">
                    <span><span class="red">*</span> #{msg.role}:</span>
                    <p:selectManyMenu id="role" value="#{bean.selectedRoles}"
                                      style="width: 100%" label="#{msg.role}">
                        <f:selectItems value="#{bean.roles}" var="role" itemValue="#{role.id}"/>
                        <p:ajax listener="#{bean.handleRoleSelect}" update="clientPanel"/>
                    </p:selectManyMenu>
                </p:panelGrid>
                <p:panelGrid columns="2" styleClass="ui-panelgrid-blank form-group"
                             columnClasses="ui-grid-col-2,ui-grid-col-3" layout="grid" rendered="#{bean.externalUser}">
                    <span>#{msg.area}:</span>
                    <p:selectOneMenu id="area" value="#{bean.selectedArea}"
                                     styleClass="select-width ui-panelgrid-blank form-group" label="#{msg.area}">
                        <f:selectItems value="#{bean.areas}" var="area" itemValue="#{area.description}"/>
                        <p:ajax listener="#{bean.handleAreaSelect}" update="clientPanel"/>
                    </p:selectOneMenu>

                    <span>#{msg.office}:</span>
                    <p:selectOneMenu id="office" value="#{bean.selectedOffice}"
                                     styleClass="select-width ui-panelgrid-blank form-group" label="#{msg.office}">
                        <f:selectItems value="#{bean.offices}"/>
                    </p:selectOneMenu>
                </p:panelGrid>

                <p:panelGrid columns="2" styleClass="ui-panelgrid-blank form-group" rendered="#{bean.showClientList}"
                             columnClasses="ui-grid-col-2,ui-grid-col-3" layout="grid">
                    <span><span class="red">*</span> #{msg.client}:</span>
                    <p:selectOneMenu id="client" value="#{bean.selectedClientId}"
                                     styleClass="select-width" label="#{msg.client}">
                        <f:selectItems value="#{bean.clients}"/>
                    </p:selectOneMenu>
                </p:panelGrid>
                <p:panelGrid columns="2" styleClass="ui-panelgrid-blank form-group"
                             columnClasses="ui-grid-col-2,ui-grid-col-3" layout="grid">
                    <span><span class="red">*</span> #{msg.login}:</span>
                    <p:inputText id="login" autocomplete="false" styleClass="input-width"
                                 value="#{bean.entity.login}" label="#{msg.login}"/>

                    <span><span class="red">*</span> #{msg.password}:</span>
                    <p:password id="password" maxlength="14" autocomplete="false" styleClass="input-width"
                                redisplay="true" feedback="true" value="#{bean.pwd}"
                                label="#{msg.password}" 
                                onkeypress="numbers_letters_special_only('#password');"/>

                    <span><span class="red">*</span> #{msg.confirmPassword}:</span>
                    <p:password id="c_password" maxlength="14" autocomplete="false" styleClass="input-width"
                                redisplay="true" value="#{bean.confirmPwd}"
                                label="#{msg.confirmPassword}"
                                onkeypress="numbers_letters_special_only('#c_password');"/>

                    <span> #{msg.email}: </span>
                    <p:inputText id="email" maxlength="129" value="#{bean.entity.email}" styleClass="input-width"/>

                    <span> #{msg.clientCell}: </span>
                    <p:inputText id="userCell" maxlength="50" value="#{bean.entity.phone}"
                                 styleClass="input-width" onkeyup="validate_phone(this);"/>

                    <span> #{msg.userCode}: </span>
                    <p:inputText id="userCode" maxlength="30" styleClass="input-width"
                                 value="#{bean.entity.userCode}"
                                 onkeypress="numbers_letters_only('#userCode');"/>

                    <span> #{msg.fiscalCode}: </span>
                    <p:inputText id="fiscalCode" maxlength="16" styleClass="input-width"
                                 value="#{bean.entity.fiscalCode}"
                                 onkeypress="numbers_letters_only('#fiscalCode');"/>

                    <span><span class="red">*</span>#{msg.status}:</span>
                    <p:selectOneMenu id="status" value="#{bean.status}" styleClass="select-width"
                                     label="#{msg.status}">
                        <f:selectItems value="#{bean.statuses}"/>
                    </p:selectOneMenu>

                    <h:outputText value="#{msg.userPhoto}:"/>
                    <p:fileUpload fileUploadListener="#{bean.saveDocument}" valueChangeListener="#{bean.saveDocument}"
                                  mode="advanced" dragDropSupport="false"
                                  multiple="false" auto="true"
                                  update=":form" skinSimple="true"/>
                </p:panelGrid>
                <p:panelGrid columns="2" styleClass="ui-panelgrid-blank form-group" rendered="#{bean.externalUser}"
                             columnClasses="ui-grid-col-2,ui-grid-col-3" layout="grid">
                    <h:outputText value="  #{msg.notifications}:"/>
                    <p:selectBooleanCheckbox value="#{bean.entity.notificationState}"
                                             itemLabel="#{msg.notificationState}" style="width: max-content"/>
                    <h:outputText value=""/>
                    <p:selectBooleanCheckbox value="#{bean.entity.notificationEvasion}"
                                             itemLabel="#{msg.notificationEvasion}" style="width: max-content"/>
                    <h:outputText value=""/>
                    <p:selectBooleanCheckbox value="#{bean.entity.notificationOutput}"
                                             itemLabel="#{msg.notificationOutput}" style="width: max-content"/>
                </p:panelGrid>
            </p:outputPanel>
        </p:fieldset>
    </ui:define>
</ui:composition>