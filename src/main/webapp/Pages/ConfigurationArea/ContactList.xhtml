<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">

<ui:composition template="/resources/tpl/Admin/LazyListTabBase.xhtml">
    <ui:param name="bean" value="#{contactListBean}"/>
    <ui:param name="list_header" value="#{msg.client}"/>
    <ui:param name="excludeColumns" value="0,1,2"/>
    <ui:define name="list_body">
        <style>
            .row {
                display: flex;
                gap: 5%;
                margin-bottom: 5%;
            }
            .col {
                width: 20%;
                text-align: center;
                padding: 50px 0px;
                text-transform: uppercase;
                font-size: 20px;
                background-color: #C4D3DF;
            }
            .search-bar {
                background-color: #788FA7;
                padding: 20px 0px;
                justify-content: center;
                gap: 1%;
                height: 50px;
                display: flex;
                align-items: center
            }
            .title-txt {
                font-size: 40px;
                margin-left: 5px;
                margin-bottom: 60px;
            }
            .text-link {
                text-decoration: none !important;
                color: #000 !important;
                font-size: 20px !important;
            }

            body .ui-accordion .ui-accordion-header {
                border: none;
                border-top: 0 none;
                background: #FFFFFF !important;
                color: #000000 !important;
                padding: 1rem;
                font-weight: 700;
                margin-top: 0;
                transition: background-color 0.2s, color 0.2s, border-color 0.2s, box-shadow 0.2s;
                user-select: none;
                border-radius: 0;
                position: relative;
                outline: 0 none;
            }

            body .ui-accordion .ui-accordion-header:focus {
                box-shadow: 0 0 0 0.2rem #FFFFFF !important;
            }

            body .ui-accordion .ui-accordion-header:first-child {
                border-top: none;
            }

            body .ui-accordion .ui-accordion-content {
                border: none;
            }

            body .ui-accordion .ui-accordion-content .ui-paginator {
                display: none !important;
            }

            body .ui-accordion .ui-accordion-content .ui-datatable .ui-datatable-data tr.ui-datatable-even {
                background-color: #f0f3f5 !important;
            }

            body .ui-accordion .ui-accordion-content .ui-datatable thead th, .ui-datatable tbody td, .ui-datatable tfoot td, .ui-datatable tfoot th {
                border: 1px solid #c9cdd2 !important;
                color: #4c5156;
            }

            body .ui-accordion .ui-accordion-content .ui-datatable:not(.borderless) thead th {
                padding: 12px 6px 12px 6px !important;
                border-left: none !important;
                border-right: none !important;
            }

            body .ui-accordion .ui-accordion-content .ui-datatable thead th {
                background-color: #FFFFFF !important;
                color: #495057 !important;
            }

            body .ui-accordion .ui-accordion-content .ui-datatable .ui-datatable-data tr td {
                padding: 12px 6px 12px 6px !important;
                border-left: none !important;
                border-right: none !important;
            }

            body .ui-accordion .ui-accordion-content .ui-datatable thead th.ui-state-active {
                color: #2196F3 !important;
            }

            body .ui-accordion .ui-accordion-content .ui-datatable .ui-datatable-data > tr:hover {
                background: #e9ecef !important;
            }

            body .ui-accordion .ui-accordion-content .ui-datatable thead th, .ui-datatable tfoot td {
                text-align: left !important;
            }

            body .ui-accordion .ui-accordion-content .ui-datatable thead th .ui-column-title {
                color: #495057 !important;
            }

            .action_column {
                width: 50px;
            }

            body .ui-button.searchIcon {
                background: #063971;
            }
        </style>
        <link href="#{facesContext.externalContext.requestContextPath}/resources/styles/client.css"
              media="all" rel="stylesheet" type="text/css"/>
        <div class="row title-txt">
            Rubrica
        </div>
        <div class="row search-bar" style="height: 140px;">
            <p:inputText placeholder="Ricerca avanzata" value="#{bean.nameOfTheCompany}" style="width: 45%;height: 40px;"/>
            <p:commandButton icon="pi pi-search" action="#{bean.search}" oncomplete="PF('searchResult').show()"
                             update="@form" styleClass="searchIcon"/>
        </div>

        <p:outputPanel style="margin-top: 20px;"  id="boxes">
            <div class="row" style="justify-content: center;">
                <div class="col">
                    <p:link href="/Pages/ConfigurationArea/ClientList.jsf?tab=1" styleClass="text-link">#{msg.clients}</p:link>
                </div>
                <div class="col">
                    &nbsp;#{msg.providers.toUpperCase()}
                </div>
                <div class="col">
                    <p:link href="/Pages/ConfigurationArea/ClientList.jsf?tab=2" styleClass="text-link">#{msg.requestManagers.toUpperCase()}</p:link>
                </div>
                <div class="col">
                    <p:link href="/Pages/ConfigurationArea/ClientList.jsf?tab=3" styleClass="text-link">#{msg.requestTrustees.toUpperCase()}</p:link>
                </div>
            </div>
            <div class="row" style="justify-content: center;">
                <div class="col">
                    #{msg.aggregationLandChargesRegistryLands.toUpperCase()}
                </div>
                <div class="col">
                    &nbsp;#{msg.omiLandValueCity.toUpperCase()}
                </div>
                <div class="col">
                    &nbsp;&nbsp;#{msg.court_list.toUpperCase()}
                </div>
                <div class="col">
                    &nbsp;&nbsp;#{msg.notaryList.toUpperCase()}
                </div>
            </div>
        </p:outputPanel>
        <p:dialog header="Risultati ricerca #{bean.searchHeader}" widgetVar="searchResult" width="80%"
                  modal="true" resizable="false" effect="SLIDE">
            <p:outputPanel rendered="#{bean.showSearch}"  id="searchResultPanel">
                <p:accordionPanel multiple="false" activeIndex="0" id="accordionPanel">
                    <p:tab title="#{msg.clients} (#{bean.clientList.size()})" disabled="#{bean.clientList.size() == 0}">
                        <p:dataTable var="item" id="clientTable" styleClass="table-client-list"
                                     emptyMessage="#{msg.noRecordsFound}" value="#{bean.clientList}"
                                     paginator="true" lazy="true" rowKey="#{item.id}" rows="10"
                                     paginatorAlwaysVisible="true"
                                     paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     rowsPerPageTemplate="10,20,50" widgetVar="table">
                            <p:column>
                                <f:facet name="header">
                                    <h:outputText
                                            value="#{msg.clientNameOfTheCompany.toUpperCase()}" />
                                </f:facet>
                                <h:outputText value="#{item}" />
                            </p:column>

                            <p:column>
                                <f:facet name="header">
                                    <h:outputText value="#{msg.clientAddressCity}" />
                                </f:facet>
                                <h:outputText value="#{item.addressCityId}" />
                            </p:column>

                            <p:column>
                                <f:facet name="header">
                                    <h:outputText value="#{msg.clientMail}" />
                                </f:facet>
                                <ui:repeat value="#{item.emails}" var="email">
                                    <h:outputText value="#{email.email}" />
                                    <h:outputText value="&lt;br /&gt;" escape="false" />
                                </ui:repeat>
                            </p:column>

                            <p:column>
                                <f:facet name="header">
                                    <h:outputText value="#{msg.clientPhone}" />
                                </f:facet>
                                <h:outputText value="#{item.phone}" />
                            </p:column>

                            <p:column styleClass="action_column" exportable="false">
                                <f:facet name="header">
                                    <h:outputText value="#{msg.actions}" />
                                </f:facet>
                                <p:commandButton icon="ui-icon pi pi-search" update=":form"
                                                 action="#{bean.viewEntity}">
                                    <f:setPropertyActionListener value="#{item.id}"
                                                                 target="#{bean.selectedClientId}"/>
                                </p:commandButton>

                            </p:column>

                        </p:dataTable>
                    </p:tab>

                    <p:tab title="#{msg.providers}" disabled="true">
                    </p:tab>

                    <p:tab title="#{msg.requestManagers} (#{bean.managerList.size()})" disabled="#{bean.managerList.size() == 0}">
                        <p:dataTable var="item" id="gestoreTable"
                                     styleClass="table-client-list"
                                     emptyMessage="#{msg.noRecordsFound}" value="#{bean.managerList}"
                                     paginator="true" lazy="true" rowKey="#{item.id}" rows="10"
                                     paginatorAlwaysVisible="true"
                                     paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     rowsPerPageTemplate="10,20,50" widgetVar="managerClientsTable">

                            <p:column>
                                <f:facet name="header">
                                    <h:outputText value="#{msg.businessName}"/>
                                </f:facet>
                                <h:outputText value="#{item}"/>
                            </p:column>

                            <p:column>
                                <f:facet name="header">
                                    <h:outputText value="#{msg.titleOffice}"/>
                                </f:facet>
                                <h:outputText value="#{item.office}"/>
                            </p:column>

                            <p:column >
                                <f:facet name="header">
                                    <h:outputText value="#{msg.clientMail}"/>
                                </f:facet>
                                <!-- <h:outputText value="#{item.emails}"/> -->
                                <ui:repeat value="#{item.emails}" var="email">
                                    <h:outputText value="#{email.email}"/>
                                    <h:outputText value="&lt;br /&gt;" escape="false"/>
                                </ui:repeat>
                            </p:column>

                            <p:column >
                                <f:facet name="header">
                                    <h:outputText value="#{msg.clientPhone}"/>
                                </f:facet>
                                <h:outputText value="#{item.phone}"/>
                            </p:column>

                            <p:column >
                                <f:facet name="header">
                                    <h:outputText value="#{msg.client}"/>
                                </f:facet>
                                <h:outputText value="#{item.clients}"/>
                            </p:column>
                            <p:column styleClass="action_column" exportable="false">
                                <f:facet name="header">
                                    <h:outputText value="#{msg.actions}" />
                                </f:facet>
                                <p:commandButton icon="ui-icon ui-icon-search pi pi-search"/>
                            </p:column>
                        </p:dataTable>
                    </p:tab>

                    <p:tab title="#{msg.requestTrustees} (#{bean.trusteesList.size()})" disabled="#{bean.trusteesList.size() == 0}">
                        <p:dataTable var="item" id="fiduciaryTable"
                                     styleClass="table-client-list"
                                     emptyMessage="#{msg.noRecordsFound}" value="#{bean.trusteesList}"
                                     paginator="true" lazy="true" rowKey="#{item.id}" rows="10"
                                     paginatorAlwaysVisible="true"
                                     paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     rowsPerPageTemplate="10,20,50" widgetVar="trusteesClientsTable">

                            <p:column>
                                <f:facet name="header">
                                    <h:outputText value="#{msg.businessName}"/>
                                </f:facet>
                                <h:outputText value="#{item}"/>
                            </p:column>

                            <p:column>
                                <f:facet name="header">
                                    <h:outputText value="#{msg.clientAddressCity}"/>
                                </f:facet>
                                <h:outputText value="#{item.addressCityId}"/>
                            </p:column>

                            <p:column >
                                <f:facet name="header">
                                    <h:outputText value="#{msg.clientMail}"/>
                                </f:facet>
                                <!-- <h:outputText value="#{item.emails}"/> -->
                                <ui:repeat value="#{item.emails}" var="email">
                                    <h:outputText value="#{email.email}"/>
                                    <h:outputText value="&lt;br /&gt;" escape="false"/>
                                </ui:repeat>
                            </p:column>

                            <p:column >
                                <f:facet name="header">
                                    <h:outputText value="#{msg.clientPhone}"/>
                                </f:facet>
                                <h:outputText value="#{item.phone}"/>
                            </p:column>
                            <p:column >
                                <f:facet name="header">
                                    <h:outputText value="#{msg.client}"/>
                                </f:facet>
                                <h:outputText value="#{item.clients}"/>
                            </p:column>
                            <p:column styleClass="action_column" exportable="false">
                                <f:facet name="header">
                                    <h:outputText value="#{msg.actions}" />
                                </f:facet>
                                <p:commandButton icon="ui-icon ui-icon-search pi pi-search"/>
                            </p:column>
                        </p:dataTable>
                    </p:tab>
                </p:accordionPanel>
            </p:outputPanel>
        </p:dialog>
    </ui:define>

</ui:composition>
</html>
