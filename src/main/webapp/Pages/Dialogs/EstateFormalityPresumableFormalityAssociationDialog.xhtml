<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html">
    <p:dialog widgetVar="estateFormalityPresumableFormalityAssociationDialog" draggable="false" resizable="false"
              id="estateFormalityPresumableFormalityAssociationDialogId" modal="true" width="1200" closable="false">
        <h:outputText value="#{msg.estateFormalityPresumableFormality}"/>

        <p:scrollPanel mode="native" style="min-height: 300px; max-height: 900px">
            <p:dataTable value="#{presumableFormalityListByEstateFormality.entrySet()}" var="entry">
                <p:columnGroup type="header">
                    <p:row>
                        <p:column headerText="#{msg.estateFormality}"/>
                        <p:column headerText="#{msg.formality}" style="width: 50%"/>
                    </p:row>
                </p:columnGroup>
                <p:column>
                    <h:panelGrid columns="4" style="border: 1px solid #c9cdd2">
                        <h:panelGroup><h:outputText
                                value="#{entry.getKey().landChargesRegistry.name}"/></h:panelGroup>
                        <h:panelGroup> <h:outputText value="#{entry.getKey().date}"
                                                     converter="dateTimeConverter"/></h:panelGroup>
                        <h:panelGroup><h:outputText value="#{entry.getKey().numRP}"/></h:panelGroup>
                        <h:panelGroup><h:outputText value="#{entry.getKey().numRG}"/></h:panelGroup>
                    </h:panelGrid>
                </p:column>
                <p:column headerText="#{msg.formality}">
                    <p:dataTable value="#{entry.getValue()}" var="formality" styleClass="no_datatable_header">
                        <p:column>
                            <h:outputText value="#{not empty formality.reclamePropertyService ?
                                                formality.reclamePropertyService.name:formality.provincialOffice}"/>
                        </p:column>
                        <p:column>
                            <h:outputText value="#{formality.presentationDate}" converter="dateTimeConverter"/>
                        </p:column>
                        <p:column>
                            <h:outputText value="#{formality.particularRegister}"/>
                        </p:column>
                        <p:column>
                            <h:outputText value="#{formality.generalRegister}"/>
                        </p:column>
                        <p:column>
                            <h:outputText value="#{formality.stateStr}"/>
                        </p:column>
                        <p:column width="20" style="width: 20px">
                            <p:selectBooleanCheckbox value="#{formality.visible}"/>
                        </p:column>
                        <p:column>
                            <p:commandButton icon="fa fa-file-pdf-o" action="#{bean.downloadFormalityPdf}" ajax="false">
                                <f:setPropertyActionListener value="#{formality.id}" target="#{bean.entityEditId}"/>
                            </p:commandButton>
                        </p:column>
                    </p:dataTable>
                </p:column>
            </p:dataTable>
            <br/>
            <div class="btn_line">
                <p:commandButton value="#{msg.confirm}" 
                				 oncomplete="PF('confirmAssociateSubjectToRequestDialog').show();"/>
                <p:commandButton value="#{msg.cancel}"
                                 oncomplete="PF('estateFormalityPresumableFormalityAssociationDialog').hide();
                                 #{oncomplete_cancel_presumable_formality_dialog};"/>
            </div>
        </p:scrollPanel>
    </p:dialog>
    <p:dialog widgetVar="confirmAssociateSubjectToRequestDialog" modal="true" width="600"
                  draggable="false" position="center center">
                  <h:outputText value="#{bean.associateSubjectToRequest} "/>
                  <br/>
            <div align="center">
                <p:commandButton value="#{msg.yes}" 
                				 action="#{bean.associatePresumableFormalityWithEstateFormalityRequestSubjectBySectionC}"
                                 oncomplete="PF('confirmAssociateSubjectToRequestDialog').hide();
                                 PF('estateFormalityPresumableFormalityAssociationDialog').hide();
                                 #{oncomplete_confirm_presumable_formality_dialog}"/>
                <p:commandButton value="#{msg.no}" 
                oncomplete="PF('confirmAssociateSubjectToRequestDialog').hide();"/>
            </div>
        </p:dialog>
    
</ui:composition>