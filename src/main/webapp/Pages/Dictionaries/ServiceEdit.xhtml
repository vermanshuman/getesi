<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                template="/resources/tpl/Admin/EditBase.xhtml">
    <ui:param name="edit_title" value="#{msg.service}"/>
    <ui:param name="bean" value="#{serviceEditBean}"/>
    <ui:param name="showSave" value="#{!bean.onlyView}"/>
    <ui:param name="customCancelMsg"
              value="#{bean.onlyView ? msg.close : msg.cancel}"/>


    <ui:define name="edit_body">
        <style>
            #salesDevelopment, #estimate, #serviceLandOmiValues {
                padding-left: 1rem;
            }
        </style>
        <h:inputHidden id="hiddenButton" value="#{bean.entity.icon}"/>
        <p:panelGrid columns="2" styleClass="ui-panelgrid-blank form-group" columnClasses="ui-grid-col-1, ui-grid-col-3"
                     layout="grid">
            <span><span class="red">*</span>#{msg.name}:</span>
            <p:inputText value="#{bean.entity.name}" id="name" maxlength="50"
                         rendered="#{!bean.onlyView}" styleClass="input-width"
                         onkeypress="numbers_letters_only('#name');"/>
            <h:outputText value="#{bean.entity.name}" rendered="#{bean.onlyView}"/>
			</p:panelGrid>
			<p:panelGrid columns="2" styleClass="ui-panelgrid-blank form-group" columnClasses="ui-grid-col-1, ui-grid-col-2"
                     layout="grid">
            <span>#{msg.description}:</span>
            <p:inputTextarea value="#{bean.entity.description}" maxlength="1000" styleClass="input-width"
                             id="description" rendered="#{!bean.onlyView}"/>
            <h:outputText value="#{bean.entity.description}"
                          rendered="#{bean.onlyView}"
                          onkeypress="numbers_letters_only('#description');"/>
            
            <span>#{msg.serviceReferenceType}:</span>
            <p:selectOneMenu value="#{bean.selectedReferenceId}" style="width:91%;"
                             disabled="#{bean.onlyView}" id="referenceType">
                <f:selectItems value="#{bean.referenceItems}"/>
            </p:selectOneMenu>
                          

            <span>#{msg.serviceEmailText}:</span>
            <p:inputTextarea value="#{bean.entity.emailText}" styleClass="input-width"
                             rendered="#{!bean.onlyView}"/>
            <h:outputText value="#{bean.entity.emailText}"
                          rendered="#{bean.onlyView}" />			

            <span>#{msg.icon}:</span>
            <p:selectOneMenu id="icon" styleClass="icon" value="#{bean.entity.icon}" panelStyle="width:100px" var="t"
                             style="width: 88%; margin-right: 5px; height:40px" onfocus="setIcon()" disabled="#{bean.onlyView}">
                <p:ajax event="change" update="hiddenButton" oncomplete="setIcon()"/>
                <f:selectItems value="#{bean.icons}" var="icon" itemLabel=""
                               itemValue="#{icon}"/>
                <p:column style="text-align: center">
                    <span class=" fa #{t.name}"/>
                </p:column>
            </p:selectOneMenu>

            <span><span class="red">*</span>#{msg.serviceRequestType}:</span>
            <p:selectOneMenu value="#{bean.selectedTypeId}" style="width:91%;"
                             disabled="#{bean.onlyView}" onchange="changeUpdateService();"
                             id="requestType">
                <f:selectItems value="#{bean.requestTypes}"/>
            </p:selectOneMenu>

            <span><span class="red">*</span>#{msg.serviceSelectCost}:</span>
            <p:pickList value="#{bean.costConfigurations}" var="cost"
                        disabled="#{bean.onlyView}" effect="explode" itemValue="#{cost}"
                        itemLabel="#{cost.name}" showSourceFilter="true"
                        showTargetFilter="true" id="costs" filterMatchMode="contains"
                        converter="costConfigurationConverter"/>

            <span><span class="red">*</span>#{msg.permissionDataGroup}:</span>
            <p:selectOneMenu value="#{bean.selectedGroupId}" style="width:91%;"
                             disabled="#{bean.onlyView}"
                             id="dataGroup">
                <f:selectItems value="#{bean.dataGroupTypes}"/>
            </p:selectOneMenu>

            <span><span class="red">*</span>#{msg.requestOutputLabel}:</span>
            <p:selectOneRadio value="#{bean.selectedRequestOutputId}" style="width:91%;"
                              id="requestOutput">
                <f:selectItems value="#{bean.requestOutputItems}"/>
            </p:selectOneRadio>
        </p:panelGrid>

        <p:panelGrid columns="2" styleClass="ui-panelgrid-blank form-group">
            <span>#{msg.serviceEstimate}: </span>
            <p:selectBooleanCheckbox value="#{bean.entity.estimate}"
                                     id="estimate" disabled="#{bean.onlyView}"/>

            <span>#{msg.serviceSalesDevelopment}: </span>
            <p:selectBooleanCheckbox value="#{bean.salesDevelopment}"
                                     id="salesDevelopment" disabled="#{bean.onlyView}"/>

            <span>#{msg.serviceLandOmiValues}: </span>
            <p:selectBooleanCheckbox id="serviceLandOmiValues" value="#{bean.landOmi}"  disabled="#{bean.onlyView}"/>

            <span>#{msg.serviceUpdate}: </span>
            <p:panelGrid columns="2" styleClass="ui-panelgrid-blank form-group">
                <p:selectBooleanCheckbox value="#{bean.entity.isUpdate}"
                                         id="isUpdate" onchange="toggleIsUpdateServ()"
                                         disabled="#{bean.onlyView}" widgetVar="isUpdateServ"/>
                <p:panel id="updateService" style="margin: auto; display: #{bean.entity.isUpdate ? '' : 'none'}">
                    <p:panelGrid columns="2" styleClass="ui-panelgrid-blank" columnClasses="ui-grid-col-2,ui-grid-col-6"
                                 layout="grid">
                        <span><span class="red">*</span>#{msg.serviceServicesForUpdate}:</span>
                        <p:selectOneMenu value="#{bean.selectedUpdateServiceId}" style="width: 91%"
                                         disabled="#{bean.onlyView}" id="servicesForUpdate"
                                         onchange="changeUpdateCost();">
                            <f:selectItems value="#{bean.updateServices}"/>
                        </p:selectOneMenu>
                    </p:panelGrid>
                    <p:panelGrid columns="2" columnClasses="ui-grid-col-2,ui-grid-col-7"
                                 styleClass="ui-panelgrid-blank " layout="grid">
                        <span><span class="red">*</span>#{msg.serviceCostsForUpdate}:</span>
                        <p:dataTable var="item" rowKey="#{item.id}" id="costsForUpdate"
                                     selection="#{bean.selectedCostConfigurationsForUpdate}"
                                     emptyMessage="#{msg.noRecordsFound}"
                                     value="#{bean.costConfigurationsForUpdate}">

                            <p:column selectionMode="multiple" rendered="#{!bean.onlyView}"
                                      style="width:16px;text-align:center"/>

                            <p:column sortBy="#{item.name}" headerText="#{msg.name}">
                                <h:outputText value="#{item.name}"/>
                            </p:column>
                            <p:column sortBy="#{item.description}"
                                      headerText="#{msg.description}">
                                <h:outputText value="#{item.description}"/>
                            </p:column>

                        </p:dataTable>
                    </p:panelGrid>
                </p:panel>
            </p:panelGrid>
            <span>#{msg.serviceNegativo}: </span>
            <p:panelGrid columns="2" styleClass="ui-panelgrid-blank form-group">
                <p:selectBooleanCheckbox value="#{bean.entity.isNegative}"
                                         id="negativo"
                                         disabled="#{bean.onlyView}" widgetVar="isNegativeServ"/>
               
            </p:panelGrid>
            <span>#{msg.serviceNational}: </span>
            <p:panelGrid columns="2" styleClass="ui-panelgrid-blank form-group">
                <p:selectBooleanCheckbox value="#{bean.entity.isNational}"
                                         id="national" onchange="toggleIsNationalServ()"
                                         disabled="#{bean.onlyView}" widgetVar="isNationalServ"/>
                <p:panel id="nationalService" style="margin: auto; display: #{bean.entity.isNational ? '' : 'none'}">
                    <p:panelGrid columns="2" styleClass="ui-panelgrid-blank form-group" layout="grid">
                        <span>#{msg.serviceCost}: </span>
                        <p:inputText value="#{bean.entity.nationalPrice}" id="serviceNationalPrice"
                                     rendered="#{!bean.onlyView}" styleClass="input-width"/>

                    </p:panelGrid>
                </p:panel>
            </p:panelGrid>
            <span>#{msg.serviceUnauthorizedQuote}: </span>
            <p:panelGrid columns="2" styleClass="ui-panelgrid-blank form-group">
                <p:selectBooleanCheckbox value="#{bean.entity.unauthorizedQuote}"
                                         id="unauthorizedQuote" onchange="toggleUnauthorizedQuoteServ()"
                                         disabled="#{bean.onlyView}" widgetVar="unauthorizedQuoteServ"/>
                <p:panel id="unauthorizedQuoteService"
                         style="margin: auto; display: #{bean.entity.unauthorizedQuote ? '' : 'none'}">
                    <p:pickList value="#{bean.serviceCostUnauthorizedQuoteList}" var="cost"
                                disabled="#{bean.onlyView}" effect="explode" itemValue="#{cost}"
                                itemLabel="#{cost.name}" showSourceFilter="true" converter="costConfigurationConverter"
                                showTargetFilter="true" id="costUnauthorizedQuotes" filterMatchMode="contains"/>
                </p:panel>
            </p:panelGrid>
        </p:panelGrid>

        <p:remoteCommand name="changeUpdateService"
                         action="#{bean.changeUpdateService}" update=":form:updateService"/>

        <p:remoteCommand name="changeUpdateCost"
                         action="#{bean.changeUpdateCosts}" update=":form:updateService"/>

        <script type="application/javascript">
            function toggleIsUpdateServ() {
                if (PF('isUpdateServ').input[0].checked) {
                    $(document.getElementById('updateService')).fadeIn();
                } else {
                    $(document.getElementById('updateService')).fadeOut();
                }
            }

            function toggleIsNationalServ() {
                if (PF('isNationalServ').input[0].checked) {
                    $(document.getElementById('nationalService')).fadeIn();
                } else {
                    $(document.getElementById('nationalService')).fadeOut();
                }
            }

            function toggleUnauthorizedQuoteServ() {
                if (PF('unauthorizedQuoteServ').input[0].checked) {
                    $(document.getElementById('unauthorizedQuoteService')).fadeIn();
                } else {
                    $(document.getElementById('unauthorizedQuoteService')).fadeOut();
                }
            }
        </script>

    </ui:define>

    <ui:define name="additional_buttons">
        <p:commandButton value="#{msg.edit}" rendered="#{bean.onlyView}"
                         update=":form" action="#{bean.editService}"
                         icon="ui-icon ui-icon-pencil"/>
    </ui:define>
</ui:composition>
