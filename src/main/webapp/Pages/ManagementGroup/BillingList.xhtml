<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:ff="http://readytech.com/functions"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:c="http://java.sun.com/jsp/jstl/core">
<ui:composition template="/resources/tpl/Admin/LazyListTabBase.xhtml">
    <ui:param name="bean" value="#{billingListBean}"/>
    <ui:param name="renderTitle" value="false"/>
    <ui:param name="renderMenu" value="false"/>
    <ui:param name="centerPartStyleClass" value="false"/>
    <ui:define name="list_body">
        <link href="#{facesContext.externalContext.requestContextPath}/resources/styles/request.css"
              media="all" rel="stylesheet" type="text/css"/>
        <style>
            nav {
                position: relative;
                z-index: 1;
                white-space: nowrap;
            }

            nav a {
                position: relative;
                display: inline-block;
                color: inherit;
                text-decoration: none;
                margin: 0 -4px;
                width: 267px;
                font-family: "Open Sans","Helvetica Neue",sans-serif !important;
                font-size: 18px;
            }

            nav a::before, main {
                border: 1px solid #dddfe2;
            }

            nav a::before {
                content: ''; /* To generate the box */
                font-size: 18px;
                position: absolute;
                min-height: 50px;
                height: 50px;
                top: 0;
                right: -10px;
                bottom: .5em;
                left: 0;
                z-index: -1;
                border-bottom: none;
                border-radius: 7px 7px 0 0;
                background: #f6f7f9;
                box-shadow: 0 2px hsla(0, 0%, 100%, .5) inset;
                transform: perspective(20px) rotateX(3deg);
                transform-origin: bottom;
            }

            nav.left a {
                padding: 1em 1em 1em 0.7em;
            }

            nav.left a::before {
                transform-origin: bottom left;
            }

            nav.right a {
                padding: 1.5em 1em 1em 2em;
            }

            nav.right a::before {
                transform-origin: bottom right;
            }

            nav a.selected {
                z-index: 2;
            }

            nav a.selected::before {
                border-bottom: none;
                height: 51px;
            }

            nav a.selected::before, main {
                background: #fff;
            }

            main {
                display: block;
                margin: -7px 0 30px -15px;
                padding: 1em;
                border-radius: 3px;
                padding-left: 0px;
                padding-top: 0px;
            }

            main .ui-panelgrid .ui-grid-responsive .ui-panelgrid-cell {
                padding-top: 15px;
                padding-bottom: 0;
            }

            .circle {
                top: 56%;
                right: 20px;
                margin-top: -10px;
                position: absolute !important;
                overflow: hidden;
                cursor: pointer;
                display: block;
                height: 16px;
                width: 16px;
                line-height: 1;
                -moz-border-radius: 15px;
                border-radius: 8px;
                background-color: silver;
                color: white;
                text-align: center;
                font-size: 15px;
            }

            .react-grid-layout {
                position: relative;
                transition: height .2s ease;
            }

            .react-grid-item.cssTransforms {
                transition-property: transform;
            }

            .ricavi_outer_div {
                width: 100%;
                height: 100%;
                border-radius: 5px;
                overflow: hidden;
                box-shadow: rgb(4 26 55/ 16%) 0px 1px 2.94px 0.06px;
                background: rgb(129, 199, 132);
                border: 0px;
            }

            @media screen and (min-width: 1400px) {
                .inner_div {
                    opacity: 0.15;
                }
            }

            @media screen and (min-width: 1200px) {
                .inner_div {
                    opacity: 0.1;
                }
            }

            .inner_div {
                color: rgb(255, 255, 255);
                opacity: 0.2;
                font-size: 74px;
                bottom: -10px;
                left: 0px;
                overflow: hidden;
            }

            .box_header {
                position: absolute;
                top: -32px;
                left: 10px;
                right: 45px;
                font-size: 18px;
                text-transform: uppercase;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
                color: rgb(255, 255, 255);
            }

            .cost {
                bottom: 20px;
                color: rgb(255, 255, 255);
                font-size: 35px;
                left: 5px;
                right: 5px;
                text-align: center;
                font-weight: bold;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
            }

            .list_icon {
                position: absolute;
                top: -32px;
                right: 7px;
                cursor: pointer;
            }

            .costi_outer_div {
                width: 100%;
                height: 100%;
                border-radius: 5px;
                overflow: hidden;
                box-shadow: rgb(4 26 55/ 16%) 0px 1px 2.94px 0.06px;
                background: rgb(251, 183, 70);
                border: 0px;
            }

            .incassi_outer_div {
                width: 100%;
                height: 100%;
                border-radius: 5px;
                overflow: hidden;
                box-shadow: rgb(4 26 55/ 16%) 0px 1px 2.94px 0.06px;
                background: rgb(91, 175, 184);
                border: 0px;
            }

            .tributi_outer_div {
                width: 100%;
                height: 100%;
                border-radius: 5px;
                overflow: hidden;
                box-shadow: rgb(4 26 55/ 16%) 0px 1px 2.94px 0.06px;
                background: rgb(100, 181, 246);
                border: 0px;
            }

            .resizable_icon {
                position: absolute;
                width: 20px;
                height: 20px;
                bottom: 0;
                right: 0;
                background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pg08IS0tIEdlbmVyYXRvcjogQWRvYmUgRmlyZXdvcmtzIENTNiwgRXhwb3J0IFNWRyBFeHRlbnNpb24gYnkgQWFyb24gQmVhbGwgKGh0dHA6Ly9maXJld29ya3MuYWJlYWxsLmNvbSkgLiBWZXJzaW9uOiAwLjYuMSAgLS0+DTwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DTxzdmcgaWQ9IlVudGl0bGVkLVBhZ2UlMjAxIiB2aWV3Qm94PSIwIDAgNiA2IiBzdHlsZT0iYmFja2dyb3VuZC1jb2xvcjojZmZmZmZmMDAiIHZlcnNpb249IjEuMSINCXhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbDpzcGFjZT0icHJlc2VydmUiDQl4PSIwcHgiIHk9IjBweCIgd2lkdGg9IjZweCIgaGVpZ2h0PSI2cHgiDT4NCTxnIG9wYWNpdHk9IjAuMzAyIj4NCQk8cGF0aCBkPSJNIDYgNiBMIDAgNiBMIDAgNC4yIEwgNCA0LjIgTCA0LjIgNC4yIEwgNC4yIDAgTCA2IDAgTCA2IDYgTCA2IDYgWiIgZmlsbD0iIzAwMDAwMCIvPg0JPC9nPg08L3N2Zz4=);
                background-position: 100% 100%;
                padding: 0 3px 3px 0;
                background-repeat: no-repeat;
                background-origin: content-box;
                box-sizing: border-box;
                cursor: se-resize;
            }

            .wHMuN {
                width: 100%;
                height: 100%;
                border-radius: 5px;
                overflow: hidden;
                box-shadow: rgb(4 26 55 / 16%) 0px 1px 2.94px 0.06px;
                background: rgb(255, 255, 255);
                border: 1px solid rgb(221, 221, 221);
            }

            .trimester {
                margin-top: 7px;
                margin-left: 10px;
                right: 45px;
                font-size: 18px;
                text-transform: uppercase;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
                color: rgb(110, 122, 129);
            }

            .justifyContent-center-0-26 {
                justify-content: center;
            }

            .alignContent-center-0-17 {
                align-content: center;
            }

            .alignItems-stretch-0-14 {
                align-items: stretch;
            }

            .wrap-nowrap-0-7 {
                flex-wrap: nowrap;
            }

            .direction-column-0-5 {
                flex-direction: column;
            }

            .fullWidth-0-2 {
                flex: 1 1 0;
                width: 100%;
            }

            .flexBox-0-0 {
                display: flex;
            }

            .month_div {
                margin-left: 10px;
                margin-right: 10px;
                border-top: 1px solid rgb(221, 221, 221);
                padding-top: 5px;
                padding-bottom: 5px;
            }

            .month_outer {
                float: left;
                width: 50%;
            }

            .month_inner {
                color: rgb(110, 122, 129);
                font-size: 16px;
                width: auto;
                line-height: 25px;
                text-align: left;
                font-weight: 100;
                white-space: nowrap;
                text-overflow: ellipsis;
                overflow: hidden;
            }

            .cost_outer {
                float: right;
            }

            .cost_inner {
                color: rgb(110, 122, 129);
                font-size: 16px;
                width: auto;
                line-height: 25px;
                text-align: right;
                font-weight: 100;
                white-space: nowrap;
                text-overflow: ellipsis;
                overflow: hidden;
            }

            .cost_total {
                color: rgb(110, 122, 129);
                bottom: 20px;
                font-size: 2.5vw;
                left: 5px;
                right: 5px;
                text-align: center;
                font-weight: bold;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
            }

            .list_icon_trimester {
                font-size: 17px;
                color: rgb(110, 122, 129);
                float: right;
                margin-top: 7px;
                margin-right: 5px;
            }

            .inner_div img {
                position: absolute;
                height: 100px;
                margin-top: 22px;
                margin-left: -27px;
            }

            .ricavi-img, .incassi-bianco-img {
                position: absolute;
                margin-top: 24px;
                height: 76px;
                width: 100px;
                background-size: 100px;
                background-repeat: no-repeat;
            }

            .ricavi-img {
                background-image: url('../../resources/images/ricavi.png') !important;
                background-position-x: -20px;
            }

            .incassi-bianco-img {
                background-image: url('../../resources/images/incassi_bianco.png') !important;
                background-position-x: -20px;
                background-position-y: 10px;
            }

            .column_outer {
                display: flex;
                gap: 10px;
                width: 100%;
            }

            .column_outer .month_inner {
                width: 25%;
            }

            .color-white * {
                color: #fff;
            }

            .dot {
                height: 12px;
                width: 12px !important;
                background-color: #bbb !important;
                border-radius: 50% !important;
                display: inline-block;
                margin-left: 5px !important;
                margin-top: 5px !important;
            }

            .dot.selected {
                background-color: #fff !important;
            }

            .excel-img {
                background-image: url('../../resources/images/excel.png') !important;
                height: 25px;
                width: 25px;
                background-size: cover;
                background-repeat: no-repeat;
                position: absolute;
            }

            @media screen and (min-width: 1400px) {
                .cost_total {
                    font-size: 35px;
                }
            }

            .orange-button {
                background: orange !important;
            }

            .green-button {
                background: #00CC52 !important;
            }

            .red-button {
                background: red !important;
            }

            body .ui-button.ui-button-warning-icon, body .ui-splitbutton.ui-button-warning-icon > .ui-button {
                background: #fb6e51;
                color: #FFFFFF;
                border: 1px solid #fb6e51 !important;
            }

            body .ui-button.ui-button-warning-icon.ui-state-focus, body .ui-splitbutton.ui-button-warning-icon > .ui-button.ui-state-focus {
                box-shadow: 0 0 0 0.2rem orange !important;
            }

            body .ui-button.ui-button-warning-icon.ui-state-active, body .ui-splitbutton.ui-button-warning-icon.ui-state-active > .ui-button.ui-state-active {
                background-color: #ff8b00 !important;
                color: #FFFFFF;
                border: 1px solid #ff8b00 !important;
            }

            #table_div_content {
                border: none !important;
                padding-top: 0px !important;
                padding-bottom: 0px !important;
            }

            #table_div_content .ui-widget, #table_div_content .ui-widget .ui-widget {
                font-family: "Open Sans", "Helvetica Neue", sans-serif !important;
                text-decoration: none !important;
                font-size: 14px !important;
            }

            #settingPanel, #subjectSettingPanel {
                position: absolute;
                z-index: 1;
                margin-top: 40px;
                max-width: 460px;
                right: 50px;
                border: 1px solid #547ac4;
            }

            .input-width-100 {
                width: 100%;
            }

            .calender-filled input, .select-checkbox, .select-one-menu {
                border: 1px solid #009900 !important;
            }

            body .ui-inputfield.ui-state-focus {
                box-shadow: 0 0 0 0.2em #57c279 !important;
            }

            body .ui-selectonemenu.ui-state-focus:not(.ui-state-error) {
                box-shadow: 0 0 0 0.2em #57c279 !important;
            }

            #settingPanel input, #subjectSettingPanel input {
                background-color: #F0F3F5 !important;
                border: none !important;;
                border-radius: 7px !important;
                min-height: 36px;
            }

            .ui-calendar:not(#currentDay) .ui-datepicker-trigger {
                color: #003871 !important;;
            }

            body .ui-calendar:not(#currentDay) .ui-button {
                background-color: transparent !important;
                margin-left: -37px;
            }

            #settingPanel .ui-selectonemenu, #subjectSettingPanel .ui-selectonemenu {
                background-color: #F0F3F5 !important;
                border: none !important;
                border-radius: 7px !important;
            }

            #settingPanel .ui-selectonemenu-label, #subjectSettingPanel .ui-selectonemenu-label {
                background-color: #F0F3F5 !important;
                border-radius: 7px !important;
                color: #003871;
                margin-top: 4px;
                margin-bottom: 4px;
            }

            #filterInvoiceNumber {
                width: 200px;
                border: 1px solid #a8acb1 !important;
            }

            .ui-selectonemenu {
                border: 1px solid #a8acb1 !important;
            }

            #filterDateFrom_input {
                width: 100%;
            }

            #filterDateTo_input {
                width: 100%;
            }

            .search-panel-btns {
                gap: 30px;
                display: flex;
                justify-content: center;
            }

            body .ui-datatable .ui-datatable-data tr.ui-datatable-even {
                background-color: #f0f3f5 !important;
            }

            .ui-datatable thead th, .ui-datatable tbody td, .ui-datatable tfoot td, .ui-datatable tfoot th {
                border: 1px solid #c9cdd2 !important;
                color: #4c5156;
            }

            body .ui-paginator .ui-paginator-pages .ui-paginator-page.ui-state-active {
                background: #FFF !important;
                color: #000000 !important;
            }

            body .ui-datatable thead th {
                background-color: #f8f9fa !important;
                color: #495057 !important;
                padding: 6px 6px !important;
            }

            body .ui-datatable .ui-datatable-data tr td {
                padding: 6px 6px !important;
            }

            body .ui-datatable thead th.ui-state-active {
                color: #2196F3 !important;
            }

            body .ui-datatable .ui-datatable-data > tr:hover {
                background: #e9ecef !important;
            }

            body .ui-widget, body .ui-widget .ui-widget {
                font-family: "Open Sans","Helvetica Neue",sans-serif;
                text-decoration: none;
            }
            #statuses_panel, #requestTypes_panel, #services_panel {
                display: none !important;
            }
            .actionPnl-tooltip {
                text-align:center; width:140px; background-color: #6688AA !important;border-radius: 7px !important; border: 1px solid #FFFFFF; opacity: 0.8;
            }

            .actionPnl-panel {
                text-align:center; background-color: #6688AA !important; margin-left:-5px; margin-right: -5px; border-radius: 7px !important;
            }
            #subjectSettingPanel_content {
                display: block !important;
            }
            .jqplot-table-legend {
                display: none;
            }
            #client_items {
                width: 305px !important;
            }

            #filterClient_items {
                width: 305px !important;
            }
        </style>
        <script src='https://kit.fontawesome.com/a076d05399.js' crossorigin='anonymous'></script>
        <link rel="stylesheet"
              href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"/>
        <div style="margin-left: 20px;">
            <nav class="left" style="margin-left:20px;">
                <a href="#" id="tab1" class="tab selected">#{ff:upper(msg.billingListDashboard)}</a>
                <a href="#" id="tab2" class="tab">#{ff:upper(msg.billingListInvoices)}</a>
                <a href="#" id="tab3" class="tab">#{ff:upper(msg.billingListCreditNotes)}</a>
                <a href="#" id="tab4" class="tab">#{ff:upper(msg.billingListSubjectsToBeInvoiced)}</a>
            </nav>

            <main>
                <div id="content_tab1" class="hide">
                    <p:panelGrid columns="4" styleClass="ui-panelgrid-blank form-group" cellpadding="3" cellspacing="0"
                                 columnClasses="ui-grid-col-4,ui-grid-col-4,ui-grid-col-3,ui-grid-col-1" layout="grid">
                        <p:commandButton value="#{ff:upper(msg.billingListUpdate)}"/>

                        <p:outputLabel></p:outputLabel>

                        <p:selectOneMenu id="client" value="#{bean.selectedClientId}" style="width: 300px; float:right;"
                                         styleClass="#{bean.selectedClientId ne null ? 'select-one-menu' : ''}">
                            <f:selectItem itemLabel="#{ff:upper(msg.billingListClient)}" itemValue="#{null}"
                                          noSelectionOption="true"/>
                            <f:selectItems value="#{bean.clients}" />
                            <p:ajax event="itemSelect" update="@this"/>
                        </p:selectOneMenu>

                        <p:selectOneMenu id="year" value="#{bean.selectedYear}" label="#{msg.requestClient}"
                                         style="width: calc( 100% - 5px);"
                                         styleClass="#{bean.selectedYear ne null ? 'select-one-menu' : ''}">
                            <f:selectItem itemLabel="#{ff:upper(msg.billingListYear)}" itemValue="#{null}"
                                          noSelectionOption="true"/>
                            <f:selectItems value="#{bean.years}"/>
                            <p:ajax event="itemSelect" update="@this"/>
                        </p:selectOneMenu>
                    </p:panelGrid>

                    <div class="react-grid-layout" style="height: 600px;">
                        <p:panelGrid columns="4" styleClass="ui-panelgrid-blank form-group"
                                     cellpadding="3" cellspacing="0"
                                     columnClasses="ui-grid-col-3,ui-grid-col-3,ui-grid-col-3,ui-grid-col-3"
                                     layout="grid">
                            <div class="react-grid-item react-draggable cssTransforms react-resizable-hide react-resizable"
                                 style="width: calc(25% - 9px); height: 100px; line-height: 100px; position: absolute; transform: translate(-4px, 0px); box-sizing: border-box;">
                                <div>
                                    <div class="ricavi_outer_div">
                                        <div class="inner_div">
                                            <i class="ricavi-img"></i>
                                        </div>
                                        <div color="#fff" class="box_header">#{msg.billingListRevenues}</div>
                                        <div class="cost">0 €</div>
                                    </div>

                                    <div class="list_icon"
                                         style="font-size: 17px; color: rgb(255, 255, 255);" title="">
                                        <i class="fa fa-fw fa-list"
                                           style="font-size: inherit;"></i>
                                    </div>

                                </div>
                                <span class="resizable_icon"></span>
                            </div>

                            <div class="react-grid-item react-draggable cssTransforms react-resizable-hide react-resizable"
                                 style="width: calc(25% - 9px); height: 100px; line-height: 100px; position: absolute; transform: translate(calc(100% + 6px), 0px); box-sizing: border-box;">
                                <div>
                                    <div class="costi_outer_div">
                                        <div class="inner_div">
                                            <i class="ricavi-img"></i>
                                        </div>
                                        <div color="#fff" class=" box_header">#{msg.billingListCosts}</div>
                                        <div class="cost">0 €</div>
                                    </div>
                                    <div class="list_icon"
                                         style="font-size: 17px; color: rgb(255, 255, 255);" title="">
                                        <i class="fa fa-fw fa-list"
                                           style="font-size: inherit;"></i>
                                    </div>

                                </div>
                                <span class="resizable_icon"></span>
                            </div>

                            <div class="react-grid-item react-draggable cssTransforms react-resizable-hide react-resizable"
                                 style="width: calc(25% - 9px); height: 100px; line-height: 100px; position: absolute; transform: translate(calc(200% + 16px), 0px); box-sizing: border-box;">
                                <div>
                                    <div class="incassi_outer_div">
                                        <div class="inner_div">
                                            <i class="incassi-bianco-img"></i>
                                        </div>
                                        <div color="#fff" class=" box_header">#{msg.billingListTributes}</div>
                                        <div class="cost">0 €</div>
                                    </div>

                                    <div class="list_icon"
                                         style="font-size: 17px; color: rgb(255, 255, 255);" title="">
                                        <i class="fa fa-fw fa-list"
                                           style="font-size: inherit;"></i>
                                    </div>

                                </div>
                                <span class="resizable_icon"></span>
                            </div>

                            <div class="react-grid-item react-draggable cssTransforms react-resizable-hide react-resizable"
                                 style="width: calc(25% - 9px); height: 100px; line-height: 100px; position: absolute; transform: translate(calc(300% + 26px), 0px); box-sizing: border-box;">
                                <div>
                                    <div class="tributi_outer_div">
                                        <div class="inner_div" style="position: absolute;">
                                            <i class="fa fa-university"
                                               style="position: relative; left: -9px; bottom: -18px; font-size: 80px;"></i>
                                        </div>
                                        <div color="#fff" class=" box_header"><!-- #{msg.billingListTributes} --></div>
                                        <div class="cost">&nbsp;</div>
                                    </div>

                                    <div class="list_icon"
                                         style="font-size: 17px; color: rgb(255, 255, 255);" title="">
                                        <i class="fa fa-fw fa-list11"
                                           style="font-size: inherit;"></i>
                                    </div>

                                </div>
                                <span class="resizable_icon"></span>
                            </div>
                        </p:panelGrid>

                        <div class="layout-dashboard" style="max-width: 98%;">
                            <h:panelGroup id="slides1" layout="block" styleClass="p-grid"
                                          style="margin-top: 7% !important;height: 210px;">
                                <div style="width: calc(25% - 8px);position: absolute;transform: translate(16px, 0px);">
                                    <div class="react-grid-item react-draggable cssTransforms react-resizable-hide react-resizable"
                                         style="height: 210px; border-radius: 5px;">
                                        <div class="sc-hcnlBt wHMuN">
                                            <div>
                                                <div color="#6e7a81" class="trimester"
                                                     style="float: left;">#{msg.billingListFirstSemestre}</div>
                                                <div class="list_icon_trimester">
                                                    <i class="fa fa-fw fa-list11" style="font-size: inherit;"></i>
                                                </div>
                                            </div>

                                            <div style="margin-top: 38px;">
                                                <div class="flexBox-0-0 fullWidth-0-2 wrap-nowrap-0-7
															direction-column-0-5 justifyContent-center-0-26 alignItems-stretch-0-14 alignContent-center-0-17">
                                                    <div class="month_div" style="border: 0px;">
                                                        <div class="month_outer">
                                                            <div class="month_inner">#{msg.january} - #{msg.february}</div>
                                                        </div>
                                                        <div class="cost_outer">
                                                            <div class="cost_inner">
                                                                <h:outputText value="#{bean.monthJanFebAmount}">
                                                                    <f:convertNumber pattern="#0.00"/>
                                                                </h:outputText> €
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="month_div">
                                                        <div class="month_outer">
                                                            <div class="month_inner">#{msg.march} - #{msg.april}</div>
                                                        </div>
                                                        <div class="cost_outer">
                                                            <div class="cost_inner">
                                                                <h:outputText value="#{bean.monthMarAprAmount}">
                                                                    <f:convertNumber pattern="#0.00"/>
                                                                </h:outputText> €
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="month_div">
                                                        <div class="month_outer">
                                                            <div class="month_inner">#{msg.may} - #{msg.june}</div>
                                                        </div>
                                                        <div class="cost_outer">
                                                            <div class="cost_inner">
                                                                <h:outputText value="#{bean.monthMayJunAmount}">
                                                                    <f:convertNumber pattern="#0.00"/>
                                                                </h:outputText> €
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="cost_total">
                                                    <h:outputText
                                                            value="#{bean.monthJanFebAmount+bean.monthMarAprAmount+bean.monthMayJunAmount}">
                                                        <f:convertNumber pattern="#0.00"/>
                                                    </h:outputText> €
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div style="width: calc(25% - 8px);position: absolute;transform: translate(calc(100% + 26px), 0px);">
                                    <div class="react-grid-item react-draggable cssTransforms react-resizable-hide react-resizable"
                                         style="height: 210px; border-radius: 5px;">
                                        <div class="sc-hcnlBt wHMuN">
                                            <div>
                                                <div color="#6e7a81" class="trimester"
                                                     style="float: left;">#{msg.billingListSecondSemestre}</div>
                                                <div class="list_icon_trimester">
                                                    <i class="fa fa-fw fa-list11" style="font-size: inherit;"></i>
                                                </div>
                                            </div>

                                            <div style="margin-top: 38px;">
                                                <div class="flexBox-0-0 fullWidth-0-2 wrap-nowrap-0-7
															direction-column-0-5 justifyContent-center-0-26 alignItems-stretch-0-14 alignContent-center-0-17">
                                                    <div class="month_div" style="border: 0px;">
                                                        <div class="month_outer">
                                                            <div class="month_inner">#{msg.july} - #{msg.august}</div>
                                                        </div>
                                                        <div class="cost_outer">
                                                            <div class="cost_inner">
                                                                <h:outputText value="#{bean.monthJulAugAmount}">
                                                                    <f:convertNumber pattern="#0.00"/>
                                                                </h:outputText> €
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="month_div">
                                                        <div class="month_outer">
                                                            <div class="month_inner">#{msg.september} - #{msg.october}</div>
                                                        </div>
                                                        <div class="cost_outer">
                                                            <div class="cost_inner">
                                                                <h:outputText value="#{bean.monthSepOctAmount}">
                                                                    <f:convertNumber pattern="#0.00"/>
                                                                </h:outputText> €
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="month_div">
                                                        <div class="month_outer">
                                                            <div class="month_inner">#{msg.november} - #{msg.december}</div>
                                                        </div>
                                                        <div class="cost_outer">
                                                            <div class="cost_inner">
                                                                <h:outputText value="#{bean.monthNovDecAmount}">
                                                                    <f:convertNumber pattern="#0.00"/>
                                                                </h:outputText> €
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="cost_total">
                                                    <h:outputText
                                                            value="#{bean.monthJulAugAmount+bean.monthSepOctAmount+bean.monthNovDecAmount}">
                                                        <f:convertNumber pattern="#0.00"/>
                                                    </h:outputText> €
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </h:panelGroup>
                            <h:panelGroup id="barChartWidget" layout="block" styleClass="p-grid"
                                          style="margin-top: -217px !important;margin-left: calc(51% - 11px);max-height: 437px;position: absolute;width: calc(50% + 5px);">
                                <div class="p-col-12" style="max-height: 437px;">
                                    <div class="card" style="max-height: 437px;">
                                        <p:chart type="bar" model="#{bean.model}"  style="height: 437px;"/>
                                    </div>
                                </div>
                            </h:panelGroup>
                        </div>

                        <div class="layout-dashboard" style="max-width: 98%;">
                            <h:panelGroup id="turnoverPerMonthWidget" layout="block" styleClass="p-grid"
                                          style="margin-top: 1% !important;">
                                <div style="width: calc(25% - 8px);position: absolute;transform: translate(16px, 0px);">
                                    <div class="react-grid-item react-draggable cssTransforms react-resizable-hide react-resizable"
                                         style="height: 220px; border-radius: 5px;">
                                        <div class="sc-hcnlBt wHMuN color-white" style="background-color: #81C784;">
                                            <div>
                                                <div color="#6e7a81" class="trimester"
                                                     style="float: left;">#{msg.subjectTurnoverPerMonth}</div>
                                                <div class="list_icon_trimester">
                                                    <i class="fa fa-fw fa-list11" style="font-size: inherit;"></i>
                                                </div>
                                            </div>

                                            <div style="margin-top: 38px;">
                                                <h:panelGroup layout="block" styleClass="flexBox-0-0 fullWidth-0-2 wrap-nowrap-0-7
															direction-column-0-5 justifyContent-center-0-26 alignItems-stretch-0-14 alignContent-center-0-17">
                                                    <div class="month_div"
                                                         style="border: 0px;border-bottom: 1px solid rgb(221, 221, 221);">
                                                        <div class="month_outer column_outer">
                                                            <div class="month_inner"></div>
                                                            <div class="month_inner">Imp.</div>
                                                            <div class="month_inner">Non Imp.</div>
                                                            <div class="month_inner">Tot.</div>
                                                        </div>
                                                    </div>
                                                    <c:forEach var="item" items="#{bean.getTestTurnoverPerMonth()}"
                                                               varStatus="loop">
                                                        <c:if test="${loop.index ge bean.quadrimesterStartIdx and loop.index le bean.quadrimesterEndIdx}">
                                                            <div class="month_div"
                                                                 style="border: 0px;padding-bottom: 0px;#{(loop.index eq 0 or loop.index eq 4 or loop.index eq 8) ? '' : 'padding-top: 0px;'}">
                                                                <div class="month_outer column_outer">
                                                                    <div class="month_inner">#{bean.months[loop.index]}</div>
                                                                    <div class="month_inner">10.00</div>
                                                                    <div class="month_inner">5.00</div>
                                                                    <div class="month_inner">15.00</div>
                                                                </div>
                                                            </div>
                                                        </c:if>
                                                    </c:forEach>
                                                </h:panelGroup>
                                                <div style="padding: 5px 20px;">
                                                    <div>
                                                        <i class="excel-img"></i>
                                                    </div>
                                                    <div style="float: right;">
                                                        <p:commandButton icon="test" update="turnoverPerMonthWidget"
                                                                         action="#{bean.setQuadrimesterIdx(0, 3)}"
                                                                         styleClass="dot #{bean.quadrimesterStartIdx eq 0 ? 'selected' : ''}"/>
                                                        <p:commandButton icon="test" update="turnoverPerMonthWidget"
                                                                         action="#{bean.setQuadrimesterIdx(4, 7)}"
                                                                         styleClass="dot #{bean.quadrimesterStartIdx eq 4 ? 'selected' : ''}"/>
                                                        <p:commandButton icon="test" update="turnoverPerMonthWidget"
                                                                         action="#{bean.setQuadrimesterIdx(8, 11)}"
                                                                         styleClass="dot #{bean.quadrimesterStartIdx eq 8 ? 'selected' : ''}"/>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </h:panelGroup>
                            <h:panelGroup id="turnoverPerCustomerWidget" layout="block" styleClass="p-grid"
                                          style="margin-top: 0px !important;margin-left: calc(25% + 4px);">
                                <div style="width: calc(25% - 8px);position: absolute;transform: translate(16px, 0px);">
                                    <div class="react-grid-item react-draggable cssTransforms react-resizable-hide react-resizable"
                                         style="height: 220px; border-radius: 5px;">
                                        <div class="sc-hcnlBt wHMuN color-white" style="background-color: #FAB544;">
                                            <div>
                                                <div color="#6e7a81" class="trimester"
                                                     style="float: left;">#{msg.turnoverPerCustomer}</div>
                                                <div class="list_icon_trimester">
                                                    <i class="fa fa-fw fa-list11" style="font-size: inherit;"></i>
                                                </div>
                                            </div>

                                            <div style="margin-top: 38px;">
                                                <h:panelGroup layout="block" styleClass="flexBox-0-0 fullWidth-0-2 wrap-nowrap-0-7
															direction-column-0-5 justifyContent-center-0-26 alignItems-stretch-0-14 alignContent-center-0-17">
                                                    <div class="month_div"
                                                         style="border: 0px;border-bottom: 1px solid rgb(221, 221, 221);">
                                                        <div class="month_outer column_outer">
                                                            <div class="month_inner"></div>
                                                            <div class="month_inner">Imp.</div>
                                                            <div class="month_inner">Non Imp.</div>
                                                            <div class="month_inner">Tot.</div>
                                                        </div>
                                                    </div>
                                                    <c:forEach var="item" items="#{bean.getTestTurnoverPerCustomer()}"
                                                               varStatus="loop">
                                                        <c:if test="${loop.index ge bean.quadrimesterStartIdx and loop.index le bean.quadrimesterEndIdx}">
                                                            <div class="month_div"
                                                                 style="border: 0px;padding-bottom: 0px;#{(loop.index eq 0 or loop.index eq 4 or loop.index eq 8) ? '' : 'padding-top: 0px;'}">
                                                                <div class="month_outer column_outer">
                                                                    <div class="month_inner">#{item}</div>
                                                                    <div class="month_inner">10.00</div>
                                                                    <div class="month_inner">15.00</div>
                                                                    <div class="month_inner">25.00</div>
                                                                </div>
                                                            </div>
                                                        </c:if>
                                                    </c:forEach>
                                                </h:panelGroup>
                                                <div style="padding: 5px 20px;">
                                                    <div>
                                                        <i class="excel-img"></i>
                                                    </div>
                                                    <div style="float: right;">
                                                        <p:commandButton icon="test" update="turnoverPerCustomerWidget"
                                                                         action="#{bean.setQuadrimesterIdx(0, 3)}"
                                                                         styleClass="dot #{bean.quadrimesterStartIdx eq 0 ? 'selected' : ''}"/>
                                                        <p:commandButton icon="test" update="turnoverPerCustomerWidget"
                                                                         action="#{bean.setQuadrimesterIdx(4, 7)}"
                                                                         styleClass="dot #{bean.quadrimesterStartIdx eq 4 ? 'selected' : ''}"/>
                                                        <p:commandButton icon="test" update="turnoverPerCustomerWidget"
                                                                         action="#{bean.setQuadrimesterIdx(8, 11)}"
                                                                         styleClass="dot #{bean.quadrimesterStartIdx eq 8 ? 'selected' : ''}"/>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </h:panelGroup>
                        </div>
                    </div>
                </div>
                <!-- FATTURE TAB -->
                <div id="content_tab2" class="hide" style="display: none;">
                    <div class="p-grid">
                        <div class="p-col-12 p-md-12">
                            <div class="card"
                                 style="border: none !important; padding-top:0px; padding-bottom:0px; margin-top:10px;">
                                <div class="p-grid">
                                    <div class="p-col-3" style="padding-bottom: 0px !important;">
                                        <div class="p-formgroup-inline">
                                            <div class="p-field">
                                                <p:commandButton value="#{msg.billingListCreateInvoice}" id="createInvoice" action="#{bean.loadInvoiceDialogData}"
                                                                 update=":form"
                                                                 oncomplete="PF('invoiceDialogBillingWV').show();"
                                                                 styleClass="ui-button-success p-mr-2 p-mb-2"/>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="p-col-9" style="padding-bottom: 0px !important;">
                                        <div class="p-formgroup-inline alignEnd">
                                            <div class="p-field">
                                                <p:inputText id="filterInvoiceNumber"
                                                             value="#{bean.filterInvoiceNumber}"
                                                             placeholder="#{msg.billingListNumber}"/>
                                            </div>
                                            <p:selectOneMenu id="filterClient" value="#{bean.selectedCompanyId}" style="width: 300px; margin-right: 20px;"
                                                             styleClass="#{bean.selectedCompanyId ne null ? 'select-one-menu' : ''}">
                                                <f:selectItem itemLabel="#{ff:upper(msg.billingListClient)}"
                                                              itemValue="#{null}" noSelectionOption="true"/>
                                                <f:selectItems value="#{bean.companies}"/>
                                                <p:ajax event="itemSelect" update="@this"/>
                                            </p:selectOneMenu>

                                            <div class="p-field">
                                                <p:commandButton id="cercaButton" onclick="filterTableFromPanel();"
                                                                 styleClass="ui-button-warning-icon"
                                                                 update="searchPanel"
                                                                 icon="ui-icon ui-icon-search pi pi-search"/>
                                            </div>
                                            <p:commandButton id="settingButton" onclick="PF('panelSetting').toggle()"
                                                             type="button"
                                                             styleClass="ui-button-warning-icon"
                                                             icon="ui-icon ui-icon-search pi pi-sliders-h"/>
                                            <p:panel id="settingPanel" widgetVar="panelSetting" closable="true"
                                                     toggleable="true" collapsed="true">
                                                <div class="p-grid">
                                                    <div class="p-col-12" style="text-align: center;">
                                                        <h2>Filtra per</h2>
                                                    </div>
                                                    <div class="p-col-12">
                                                        <div style="">
                                                            <h:outputText style="color: #003871;"
                                                                          value="#{ff:upper(msg.billingListDate)}:"/>
                                                        </div>
                                                    </div>
                                                    <div class="p-col-6">
                                                        <p:calendar id="filterDateFrom" readonlyInput="false"
                                                                    showOn="button"
                                                                    onkeypress="if(!searchOnEnter(event, 'searchButton')) return true;"
                                                                    pattern="dd/MM/yyyy" mask="true" locale="it"
                                                                    navigator="true"
                                                                    popupIconOnly="true"
                                                                    onblur="setTimeout(function(){checkDates();}, 500);check_date(this);"
                                                                    value="#{bean.dateFrom}"
                                                                    placeholder="#{msg.billingListDateFrom}"
                                                                    styleClass="#{bean.dateFrom ne null ? 'calender-filled' : ''}">
                                                            <p:ajax event="dateSelect" update="@this"/>
                                                        </p:calendar>
                                                        <div id="hyphen"></div>
                                                    </div>
                                                    <div class="p-col-6">
                                                        <p:calendar id="filterDateTo" readonlyInput="false"
                                                                    showOn="button"
                                                                    onkeypress="if(!searchOnEnter(event, 'searchButton')) return false;"
                                                                    pattern="dd/MM/yyyy" mask="true"
                                                                    locale="it" navigator="true" popupIconOnly="true"
                                                                    placeholder="#{msg.billingListDateTo}"
                                                                    onblur="check_date(this)" value="#{bean.dateTo}"
                                                                    styleClass="#{bean.dateTo ne null ? 'calender-filled' : ''}">
                                                            <p:ajax event="dateSelect" update="@this"/>
                                                        </p:calendar>
                                                    </div>
                                                    <div class="p-col-6">
                                                        <p:selectOneMenu id="manager"
                                                                         value="#{bean.managerClientFilterid}"
                                                                         style="width: 100%;"
                                                                         styleClass="#{bean.managerClientFilterid ne null ? 'select-one-menu' : ''}">
                                                            <f:selectItem itemLabel="#{ff:upper(msg.clientManager)}"
                                                                          itemValue="#{null}"
                                                                          noSelectionOption="true"/>
                                                            <f:selectItems value="#{bean.managerClients}"/>
                                                            <p:ajax event="itemSelect" update="@this"/>
                                                        </p:selectOneMenu>
                                                    </div>
                                                    <div class="p-col-6">
                                                        <p:selectOneMenu id="office" value="#{bean.selectedOfficeId}"
                                                                         style="width: 100%;"
                                                                         styleClass="#{bean.selectedOfficeId ne null ? 'select-one-menu' : ''}">
                                                            <f:selectItem
                                                                    itemLabel="#{msg.subjectViewFormalityConservatoryCap}"
                                                                    itemValue="#{null}"
                                                                    noSelectionOption="true"/>
                                                            <f:selectItems value="#{bean.offices}"/>
                                                            <p:ajax event="itemSelect" update="@this"/>
                                                        </p:selectOneMenu>
                                                    </div>
                                                    <div class="p-col-6">
                                                        <p:inputText id="filterNotes" value="#{bean.filterNotes}"
                                                                     placeholder="#{msg.billingListNotes}"
                                                                     styleClass="input-width-100"/>
                                                    </div>
                                                    <div class="p-col-6">
                                                        <p:inputText id="filterNdg" value="#{bean.filterNdg}"
                                                                     placeholder="#{msg.billingListNdg}"
                                                                     styleClass="input-width-100"/>
                                                    </div>
                                                    <div class="p-col-6">
                                                        <p:inputText id="filterPractice" value="#{bean.filterPractice}"
                                                                     placeholder="#{msg.billingListPractice}"
                                                                     styleClass="input-width-100"/>
                                                    </div>

                                                    <div class="p-col-12 search-panel-btns" style="text-align: center;">
                                                        <p:commandButton
                                                                value="#{ff:upper(msg.requestPrintSelectTemplate)}"
                                                                style="background: #00CC52;" id="searchButton"
                                                                onclick="checkDates(); filterTableFromPanel();"
                                                                update="searchPanel"
                                                                oncomplete="PF('panelSetting').toggle()"/>
                                                        <p:commandButton id="manageReestablishBtn"
                                                                         value="#{ff:upper(msg.mailManageReestablish)}"
                                                                         actionListener="#{bean.clearFilterPanel}"
                                                                         update="settingPanel invoiceTable"
                                                                         oncomplete="PF('panelSetting').toggle()"/>
                                                    </div>
                                                </div>
                                            </p:panel>
                                        </div>
                                    </div>
                                    <div class="p-col-12" style="margin-top: -15px; margin-bottom: -15px;">
                                        <p:commandButton value="#{msg.billingListExcel}" style="float: right"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <p:panel id="table_div">
                        <ui:fragment id="searchPanel">
                            <div class="button_group">
                                <p:remoteCommand name="filterTableFromPanel" action="#{bean.filterTableFromPanel}"
                                                 update=":invoiceTable"/>
                                <p:remoteCommand name="updateCalendarTo" update=":form:filterDateTo"/>
                                <p:remoteCommand name="resetTableData"
                                                 action="#{bean.reset}" update=":invoiceTable"/>

                            </div>
                        </ui:fragment>

                        <p:dataTable id="invoiceTable" value="#{bean.lazyModel}" emptyMessage="#{msg.noRecordsFound}"
                                     var="invoice" rows="15" lazy="true"
                                     paginator="true" paginatorAlwaysVisible="true" rowIndexVar="rowId"
                                     paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     rowsPerPageTemplate="15, 30, 45, 60">
                            <p:column headerText="#{msg.billingListNumber}" sortBy="#{invoice.number}">
                                <h:outputText value="#{invoice.number}"/>
                            </p:column>
                            <p:column headerText="#{msg.billingListDate}" sortBy="#{invoice.dateString}">
                                <h:outputText value="#{invoice.dateString}"/>
                            </p:column>
                            <p:column headerText="#{msg.billingListClient}" sortBy="#{invoice.client}">
                                <h:outputText value="#{invoice.client}"/>
                            </p:column>
                            <p:column headerText="#{msg.billingListNotes}" sortBy="#{invoice.notes}">
                                <h:outputText value="#{invoice.notes}"/>
                            </p:column>
                            <p:column headerText="#{msg.billingListStatus}">
                                <p:commandButton
                                        value="#{invoice.status != null ? invoice.status.toString() : ff:upper(msg.billingListDraft)}"
                                        style="width: 150px;"
                                        styleClass="#{invoice.status == null ? 'orange-button' : (invoice.status.getId() == 1 ? 'orange-button' : (invoice.status.getId() == 3 ? 'green-button' : (invoice.status.getId() == 4 ? 'red-button' : 'button')))  }">
                                </p:commandButton>
                            </p:column>
                            <p:column headerText="#{msg.billingListAmount}" sortBy="#{invoice.totalAmount}">
                                <h:outputText value="#{invoice.totalAmount}"/>
                            </p:column>
                            <p:column headerText="#{msg.billingListOnBalance}" sortBy="#{invoice.onBalance}">
                                <h:outputText value="#{invoice.onBalance}"/>
                            </p:column>
                            <p:column rendered="#{invoice.email.id == null}">
                                <div class="icon-block">
                                    <i class="email-icon-new"></i>
                                    <i class="menu-dots-icon"></i>
                                </div>
                            </p:column>
                            <p:column rendered="#{invoice.email.id != null}">
                                <div class="icon-block">
                                    <i class="email-check-icon"></i>
                                    <i class="menu-dots-icon"></i>
                                </div>
                            </p:column>
                        </p:dataTable>
                    </p:panel>
                </div>
                <!-- FATTURE TAB -->

                <div id="content_tab3" class="hide" style="display: none;">

                </div>
                <div id="content_tab4" class="hide" style="display: none;">

                    <div class="p-grid">
                        <div class="p-col-12 p-md-12">
                            <div class="card"
                                 style="border: none !important; padding-top:0px; padding-bottom:0px; margin-top:10px;">
                                <div class="p-grid">
                                    <div class="p-col-3" style="padding-bottom: 0px !important;">
                                        <div class="p-formgroup-inline">
                                            <div class="p-field">

                                            </div>
                                        </div>
                                    </div>
                                    <div class="p-col-9" style="padding-bottom: 0px !important;">
                                        <div class="p-formgroup-inline alignEnd">
                                            <div class="p-field">
                                                <p:inputText value="#{bean.nameFilter}" id="nominativo"
                                                             placeholder="#{msg.databaseListName}"
                                                             style="width: 300px !important;height: 46px;"/>
                                            </div>
                                            <div class="p-field">
                                                <div class="p-field">
                                                    <p:selectOneMenu id="subjectClient"
                                                                     value="#{bean.selectedSubjectClientId}"
                                                                     label="#{msg.requestClient}"
                                                                     style="width: 300px !important;"
                                                                     styleClass="#{bean.selectedSubjectClientId ne null ? 'select-one-menu' : ''}">
                                                        <f:selectItem itemLabel="#{ff:upper(msg.requestListClient)}"
                                                                      itemValue="#{null}"
                                                                      noSelectionOption="true"/>
                                                        <f:selectItems value="#{bean.clients}"/>
                                                        <p:ajax event="itemSelect" update="@this"/>
                                                    </p:selectOneMenu>
<!--                                                    -->
<!--                                                    <p:inputText value="#{bean.searchFiscalCode}"-->
<!--                                                                 placeholder="#{ff:upper(msg.requestFiscalCodeCap)}"-->
<!--                                                                 id="searchFiscalCode"/>-->
                                                </div>
                                            </div>
                                            <div class="p-field">
                                                <p:commandButton id="subjectSearch" onclick="filterRequestTableFromPanel();"
                                                                 action="#{bean.prepareToModify}"
                                                                 styleClass="ui-button-warning-icon"
                                                                 update="subjectSearchPanel editAndPrintDialog printPanel"
                                                                 icon="ui-icon ui-icon-search pi pi-search"/>
                                            </div>

                                            <p:commandButton id="subjectSettingButton"
                                                             onclick="togglePanel();" type="button"
                                                             styleClass="ui-button-warning-icon"
                                                             icon="ui-icon ui-icon-search pi pi-sliders-h"/>

        <script type="text/javascript">
            // <![CDATA[
            $("body").click(function(e){
                var target = $(e.target);
                if (!target.parents('#subjectSettingButton').length && !target.parents('#subjectSettingPanel').length && !target.parents('#client_panel').length
                    && !target.parents('#requestTypeSelectCheckboxPanel').length && !target.parents('#manager_panel').length && !target.parents('#office_panel').length
                    && !target.parents('#stateSelectCheckboxPanel').length && !target.parents('#serviceSelectCheckboxPanel').length && !target.parents('#fiduciario_panel').length) {
                  PF('subjectPanelSetting').getJQ().hide();
                }
                if(target.closest('#statuses').length || target.closest('#stateSelectCheckboxPanelDataTable').length) {
                    $("#statuses").addClass("border_class");
                } else {
                    $("#statuses").removeClass("border_class");
                }

                if(target.closest('#requestTypes').length || target.closest('#requestTypeSelectCheckboxPanel').length) {
                    $("#requestTypes").addClass("border_class");
                } else {
                    $("#requestTypes").removeClass("border_class");
                }

                if(target.closest('#services').length || target.closest('#serviceSelectCheckboxPanel').length) {
                    $("#services").addClass("border_class");
                } else {
                    $("#services").removeClass("border_class");
                }
            });
            function applyClickListener(id, wv) {
                $("#"+id).click(function() {
                    PF(wv).show();
                });
            }
            function applyBorder(id) {
                $("#"+id).addClass("border_class");
            }
            function togglePanel() {
                PF('subjectPanelSetting').getJQ().toggle();
            }
            jQuery(document).ready(function() {
                PF('subjectPanelSetting').getJQ().hide();
            });
            // ]]>
        </script>
                                            <p:panel id="subjectSettingPanel" widgetVar="subjectPanelSetting"
                                                     closable="true" toggleable="true" collapsed="true">
                                                <div class="p-grid">
                                                    <div class="p-col-12" style="text-align: center;">
                                                        <h2>Filtra per</h2>
                                                    </div>
                                                    <div class="p-col-6">
                                                        <div style="">
                                                            <div style="">
                                                                <h:outputText style="color: #003871;"
                                                                              value="#{ff:upper(msg.status)}:"/>
                                                            </div>

                                                        </div>
                                                    </div>
                                                    <div class="p-col-6">
                                                        <h:outputText style="color: #003871;"
                                                                      value=""/>
                                                    </div>
                                                    <div class="p-col-6">
                                                        <p:selectCheckboxMenu id="statuses"
                                                                              style="width: 100%;min-height: 38px;"
                                                                              multiple="true" label=""
                                                                              value="#{bean.selectedStates}"
                                                                              onclick="applyBorder('statuses');"
                                                                              styleClass="#{bean.getStateSelected() gt 0 ? ' select-checkbox' : ''}"
                                                                              disabled="true">
                                                            <f:selectItems value="#{bean.stateWrappers}" var="state"
                                                                           itemValue="#{state}"
                                                                           itemLabel="#{state.value}"/>
                                                        </p:selectCheckboxMenu>
                                                    </div>
                                                    <div class="p-col-6">
                                                    </div>

                                                    <div class="p-col-6">
                                                        <div style="">
                                                            <h:outputText style="color: #003871;"
                                                                          value="#{ff:upper(msg.requestType)}:"/>
                                                        </div>
                                                    </div>
                                                    <div class="p-col-6">
                                                        <div style="">
                                                            <h:outputText style="color: #003871;"
                                                                          value="#{ff:upper(msg.requestService)}:"/>
                                                        </div>
                                                    </div>
                                                    <div class="p-col-6">
                                                        <p:selectCheckboxMenu id="requestTypes"
                                                                              style="width: 100%;min-height: 38px;"
                                                                              multiple="true"
                                                                              label="#{msg.requestType}"
                                                                              value="#{bean.selectedRequestTypes}"
                                                                              onclick="PF('requestTypeSelectCheckboxWV').show();applyBorder('requestTypes');"
                                                                              styleClass="#{bean.getRequestTypeSelected() gt 0 ? ' select-checkbox' : ''}">
                                                            <f:selectItems value="#{bean.requestTypeWrappers}"
                                                                           var="requestType" itemValue="#{requestType}"
                                                                           itemLabel="#{requestType.value}"/>
                                                        </p:selectCheckboxMenu>
                                                    </div>
                                                    <div class="p-col-6">
                                                        <p:selectCheckboxMenu id="services"
                                                                              style="width: 100%;min-height: 38px;"
                                                                              multiple="true" label=""
                                                                              value="#{bean.selectedServices}"
                                                                              onclick="applyBorder('services');"
                                                                              styleClass="#{bean.getServiceSelected() gt 0 ? ' select-checkbox' : ''}">
                                                            <f:selectItems value="#{bean.serviceWrappers}" var="service"
                                                                           itemValue="#{service}"
                                                                           itemLabel="#{service.value}"/>
                                                        </p:selectCheckboxMenu>
                                                    </div>
                                                    <div class="p-col-6">
                                                        <p:selectOneMenu id="subjectManager"
                                                                         value="#{bean.subjectManagerClientFilterId}"
                                                                         style="width: calc( 100% - 5px);"
                                                                         styleClass="#{bean.subjectManagerClientFilterId ne null ? 'select-one-menu' : ''}">
                                                            <f:selectItem itemLabel="#{ff:upper(msg.clientManager)}"
                                                                          itemValue="#{null}"
                                                                          noSelectionOption="true"/>
                                                            <f:selectItems value="#{bean.managerClients}"/>
                                                            <p:ajax event="itemSelect" update="@this"/>
                                                        </p:selectOneMenu>
                                                    </div>
                                                    <div class="p-col-6">
                                                        <p:selectOneMenu id="fiduciario"
                                                                         value="#{bean.fiduciaryClientFilterId}"
                                                                         style="width: calc( 100% - 5px);"
                                                                         styleClass="#{bean.fiduciaryClientFilterId ne null ? 'select-one-menu' : ''}">
                                                            <f:selectItem itemLabel="#{ff:upper(msg.mailTrust)}"
                                                                          itemValue="#{null}"
                                                                          noSelectionOption="true"/>
                                                            <f:selectItems value="#{bean.fiduciaryClients}"/>
                                                            <p:ajax event="itemSelect" update="@this"/>
                                                        </p:selectOneMenu>
                                                    </div>
                                                    <div class="p-col-6">
                                                        <p:selectOneMenu id="subjectOffice"
                                                                         value="#{bean.aggregationFilterId}"
                                                                         style="width: calc( 100% - 5px);"
                                                                         styleClass="#{bean.aggregationFilterId ne null ? 'select-one-menu' : ''}">
                                                            <f:selectItem
                                                                    itemLabel="#{msg.subjectViewFormalityConservatoryCap}"
                                                                    itemValue="#{null}"
                                                                    noSelectionOption="true"/>
                                                            <f:selectItems value="#{bean.landAggregations}"/>
                                                            <p:ajax event="itemSelect" update="@this"/>
                                                        </p:selectOneMenu>
                                                    </div>
                                                    <div class="p-col-6">
                                                        <p:calendar id="filterExpiration" readonlyInput="false"
                                                                    showOn="button"
                                                                    onkeypress="if(!searchOnEnter(event, 'searchButton')) return false;"
                                                                    pattern="dd/MM/yyyy" mask="true"
                                                                    locale="it" navigator="true" popupIconOnly="true"
                                                                    placeholder="#{msg.expirationDateCap}"
                                                                    value="#{bean.dateExpiration}"
                                                                    styleClass="#{bean.dateExpiration ne null ? 'calender-filled' : ''}">
                                                            <p:ajax event="dateSelect" update="@this"/>
                                                        </p:calendar>
                                                    </div>
                                                    <div class="p-col-12">
                                                        <div style="">
                                                            <h:outputText style="color: #003871;"
                                                                          value="#{ff:upper(msg.requestListDateOfInput)}:"/>
                                                        </div>
                                                    </div>
                                                    <div class="p-col-6">
                                                        <p:calendar id="filterSubjectDateFrom" readonlyInput="false"
                                                                    showOn="button"
                                                                    onkeypress="if(!searchOnEnter(event, 'searchButton')) return true;"
                                                                    pattern="dd/MM/yyyy" mask="true" locale="it"
                                                                    navigator="true"
                                                                    popupIconOnly="true"
                                                                    onblur="setTimeout(function(){checkDates();}, 500);check_date(this);"
                                                                    value="#{bean.subjectDateFrom}"
                                                                    placeholder="#{msg.mailManagerDateFromReqlist}"
                                                                    styleClass="#{bean.subjectDateFrom ne null ? 'calender-filled' : ''}">
                                                            <p:ajax event="dateSelect" update="@this"/>
                                                        </p:calendar>
                                                        <div id="subjecthyphen"></div>
                                                    </div>
                                                    <div class="p-col-6">
                                                        <p:calendar id="filterSubjectDateTo" readonlyInput="false"
                                                                    showOn="button"
                                                                    onkeypress="if(!searchOnEnter(event, 'searchButton')) return false;"
                                                                    pattern="dd/MM/yyyy" mask="true"
                                                                    locale="it" navigator="true" popupIconOnly="true"
                                                                    placeholder="#{msg.mailManagerDateToReqlist}"
                                                                    onblur="check_date(this)"
                                                                    value="#{bean.subjectDateTo}"
                                                                    styleClass="#{bean.subjectDateTo ne null ? 'calender-filled' : ''}">
                                                            <p:ajax event="dateSelect" update="@this"/>
                                                        </p:calendar>
                                                    </div>
                                                    <div class="p-col-12">
                                                        <div style="">
                                                            <h:outputText style="color: #003871;"
                                                                          value="#{ff:upper(msg.requestListDateOfEvasion)}:"/>
                                                        </div>
                                                    </div>
                                                    <div class="p-col-6">
                                                        <p:calendar id="filterDateFromEvasione" readonlyInput="false"
                                                                    showOn="button"
                                                                    onkeypress="if(!searchOnEnter(event, 'searchButton')) return true;"
                                                                    pattern="dd/MM/yyyy" mask="true" locale="it"
                                                                    navigator="true"
                                                                    popupIconOnly="true"
                                                                    onblur="setTimeout(function(){checkDates();}, 500);check_date(this);"
                                                                    value="#{bean.dateFromEvasion}"
                                                                    placeholder="#{msg.mailManagerDateFromReqlist}"
                                                                    styleClass="#{bean.dateFromEvasion ne null ? 'calender-filled' : ''}">
                                                            <p:ajax event="dateSelect" update="@this"/>
                                                        </p:calendar>
                                                    </div>
                                                    <div class="p-col-6">
                                                        <p:calendar id="filterDateToEvasione" readonlyInput="false"
                                                                    showOn="button"
                                                                    onkeypress="if(!searchOnEnter(event, 'searchButton')) return false;"
                                                                    pattern="dd/MM/yyyy" mask="true"
                                                                    locale="it" navigator="true" popupIconOnly="true"
                                                                    placeholder="#{msg.mailManagerDateToReqlist}"
                                                                    onblur="check_date(this)"
                                                                    value="#{bean.dateToEvasion}"
                                                                    styleClass="#{bean.dateToEvasion ne null ? 'calender-filled' : ''}">
                                                            <p:ajax event="dateSelect" update="@this"/>
                                                        </p:calendar>
                                                    </div>

                                                    <div class="p-col-12 search-panel-btns" style="text-align: center;">
                                                        <p:commandButton
                                                                value="#{ff:upper(msg.requestPrintSelectTemplate)}"
                                                                style="background: #00CC52;"
                                                                id="searchButtonFilter"
                                                                update="subjectSearchPanel printPanel editAndPrintDialog"
                                                                action="#{bean.prepareToModify}"
                                                                onclick="checkDates(); filterRequestTableFromPanel();PF('subjectPanelSetting').getJQ().hide()"/>
                                                        <p:commandButton style="width: auto;"
                                                                         value="#{ff:upper(msg.mailManageReestablish)}"
                                                                         actionListener="#{bean.clearFiltraPanel}"
                                                                         update="subjectSettingPanel subjectSearchPanel"
                                                                         oncomplete="resetData();checkDates();filterTableFromPanel();PF('subjectPanelSetting').getJQ().hide();"/>
                                                    </div>

                                                </div>
                                            </p:panel>
                                        </div>
                                    </div>
                                    <div class="p-col-12" style="margin-top: -15px; margin-bottom: -15px;">
                                        <p:outputPanel id="printPanel">
                                            <p:commandButton value="#{msg.billingListExcel}" rendered="#{bean.showPrintButton}" styleClass="p-mr-2 p-mb-2"
                                                             oncomplete="PF('createTotalCosthDocumentDialogWV').show()"/>
                                            <p:commandButton value="#{msg.requestEditAndPrint}" rendered="#{bean.showPrintButton}" styleClass="p-mr-2 p-mb-2"
                                                             oncomplete="PF('editAndPrintDialogWV').show();"  process="printPanel"/>
                                            <p:commandButton value="#{msg.mailManagerDelivery}" styleClass="p-mr-2 p-mb-2" action="#{bean.editExcelData}"
                                                rendered="#{bean.selectedSubjectClientId ne null}"/>
                                            <p:commandButton value="#{msg.biilingIssueInvoice}" style="float: right;background:#00CC52 !important;"
                                                             rendered="#{bean.selectedSubjectClientId ne null}" update=":form:invoiceDialogBilling"
                                                             action="#{bean.createInvoice}"/>
                                        </p:outputPanel>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                        <ui:fragment id="subjectSearchPanel">
                            <div class="button_group">
                                <p:remoteCommand name="filterRequestTableFromPanel"
                                                 action="#{bean.filterRequestTableFromPanel}"
                                                 update=":subjectTable"/>
                                <p:remoteCommand name="updateCalendarTo" update=":form:filterSubjectDateTo"/>
                                <p:remoteCommand name="handleRowsChange"
                                                 action="#{bean.handleRowsChange()}" update="subjectTable" oncomplete="setPageNumber()"/>
                                <p:remoteCommand name="onPageChange"
                                                 action="#{bean.onPageChange()}" update="subjectTable" oncomplete="setPageNumber()"/>
                            </div>
                        </ui:fragment>

                    <p:overlayPanel id="requestTypeSelectCheckboxPanel" my="left top" at="left bottom"
                                    widgetVar="requestTypeSelectCheckboxWV" for="requestTypes" dynamic="true" style="width:300px;">
                        <p:dataTable id="requestTypeSelectCheckboxPanelDataTable" var="requestType"
                                     value="#{bean.requestTypeWrappers}" selectionMode="single"
                                     selection="#{bean.selectedRequestTypeForFilter}" rowKey="#{requestType.value}">
                            <p:ajax event="rowSelect"
                                    listener="#{bean.selectRequestTypeForFilter}"
                                    update="requestTypeSelectCheckboxPanelDataTable"/>
                            <p:column style="width:18px">
                                <f:facet name="header">
                                    <p:selectBooleanCheckbox value="#{bean.selectedAllRequestTypesOnPanel}">
                                        <p:ajax update="requestTypeSelectCheckboxPanelDataTable" event="change"/>
                                        <p:ajax event="change" update="requestTypes" oncomplete="applyClickListener('requestTypes', 'requestTypeSelectCheckboxWV');"/>
                                    </p:selectBooleanCheckbox>
                                </f:facet>
                                <p:selectBooleanCheckbox value="#{requestType.selected}">
                                    <p:ajax update="requestTypeSelectCheckboxPanelDataTable" event="change"/>
                                    <p:ajax event="change" update="requestTypes" oncomplete="applyClickListener('requestTypes', 'requestTypeSelectCheckboxWV');"/>
                                </p:selectBooleanCheckbox>
                            </p:column>
                            <p:column>
                                <h:outputText value="#{requestType.value}"/>
                            </p:column>
                        </p:dataTable>
                    </p:overlayPanel>

                    <p:overlayPanel id="userSelectCheckboxPanel" my="left top" at="left bottom"
                                    widgetVar="userSelectCheckboxWV" for="userSelectCheckboxShow"
                                    onHide="filterRequestTableFromPanel();" dynamic="true" style="width:300px">
                        <p:dataTable id="userSelectCheckboxPanelDataTable" var="state"
                                     value="#{bean.userWrappers}" selectionMode="single"
                                     selection="#{bean.selectedUserForFilter}" rowKey="#{state.value}">

                            <p:ajax event="rowSelect"
                                    listener="#{requestListBean.selectUserForFilter}"
                                    update="userSelectCheckboxPanelDataTable"/>

                            <p:column style="width:18px">
                                <f:facet name="header">
                                    <p:selectBooleanCheckbox value="#{bean.selectedAllUsersOnPanel}">
                                        <p:ajax update="userSelectCheckboxPanelDataTable" event="change"/>
                                    </p:selectBooleanCheckbox>
                                </f:facet>
                                <p:selectBooleanCheckbox value="#{state.selected}">
                                    <p:ajax update="userSelectCheckboxPanelDataTable" event="change"/>
                                </p:selectBooleanCheckbox>
                            </p:column>

                            <p:column headerText="#{msg.mailManagerStates}">
                                <h:outputText value="#{state.value}"/>
                            </p:column>
                        </p:dataTable>
                    </p:overlayPanel>

                        <p:panel id="subjectTable" styleClass="ui-datatable ui-widget" widgetVar="subjectTableWV">

                            <h:inputHidden id="numTotalPages" value="#{bean.paginator.totalPages}"/>
                            <h:inputHidden id="rowsPerPageSelected" value="#{bean.paginator.rowsPerPage}"/>
                            <h:inputHidden id="pageNumber" value="#{bean.paginator.currentPageNumber}"/>

                            <div class="ui-datatable ui-widget request-table ">
                                <div id="table_paginator_top"
                                     class=" ui-paginator ui-paginator-top ui-widget-header ui-corner-top">
                                    <h:outputText style="float: left;" value="Elementi visibili nella pagina"/>
                                    <label for="table_rppDD"
                                           class="ui-paginator-rpp-label ui-helper-hidden">Rows Per Page</label>

                                    <h:selectOneMenu value="#{bean.paginator.rowsPerPage}"
                                                     onchange="loadPerPage('table_rppDD')"
                                                     name="table_rppDD" id="table_rppDD"
                                                     class="ui-paginator-rpp-options ui-widget ui-state-default ui-corner-left">
                                        <f:selectItem itemValue="10" itemLabel="10"/>
                                        <f:selectItem itemValue="20" itemLabel="20"/>
                                        <f:selectItem itemValue="50" itemLabel="50"/>
                                    </h:selectOneMenu>

                                    <h:outputText value="#{bean.paginator.pageNavigationStart}" escape="false"/>
                                    <h:outputText styleClass="ui-paginator-pages"
                                                  value="#{bean.paginator.paginatorString}" escape="false"/>
                                    <h:outputText value="#{bean.paginator.pageNavigationEnd}" escape="false"/>
                                    <h:outputText id="totalPages" value="(Pagina 1 di #{bean.paginator.totalPages})"
                                                  styleClass="ui-paginator-current"/>
                                </div>
                                <div class="ui-datatable-tablewrapper">

									<table role="grid">
									<thead id="table_head">
									<tr role="row">
										<th id="table:j_idt123"
											class="ui-state-default ui-sortable-column" role="columnheader"
											aria-label="DATA/ORA: activate to sort column ascending" scope="col"
											style="background-color: #D9E0E7 !important;width: 7vw;min-width: 163px;text-align: center;" tabindex="0" aria-sort="other" >
											<span class="ui-column-title">#{ff:upper(msg.requestListDate)}</span><span
												class="ui-sortable-column-icon ui-icon ui-icon-carat-2-n-s"></span></th>
										<th id="table:j_idt133" class="ui-state-default"
											role="columnheader" aria-label="CLIENTE"
											scope="col" style="background-color: #D9E0E7 !important;width: 9vw;min-width: 159px;position: relative"><span
												class="ui-column-title">#{ff:upper(msg.requestListClient)}</span></th>
										<th id="table:j_idt145" class="ui-state-default min_padding_margin" role="columnheader"
											aria-label="RICHIESTA" scope="col" style="background-color: #D9E0E7 !important;width: 13.1vw;min-width: 180px;"><span
												class="ui-column-title">#{ff:upper(msg.requestListServiceCap)}</span></th>
										<th id="table:j_idt157" class="ui-state-default ui-sortable-column" role="columnheader"
											aria-label="NOMINATIVO      C.F. O P.IVA: activate to sort column ascending" scope="col"
											style="background-color: #D9E0E7 !important;width: 13.1vw;min-width: 180px;" tabindex="0"><span
												class="ui-column-title">#{ff:upper(msg.requestNameFiscalCodeVATNumber)}</span><span
												class="ui-sortable-column-icon ui-icon ui-icon-carat-2-n-s"></span></th>
										<th id="table:j_idt162" class="ui-state-default" role="columnheader" aria-label="UFFICIO"
											scope="col" style="background-color: #D9E0E7 !important;width: 9vw;min-width: 159px;text-align: center;"><span
												class="ui-column-title">#{ff:upper(msg.requestListCorservatoryName)}</span></th>

										<c:if test="${!bean.getCurrentUser().isExternal()}">
											<th id="table:j_idt164" class="ui-state-default min_padding_margin" role="columnheader"
												scope="col" style="background-color: #D9E0E7 !important;width: 8.3vw;min-width: 177px;">
												<h:outputText value="#{ff:upper(msg.requestListCurrentOperator)}"
															  rendered="#{not bean.canSeeAllUsers}" style="font-size: medium;font-weight: normal;"/>
												<p:commandButton id="userSelectCheckboxShow"
																 rendered="#{bean.canSeeAllUsers}"
																 onclick="PF('userSelectCheckboxWV').show(); event.stopImmediatePropagation();"
																 value="#{ff:upper(msg.requestListCurrentOperator)}" type="button" style="font-size: 14px;font-weight: normal;"/>
											</th>
										</c:if>
										<th id="table:j_idt167" class="ui-state-default ui-sortable-column" role="columnheader"
											aria-label="SCADENZA: activate to sort column ascending" scope="col"
											style="background-color: #D9E0E7 !important;width: 6vw;min-width: 125px;text-align: center;" tabindex="0"><span
												class="ui-column-title">SCADENZA</span><span
												class="ui-sortable-column-icon ui-icon ui-icon-carat-2-n-s"></span></th>
										<th id="table:j_idt169" class="ui-state-default" role="columnheader" aria-label="INPUT"
											scope="col" style="background-color: #D9E0E7 !important;width: 4vw;min-width: 81px;"><span
												class="ui-column-title">INPUT</span></th>
										<th id="table:j_idt180" class="ui-state-default  action_midle_column al-cen-fx"
											role="columnheader" aria-label="OUTPUT" scope="col" style="background-color: #D9E0E7 !important;width: 4vw;min-width: 81px;">
											<span class="ui-column-title">OUTPUT</span></th>
										<th id="table:j_idt185" class="ui-state-default action_midle_column" role="columnheader"
											aria-label="GESTISCI" scope="col" style="background-color: #D9E0E7 !important;sswidth: 6vw;min-width: 99px;"><span
												class="ui-column-title">GESTISCI</span></th>
									</tr>
									</thead>
                                        <tbody id="table_data" class="ui-datatable-data ui-widget-content">
                                        <c:forEach var="item" items="#{bean.lazySubjectModel.wrappedData}" varStatus="loop">
                                            <c:if test="${loop.index % 2 == 0}">
                                                <c:set value="ui-datatable-even" var="evenclass"></c:set>
                                            </c:if>

                                            <c:if test="${loop.index % 2 != 0}">
                                                <c:set value="" var="evenclass"></c:set>
                                            </c:if>

                                            <tr class="ui-widget-content ui-datatable-selectable ${cssClass} ${evenclass}">
                                            <td style="width: 20px !important;"
                                                class="ui-selection-column min_padding_margin icon_column">
                                                <p:outputPanel style="margin-left: 10px;text-align: left;max-height: 80px;">
                                                    <h:outputText value="#{item.createDate}" converter="dateTimeConverter" style="color:#003871;font-weight: bold !important;"/>
                                                    <br/>
                                                    <h:outputText value="#{item.createDate}" converter="timeConverter" style="color:#003871;"/>
                                                    <br/>
                                                    <br/>
                                                    <h:outputText value="#{not empty item.stateDescription ? ff:upper(item.stateDescription) : ''}"
                                                                  styleClass="#{item.stateDescription eq 'Inserita'
                        ? 'status-icon status-green' : (item.stateDescription eq 'In lavorazione' ? 'status-icon status-yellow' :(item.stateDescription eq 'Da inviare' ? 'status-icon status-navy' : (item.stateDescription eq 'Sospesa' ? 'status-icon status-magenta' : (item.stateDescription eq 'Evasa' ? 'status-icon status-red': (item.stateDescription eq 'Inviata allo SDI' ? 'status-icon status-cyan': (item.stateDescription eq 'Fatturata' ? 'status-icon state-blue': ''))))))}"/>
                                                    <br/>
                                                    <h:outputText rendered="#{item.urgent}" styleClass="vertical-txt" value="#{ff:upper(msg.requestListUrgent)}" />
                                                    <br/>
                                                </p:outputPanel>
                                            </td>
                                                <td  style="width: 9vw;min-width: 159px; position:relative;">
                                                    <p:outputPanel style="text-align:center;">
                                                        <h:outputText value="#{item.clientName}"/>
                                                    </p:outputPanel>
                                                    <br/>
                                                    <div style="height :20px; position:absolute; left: 2px; bottom: 2px;">
                                                        <p:graphicImage id="info-#{loop.index}" url="/resources/images/tooltip.png" style="width:20px; height:20px;"
                                                                        rendered="#{not empty item.mailId and (not empty item.fiduciaryId or not empty item.managerId)}" />
                                                        <p:tooltip for="info-#{loop.index}" styleClass="custom-design-tooltip">
                                                            <h:outputText value="#{ff:upper(msg.requestManagers)}" style="font-weight:bold;color:#003871;"/>
                                                            <br />
                                                            <h:outputText value="#{item.haveManagers()}" escape="false" rendered="#{not empty item.haveManagers()}"/>
                                                            <br />
                                                            <h:outputText value="#{ff:upper(msg.requestTrustees)}" style="font-weight:bold;color:#003871;" />
                                                            <br />
                                                            <h:outputText value="#{item.getClientNameProfessional(item.fiduciaryId)}" escape="false"
                                                                          rendered="#{not empty item.fiduciaryId}" style="color:#003871;"/>
                                                        </p:tooltip>
                                                    </div>
                                                </td>

                                                <td style="width: 13.1vw;min-width: 180px; position:relative;" class="min_padding_margin">
                                                    <p:outputPanel style="margin-left: 20px;text-align: left;">
                                                        <p:outputPanel id="servicesColumn"
                                                                       rendered="#{item.serviceName eq null}"
                                                                       style="background-color: transparent;width: inherit;"/>
                                                        <p:outputPanel>
                                                            <h:outputText styleClass="#{bean.getItemIconStyleClass(item.requestTypeId)}" style="display: inline-flex;margin-right: 5px;" />
                                                            <h:outputText id="requestTypeName" value="#{item.requestTypeName}" style="vertical-align: top;font-weight: bold !important;" rendered="#{item.requestTypeName ne null}"/>
                                                        </p:outputPanel>
                                                        <h:outputText id="service" value="#{item.serviceName}" rendered="#{item.serviceName ne null}"/>
                                                        <br/>
                                                        <div style="height :20px; position:absolute; left: 2px; bottom: 2px;">
                                                            <p:graphicImage id="multipleservice-#{loop.index}" url="/resources/images/tooltip.png"
                                                                            style="width:20px; height:20px;"  rendered="#{not empty item.multipleServices}" />
                                                            <p:tooltip for="multipleservice-#{loop.index}" styleClass="custom-design-tooltip" rendered="#{not empty item.multipleServices}">
                                                                <ui:repeat var="ele" value="#{item.multipleServices}" varStatus="service">
                                                                    <h:outputText value="#{ele}" escape="false" style="color:#003871;margin-left: 24px;"/>
                                                                    <br />
                                                                </ui:repeat>
                                                            </p:tooltip>
                                                        </div>
                                                    </p:outputPanel>
                                                </td>

                                                <td style="width: 13.1vw;min-width: 180px;">
                                                    <p:commandLink value="#{ff:upper(item.nameStr)}" rendered="#{item.subjectId ne null}" action="#{bean.openRequestSubject}" style="cursor: pointer;">
                                                        <f:setPropertyActionListener value="#{item.subjectId}" target="#{bean.entityEditId}"/>
                                                    </p:commandLink>
                                                    <h:outputText value="#{ff:upper(item.nameStr)}" rendered="#{item.subjectId eq null}"/>
                                                    <br/>
                                                    <h:outputText value="#{item.code}" style="color:#003871"/>
                                                </td>

                                                <td style="width: 9vw;min-width: 159px;text-align: center;">
                                                    <h:outputText value="#{item.aggregationLandCharRegNameOrCity}"/>
                                                </td>

                                                <c:if test="${!bean.getCurrentUser().isExternal()}">
                                                    <td>
                                                        <h:outputText value="#{item.userName}"/>
                                                    </td>
                                                </c:if>

                                                <c:if test="${!bean.getCurrentUser().isExternal()}">
                                                    <td>
                                                        <h:outputText value="#{item.expirationDate}" converter="dateTimeConverter"/>
                                                    </td>
                                                </c:if>

                                                <td style="width: 4vw;min-width: 81px;">
                                                    <p:outputPanel style="#{not item.external and empty item.mailId and not item.haveAllegatiDocuments ? 'text-align: center;' : 'display: flex;'}">
                                                        <p:commandButton id="mailBtn" styleClass="richiesta-da-mail-icon" action="#{bean.openRequestMail}"
                                                                         style="color: transparent;background-color: transparent;border-color: transparent;margin: 0 auto;cursor: pointer;"
                                                                         rendered="#{not empty item.mailId}">
                                                            <f:setPropertyActionListener value="#{item.mailId}" target="#{bean.entityEditId}"/>
                                                        </p:commandButton>
                                                        <p:tooltip for="mailBtn" value="#{item.mailSubject}"/>

                                                        <h:outputText id="externalUserIcon" rendered="#{item.external and not item.haveAllegatiDocuments}"
                                                                      style="margin: 0 auto;" styleClass="richiesta-da-clienti-icon" />
                                                        <p:tooltip for="externalUserIcon" value="#{item.createUserFullName}" escape="false"/>

                                                        <p:outputPanel rendered="#{item.external and item.haveAllegatiDocuments}" style="display: flex;margin-left: calc( 50% - 15px );">
                                                            <p:commandButton id="externalUserIconA"  styleClass="richiesta-da-clienti-icon" action="#{bean.loadAllegatiDocuments}" update="requestDocs"
                                                                             style="color: transparent;background-color: transparent;border-color: transparent;margin: 0 auto;cursor: pointer;"
                                                                             oncomplete="PF('documentDialog').show();">
                                                                <f:setPropertyActionListener value="#{item.id}" target="#{bean.entityEditId}"/>
                                                            </p:commandButton>
                                                            <p:tooltip for="externalUserIconA" value="#{item.createUserFullName}" escape="false"/>
                                                            <h:outputText value="A"  style="width: 19px;height: 20px;background-color: #003871;border-radius: 50%;color: white;display: block;margin-top: -10px;margin-left: -6px;text-align: center;" />
                                                        </p:outputPanel>


                                                        <p:graphicImage id="internalUserIcon" url="/resources/images/richiesta-da-operatore-getesi.png"
                                                                        style="height :28px;"  rendered="#{not item.external and empty item.mailId and not item.haveAllegatiDocuments}" />
                                                        <p:tooltip for="internalUserIcon" value="#{item.createUserFullName}" escape="false"/>

                                                        <p:outputPanel style="display: flex;#{empty item.mailId ? 'margin-left: 38%;' : ''}" rendered="#{not item.external and empty item.mailId and item.haveAllegatiDocuments}">
                                                            <p:commandButton id="internalUserIconA" value="G" action="#{bean.loadAllegatiDocuments}" update="requestDocs" styleClass="g-btn" style="background-color: transparent !important;display: block;width: 24px;height: 24px;border: 2px solid;border-radius: 50%;color: #003871;margin: 0 auto;cursor: pointer;"
                                                                             oncomplete="PF('documentDialog').show();">
                                                                <f:setPropertyActionListener value="#{item.id}" target="#{bean.entityEditId}"/>
                                                            </p:commandButton>
                                                            <p:tooltip for="internalUserIconA" value="#{item.createUserFullName}" escape="false"/>
                                                            <h:outputText value="A"  style="width: 19px;height: 20px;background-color: #003871;border-radius: 50%;color: white;display: block;margin-top: -10px;margin-left: -6px;text-align: center;" />
                                                        </p:outputPanel>


                                                    </p:outputPanel>
                                                </td>
                                                <td class="action_midle_column al-cen-fx" style="width: 4vw;min-width: 81px;">
                                                    <p:outputPanel style="display: flex;" rendered="#{item.haveDocuments}">
                                                        <p:outputPanel style="display: flex;">
                                                            <p:commandButton styleClass="attachment-icon" action="#{bean.loadRequestDocuments}" update="requestDocs"
                                                                             style="color: transparent;background-color: transparent;border-color: transparent;margin: 0 auto;cursor: pointer;"
                                                                             oncomplete="PF('documentDialog').show();">
                                                                <f:setPropertyActionListener value="#{item.id}" target="#{bean.entityEditId}"/>
                                                            </p:commandButton>
                                                            <h:outputText value="#{item.documentsCount}" style="width: 19px;height: 20px;background-color: #003871;border-radius: 50%;color: white;display: block;margin-top: -10px;margin-left: -6px;text-align: center;" />
                                                        </p:outputPanel>
                                                    </p:outputPanel>
                                                </td>

                                                <ui:remove>
                                                    <c:if test="${!bean.getCurrentUser().isExternal()}">
                                                        <td class=" min_padding_margin">
                                                            <p:commandButton icon="fa fa-indent" action="#{bean.openRequestEditor}">
                                                                <f:setPropertyActionListener value="#{item.id}" target="#{bean.entityEditId}"/>
                                                            </p:commandButton>
                                                        </td>
                                                    </c:if>
                                                </ui:remove>
                                                <c:if test="${!bean.getCurrentUser().isExternal()}">
                                                    <td class=" min_padding_margin" style="width: 6vw;min-width: 99px;">
                                                        <p:commandButton id="table_#{item.id}_gestisci-btn" value="#{ff:upper(msg.requestListManage)}" class="action-btn" style="display: none;"
                                                                         disabled="#{!bean.canEdit}" action="#{bean.manageRequest}">
                                                            <f:setPropertyActionListener value="#{item.id}"
                                                                                         target="#{bean.selectedRequestId}"/>
                                                        </p:commandButton>
                                                        <p:commandButton id="table_#{item.id}_banca-btn" value="#{ff:upper(msg.headerDatabase)}" rendered="#{item.subjectId ne null}" style="display: none;"
                                                                         action="#{bean.openRequestSubject}" class="action-btn">
                                                            <f:setPropertyActionListener value="#{item.subjectId}" target="#{bean.selectedRequestId}"/>
                                                        </p:commandButton>
                                                        <p:commandButton id="table_#{item.id}_pdf-btn" value="#{msg.pdf}" rendered="#{!bean.getCurrentUser().isExternal()}" class="action-btn" style="display: none;"
                                                                         action="#{bean.downloadPdfFile}" ajax="false" update="@form">
                                                            <f:setPropertyActionListener value="#{item.id}"
                                                                                         target="#{bean.downloadRequestId}"/>
                                                        </p:commandButton>
                                                        <p:commandButton id="table_#{item.id}_elimina-btn" value="#{ff:upper(msg.roleCanDelete)}" class="action-btn" style="display: none;"
                                                                         oncomplete="PF('dlg2').show()" disabled="#{!bean.canDelete}">
                                                            <f:setPropertyActionListener value="#{item.id}"
                                                                                         target="#{bean.selectedRequestId}"/>
                                                        </p:commandButton>


                                                        <p:commandLink id="table_#{item.id}_actionPnl" global="false" style="padding: 40%;outline: none;" immediate="true"
                                                                       readonly="true">
                                                            <i class="fa fa-angle-down" style="font-size: x-large;"
                                                               onmouseover="document.getElementById('table_#{item.id}_actionPnl').focus();" />
                                                        </p:commandLink>
                                                        <p:tooltip for="table_#{item.id}_actionPnl" hideEvent="blur" showEvent="focus" styleClass="actionPnl-tooltip">
                                                            <p:outputPanel id="actionGrid" styleClass="actionPnl-panel">

                                                                <p:commandButton value="#{ff:upper(msg.requestListManage)}" class="action-btn" onclick="document.getElementById('table_#{item.id}_gestisci-btn').click()"
                                                                                 disabled="#{!bean.canEdit}" style="width:120px;margin-left: 5px; margin-right: 5px; margin-top:5px; margin-bottom:8px;">
                                                                </p:commandButton>
                                                                <p:commandButton value="#{ff:upper(msg.headerDatabase)}" onclick="document.getElementById('table_#{item.id}_banca-btn').click()"
                                                                                 rendered="#{item.subjectId ne null}" class="action-btn" style="width:120px; margin-left: 5px; margin-right: 5px; margin-bottom:8px;">
                                                                </p:commandButton>
                                                                <p:commandButton value="#{msg.pdf}" rendered="#{!bean.getCurrentUser().isExternal()}" class="action-btn" onclick="document.getElementById('table_#{item.id}_pdf-btn').click()"
                                                                                 update="@form" style="width:120px; margin-left: 5px; margin-right: 5px; margin-bottom:8px;">
                                                                </p:commandButton>
                                                                <p:commandButton value="#{ff:upper(msg.roleCanDelete)}" class="action-btn" onclick="document.getElementById('table_#{item.id}_elimina-btn').click()"
                                                                                 disabled="#{!bean.canDelete}" style="width:120px; margin-left: 5px; margin-right: 5px; margin-bottom:5px;">
                                                                </p:commandButton>
                                                            </p:outputPanel>
                                                        </p:tooltip>
                                                    </td>
                                                </c:if>
                                            </tr>
                                        </c:forEach>
                                        </tbody>
									</table>

                                </div>
                            </div>
                        </p:panel>

                </div>
            </main>
            <ui:include src="../Dialogs/InvoiceDialogBilling.xhtml"/>
        </div>
        <script>
            $(".tab").on("click", function (event) {
                var elementId = event.target.id;
                console.log(elementId);
                $(".tab").removeClass("selected");
                $('#' + elementId).addClass("selected");
                $(".hide").hide();
                $("#content_" + elementId).show();
            });

            function checkDates() {
                var dateFrom = $('#filterDateFrom_input').val();
                var dateTo = $('#filterDateTo_input').val();

                var dFrom = new Date(dateFrom.substring(6) + '-'
                    + dateFrom.substring(3, 5) + '-'
                    + dateFrom.substring(0, 2));
                var dTo = new Date(dateTo.substring(6) + '-'
                    + dateTo.substring(3, 5) + '-' + dateTo.substring(0, 2));

                if (dFrom > dTo) {
                    $('#filterDateTo_input').val(
                        $('#filterDateFrom_input').val());
                    updateCalendarTo();
                }
            }

            function resetData() {
                $("#filterDateFrom_input").val("");
                $("#filterDateTo_input").val("");
                $("#manager_label").text("#{ff:upper(msg.clientManager)}");
                $("#office_label").text("#{msg.subjectViewFormalityConservatoryCap}");
                $("#filterNotes").val("");
                $("#filterNdg").val("");
                $("#filterPractice").val("");
                return true;
            }

            function customExtender() {
                this.cfg.grid = {
                    background: '#ffffff',
                    borderColor: '#D4D4D4',
                }
            }
        </script>

        <p:dialog id="documentDialog" widgetVar="documentDialog" modal="true" resizable="false" draggable="false"
                  width="700">
            <p:scrollPanel mode="native"  style="width: 100%; min-height: 300px; max-height: 600px;">
                <p:dataTable value="#{bean.requestDocuments}" var="doc" id="requestDocs">
                    <p:column headerText="#{msg.name}">
                        <h:outputText value="#{doc.title}#{not empty doc.fileExtension ? doc.fileExtension : '' }"/>
                    </p:column>
                    <p:column styleClass="action_column">
                        <p:commandButton icon="fa fa-download" action="#{bean.downloadRequestFile}" ajax="false">
                            <f:setPropertyActionListener value="#{doc.id}" target="#{bean.entityEditId}"/>
                        </p:commandButton>
                    </p:column>
                </p:dataTable>
            </p:scrollPanel>
        </p:dialog>

        <p:dialog id="editAndPrintDialog" widgetVar="editAndPrintDialogWV" modal="true" resizable="false"
                  draggable="false">
            <h3>#{msg.requestEditAndPrintDialogHeader}:</h3>
            <p:panelGrid columns="2" styleClass="ui-panelgrid-blank form-group" id="editArea">
                <span>#{msg.status}:</span>
                <p:column>
                    <p:selectOneMenu value="#{bean.selectedState}" label="#{msg.status}"
                                     styleClass="select-width">
                        <f:selectItems value="#{bean.statesForSelect}"/>
                    </p:selectOneMenu>
                </p:column>

                <span>#{msg.requestListCurrentOperator}:</span>
                <p:column>
                    <p:selectOneMenu value="#{bean.selectedUser}" label="#{msg.requestListCurrentOperator}"
                                     styleClass="select-width">
                        <f:selectItems value="#{bean.usersForSelect}"/>
                    </p:selectOneMenu>
                </p:column>
            </p:panelGrid>

            <div class="btn_line">
                <p:commandButton value="#{msg.requestPrint}"
                                 action="#{bean.loadRequestsPdf}" styleClass="p-mr-2 p-mb-2"/>
                <p:commandButton value="#{msg.ok}"
                                 action="#{bean.modifyRequests}"
                                 oncomplete="PF('editAndPrintDialogWV').hide(); filterTableFromPanel();"/>
            </div>
        </p:dialog>

        <ui:include src="../Dialogs/TotalCostDocumentDialog.xhtml"/>
    </ui:define>
</ui:composition>
</html>
