<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:ff="http://readytech.com/functions"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:c="http://java.sun.com/jsp/jstl/core">
<ui:composition template="/resources/tpl/Admin/LazyListTabBase.xhtml">
    <ui:param name="bean" value="#{certificationListBean}"/>
    <ui:param name="renderTitle" value="false"/>
    <ui:param name="renderMenu" value="false"/>
    <ui:param name="centerPartStyleClass" value="false"/>
    <ui:define name="list_body">
        <h:outputScript name="chartjs/chart.js" library="chart"/>
        <link href="#{facesContext.externalContext.requestContextPath}/resources/styles/request.css"
              media="all" rel="stylesheet" type="text/css"/>
        <link href="#{facesContext.externalContext.requestContextPath}/resources/styles/certificationRequest.css"
              media="all" rel="stylesheet" type="text/css"/>
        <style type="text/css">
            nav {
                position: relative;
                z-index: 1;
                white-space: nowrap;
            }

            nav a {
                position: relative;
                display: inline-block;
                color: inherit;
                text-decoration: none;
                margin: 0 -4px;
                width: 267px;
                /* font-family: "Open Sans","Helvetica Neue",sans-serif !important; */
                font-size: 18px;
            }

            nav a::before, main {
                border: 1px solid #dddfe2;
            }

            nav a::before {
                content: ''; /* To generate the box */
                font-size: 18px;
                position: absolute;
                min-height: 50px;
                height: 50px;
                top: 0;
                right: -10px;
                bottom: .5em;
                left: 0;
                z-index: -1;
                border-bottom: none;
                border-radius: 7px 7px 0 0;
                background: #f6f7f9;
                box-shadow: 0 2px hsla(0, 0%, 100%, .5) inset;
                transform: perspective(20px) rotateX(3deg);
                transform-origin: bottom;
            }

            nav.left a {
                padding: 1em 1em 1em 0.7em;
            }

            nav.left a::before {
                transform-origin: bottom left;
            }

            nav.right a {
                padding: 1.5em 1em 1em 2em;
            }

            nav.right a::before {
                transform-origin: bottom right;
            }

            nav a.selected {
                z-index: 2;
            }

            nav a.selected::before {
                border-bottom: none;
                height: 51px;
            }

            nav a.selected::before, main {
                background: #fff;
            }

            main {
                display: block;
                margin: -7px 0 30px -15px;
                padding: 1em;
                border-radius: 3px;
                padding-left: 0px;
                padding-top: 0px;
            }

            main .ui-panelgrid .ui-grid-responsive .ui-panelgrid-cell {
                padding-top: 15px;
                padding-bottom: 0;
            }

            .circle {
                top: 56%;
                right: 20px;
                margin-top: -10px;
                position: absolute !important;
                overflow: hidden;
                cursor: pointer;
                display: block;
                height: 16px;
                width: 16px;
                line-height: 1;
                -moz-border-radius: 15px;
                border-radius: 8px;
                background-color: silver;
                color: white;
                text-align: center;
                font-size: 15px;
            }

            .react-grid-layout {
                position: relative;
                transition: height .2s ease;
            }

            .react-grid-item.cssTransforms {
                transition-property: transform;
            }

            .ricavi_outer_div {
                width: 100%;
                height: 100%;
                border-radius: 5px;
                overflow: hidden;
                box-shadow: rgb(4 26 55/ 16%) 0px 1px 2.94px 0.06px;
                background: rgb(129, 199, 132);
                border: 0px;
            }

            @media screen and (min-width: 1400px) {
                .inner_div {
                    opacity: 0.15;
                }
            }

            @media screen and (min-width: 1200px) {
                .inner_div {
                    opacity: 0.1;
                }
            }

            .inner_div {
                color: rgb(255, 255, 255);
                opacity: 0.2;
                font-size: 74px;
                bottom: -10px;
                left: 0px;
                overflow: hidden;
            }

            .box_header {
                position: absolute;
                top: -32px;
                left: 10px;
                right: 45px;
                font-size: 18px;
                text-transform: uppercase;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
                color: rgb(255, 255, 255);
                height: 65%;
            }

            .cost {
                bottom: 20px;
                color: rgb(255, 255, 255);
                font-size: 35px;
                left: 5px;
                right: 5px;
                text-align: center;
                font-weight: bold;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
            }

            .list_icon {
                position: absolute;
                top: -32px;
                right: 7px;
                cursor: pointer;
            }

            .costi_outer_div {
                width: 100%;
                height: 100%;
                border-radius: 5px;
                overflow: hidden;
                box-shadow: rgb(4 26 55/ 16%) 0px 1px 2.94px 0.06px;
                background: rgb(251, 183, 70);
                border: 0px;
            }

            .incassi_outer_div {
                width: 100%;
                height: 100%;
                border-radius: 5px;
                overflow: hidden;
                box-shadow: rgb(4 26 55/ 16%) 0px 1px 2.94px 0.06px;
                background: rgb(91, 175, 184);
                border: 0px;
            }

            .tributi_outer_div {
                width: 100%;
                height: 100%;
                border-radius: 5px;
                overflow: hidden;
                box-shadow: rgb(4 26 55/ 16%) 0px 1px 2.94px 0.06px;
                background: rgb(100, 181, 246);
                border: 0px;
            }

            .resizable_icon {
                position: absolute;
                width: 20px;
                height: 20px;
                bottom: 0;
                right: 0;
                background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pg08IS0tIEdlbmVyYXRvcjogQWRvYmUgRmlyZXdvcmtzIENTNiwgRXhwb3J0IFNWRyBFeHRlbnNpb24gYnkgQWFyb24gQmVhbGwgKGh0dHA6Ly9maXJld29ya3MuYWJlYWxsLmNvbSkgLiBWZXJzaW9uOiAwLjYuMSAgLS0+DTwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DTxzdmcgaWQ9IlVudGl0bGVkLVBhZ2UlMjAxIiB2aWV3Qm94PSIwIDAgNiA2IiBzdHlsZT0iYmFja2dyb3VuZC1jb2xvcjojZmZmZmZmMDAiIHZlcnNpb249IjEuMSINCXhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbDpzcGFjZT0icHJlc2VydmUiDQl4PSIwcHgiIHk9IjBweCIgd2lkdGg9IjZweCIgaGVpZ2h0PSI2cHgiDT4NCTxnIG9wYWNpdHk9IjAuMzAyIj4NCQk8cGF0aCBkPSJNIDYgNiBMIDAgNiBMIDAgNC4yIEwgNCA0LjIgTCA0LjIgNC4yIEwgNC4yIDAgTCA2IDAgTCA2IDYgTCA2IDYgWiIgZmlsbD0iIzAwMDAwMCIvPg0JPC9nPg08L3N2Zz4=);
                background-position: 100% 100%;
                padding: 0 3px 3px 0;
                background-repeat: no-repeat;
                background-origin: content-box;
                box-sizing: border-box;
                cursor: se-resize;
            }

            .wHMuN {
                width: 100%;
                height: 100%;
                border-radius: 5px;
                overflow: hidden;
                box-shadow: rgb(4 26 55 / 16%) 0px 1px 2.94px 0.06px;
                background: rgb(255, 255, 255);
                border: 1px solid rgb(221, 221, 221);
            }

            .trimester {
                margin-top: 7px;
                margin-left: 10px;
                right: 45px;
                font-size: 18px;
                text-transform: uppercase;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
                color: rgb(110, 122, 129);
            }

            .justifyContent-center-0-26 {
                justify-content: center;
            }

            .alignContent-center-0-17 {
                align-content: center;
            }

            .alignItems-stretch-0-14 {
                align-items: stretch;
            }

            .wrap-nowrap-0-7 {
                flex-wrap: nowrap;
            }

            .direction-column-0-5 {
                flex-direction: column;
            }

            .fullWidth-0-2 {
                flex: 1 1 0;
                width: 100%;
            }

            .flexBox-0-0 {
                display: flex;
            }

            .month_div {
                margin-left: 10px;
                margin-right: 10px;
                border-top: 1px solid rgb(221, 221, 221);
                padding-top: 5px;
                padding-bottom: 5px;
            }

            .month_outer {
                float: left;
                width: 50%;
            }

            .month_inner {
                color: rgb(110, 122, 129);
                font-size: 16px;
                width: auto;
                line-height: 25px;
                text-align: left;
                font-weight: 100;
                white-space: nowrap;
                text-overflow: ellipsis;
                overflow: hidden;
            }

            .cost_outer {
                float: right;
            }

            .cost_inner {
                color: rgb(110, 122, 129);
                font-size: 16px;
                width: auto;
                line-height: 25px;
                text-align: right;
                font-weight: 100;
                white-space: nowrap;
                text-overflow: ellipsis;
                overflow: hidden;
            }

            .cost_total {
                color: rgb(110, 122, 129);
                bottom: 20px;
                font-size: 2.5vw;
                left: 5px;
                right: 5px;
                text-align: center;
                font-weight: bold;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
            }

            .list_icon_trimester {
                font-size: 17px;
                color: rgb(110, 122, 129);
                float: right;
                margin-top: 7px;
                margin-right: 5px;
            }

            .inner_div img {
                position: absolute;
                height: 100px;
                margin-top: 22px;
                margin-left: -27px;
            }

            .ricavi-img, .incassi-bianco-img {
                position: absolute;
                margin-top: 24px;
                height: 76px;
                width: 100px;
                background-size: 100px;
                background-repeat: no-repeat;
            }

            .ricavi-img {
                background-image: url('../../resources/images/ricavi.png') !important;
                background-position-x: -20px;
            }

            .incassi-bianco-img {
                background-image: url('../../resources/images/incassi_bianco.png') !important;
                background-position-x: -20px;
                background-position-y: 10px;
            }

            .column_outer {
                display: flex;
                gap: 10px;
                width: 100%;
            }

            .column_outer .month_inner {
                width: 25%;
            }

            .color-white * {
                color: #fff;
            }

            .dot {
                height: 12px;
                width: 12px !important;
                background-color: #bbb !important;
                border-radius: 50% !important;
                display: inline-block;
                margin-left: 5px !important;
                margin-top: 5px !important;
            }

            .dot.selected {
                background-color: #fff !important;
            }

            .excel-img {
                background-image: url('../../resources/images/excel.png') !important;
                height: 25px;
                width: 25px;
                background-size: cover;
                background-repeat: no-repeat;
                position: absolute;
            }

            @media screen and (min-width: 1400px) {
                .cost_total {
                    font-size: 35px;
                }
            }

            .orange-button {
                background: orange !important;
            }

            .green-button {
                background: #00CC52 !important;
            }

            .red-button {
                background: red !important;
            }

            body .ui-button.ui-button-warning-icon, body .ui-splitbutton.ui-button-warning-icon > .ui-button {
                background: #fb6e51;
                color: #FFFFFF;
                border: 1px solid #fb6e51 !important;
            }

            body .ui-button.ui-button-warning-icon.ui-state-focus, body .ui-splitbutton.ui-button-warning-icon > .ui-button.ui-state-focus {
                box-shadow: 0 0 0 0.2rem orange !important;
            }

            body .ui-button.ui-button-warning-icon.ui-state-active, body .ui-splitbutton.ui-button-warning-icon.ui-state-active > .ui-button.ui-state-active {
                background-color: #ff8b00 !important;
                color: #FFFFFF;
                border: 1px solid #ff8b00 !important;
            }

            #table_div_content, #certification_table_div_content, #renewal_table_div_content {
                border: none !important;
                padding-top: 0px !important;
                padding-bottom: 0px !important;
            }

            body .ui-datatable .ui-datatable-data tr.ui-datatable-even {
                background-color: #f0f3f5 !important;
            }

            .ui-datatable thead th, .ui-datatable tbody td, .ui-datatable tfoot td, .ui-datatable tfoot th {
                border: 1px solid #c9cdd2 !important;
                color: #4c5156;
            }

            body .ui-paginator .ui-paginator-pages .ui-paginator-page.ui-state-active {
                background: #FFF !important;
                color: #000000 !important;
            }

            body .ui-datatable thead th {
                background-color: #f8f9fa !important;
                color: #495057 !important;
                padding: 6px 6px !important;
            }

            body .ui-datatable .ui-datatable-data tr td {
                padding: 6px 6px !important;
            }

            body .ui-datatable thead th.ui-state-active {
                color: #2196F3 !important;
            }

            body .ui-datatable .ui-datatable-data > tr:hover {
                background: #e9ecef !important;
            }

            body .ui-selectonemenu.ui-state-focus:not(.ui-state-error) {
                box-shadow: 0 0 0 0.2em #57c279 !important;
            }

            .ui-calendar:not(#currentDay) .ui-datepicker-trigger {
                color: #003871 !important;;
            }

            body .ui-calendar:not(#currentDay) .ui-button {
                background-color: transparent !important;
                margin-left: -37px;
            }

            .ui-selectonemenu {
                background-color: #F0F3F5 !important;
                border-radius: 7px !important;
            }

            .ui-selectonemenu {
                border: 1px solid #a8acb1 !important;
            }

            .jqplot-table-legend {
                display: none;
            }

            .ui-selectonemenu-label {
                background-color: #fff !important;
                margin-top: 0px;
            }
            .al-cen-fx div {
                justify-content: center;
            }

            /* calender style */

            .layout-main {
                background-color: #f2f2f2 !important;
            }
            .fc .fc-button-group > * {
                background-color: #2196F3 !important;
                border: 1px solid #2196F3 !important;
            }
            .fc-toolbar button {
                padding: .6em 1.2em !important;
                height: 2.5em;
                margin-left: 5px !important;
            }
            /* body .ui-widget-header {
                background: #f8f9fa !important;
                color: #495057 !important;
            } */
            .fc td.fc-today {
                background-color: #a6d5fa!important;
                color: #000 !important;
                opacity: 1;
            }
            body .ui-button.ui-state-active {
                background: #0b7ad1 !important;
                border-color: #0b7ad1 !important;
            }
            .fa-angle-left:before {
                font-size: 18px;
            }
            .fa-angle-right:before {
                font-size: 18px;
            }
            body .ui-datepicker .ui-datepicker-calendar td.ui-datepicker-today a {
                background: transparent !important;
                color: #0b7ad1 !important;
            }
            body .ui-datepicker .ui-datepicker-calendar td a.ui-state-active {
                background: #2196F3 !important;
                color: #fff !important;
            }

            /* calender style ends */
            
            .fc .fc-toolbar>*>* {
    			font-size: 14px;
    		}
    		.fc-center h2 {
    			font-size: 18px !important;
    		}
    		body .fc th {
			    padding: 0.5rem;
			}
            .fc-toolbar {
                margin-bottom: 0.5em !important;
            }
            .fc-basic-view .fc-body .fc-row {
                min-height: 3.5em !important;
                max-height: 3.5em !important;
            }
            .fc-day-grid-container {
                height: auto !important;
            }
            .fc-prev-button {
                background-image: url('../../resources/images/previous-icon.png') !important;
                background-size: cover !important;
            }
            .fc-next-button {
                background-image: url('../../resources/images/next-icon.png') !important;
                background-size: cover !important;
            }
            
            .actionPnl-tooltip {
                text-align:center; width:140px; background-color: #6688AA !important;border-radius: 7px !important; border: 1px solid #FFFFFF; opacity: 0.8;
            }

            .actionPnl-panel {
                text-align:center; background-color: #6688AA !important; margin-left:-5px; margin-right: -5px; border-radius: 7px !important;
            }
            .certActionPnl-tooltip {
                text-align:center; width:140px; background-color: #6688AA !important;border-radius: 7px !important; border: 1px solid #FFFFFF; opacity: 0.8;
            }

            .certActionPnl-panel {
                text-align:center; background-color: #6688AA !important; margin-left:-5px; margin-right: -5px; border-radius: 7px !important;
            }
            body .ui-state-active {
                background-color: #2d353c !important;
            }

            @media screen and (max-width: 1200px) {
                #settingPanel, #certificationSettingPanel, #renewalSettingPanel {
                    margin-top: 90px;
                }
            }

            #settingPanel, #certificationSettingPanel, #renewalSettingPanel {
                position: absolute;
                z-index: 1;
                margin-top: 40px;
                max-width: 500px;
                right: 33px;
                border: 1px solid #547ac4;
            }

            .calender-filled input, .select-checkbox, .select-one-menu {
                border: 1px solid #009900 !important;
            }

            #statuses_panel {
                display: none !important;
            }

            #searchLastName, #certificationSearchLastName, #renewalSearchLastName {
                width: 300px;
                border: 1px solid #a8acb1 !important;
                background: #ffffff !important;
            }

            #searchFiscalCode, #certificationSearchFiscalCode, #renewalSearchFiscalCode {
                width: 200px;
                border: 1px solid #a8acb1 !important;
                background: #ffffff !important;
            }

            #certificationTable thead tr, #renewalTable thead tr {
                height: 43px;
            }
            
            #excelFileUpload .ui-fileupload-content {
            	display: none !important;
            }
            
            #importExcelPanel .ui-panelgrid-cell {
            	padding: 23px 23px;
            	border: none;
            }
            
            #excelFileUpload .ui-widget-header {
				background: #FFFFFF !important;
		    	color: #495057 !important;
		    }
		    
		    #excelFileUpload .ui-fileupload-buttonbar {
    			border: none !important;
    			padding : 0px;
    		}
    		
    		#importFilePanel .ui-panelgrid-cell {
    			padding: 0px 0px;
    		}
    		
    		#importExcelDialog .ui-widget-header {
    			background-color: #f8f9fa !important;
    		}
        </style>

        <script src='https://kit.fontawesome.com/a076d05399.js' type="text/javascript"></script>
        <link rel="stylesheet"
              href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"/>
        <div style="margin-left: 20px;">
            <script type="text/javascript">
                jQuery(document).ready(function() {
                });
                function checkDates() {
                    var dateFrom = $('#filterDateFrom_input').val();
                    var dateTo = $('#filterDateTo_input').val();

                    var dFrom = new Date(dateFrom.substring(6) + '-'
                        + dateFrom.substring(3, 5) + '-'
                        + dateFrom.substring(0, 2));
                    var dTo = new Date(dateTo.substring(6) + '-'
                        + dateTo.substring(3, 5) + '-' + dateTo.substring(0, 2));

                    if (dFrom > dTo) {
                        $('#filterDateTo_input').val(
                            $('#filterDateFrom_input').val());
                        updateCalendarTo(null);
                    }
                };

                function resetData() {
                    $("#filterDateFrom_input").val("");
                    $("#filterDateTo_input").val("");
                    $("#filterDateFromEvasione_input").val("");
                    $("#filterDateToEvasione_input").val("");
                    $("#client_label").text("#{ff:upper(msg.requestListClient)}");
                    $("#manager_label").text("#{ff:upper(msg.clientManager)}");
                    $("#fiduciario_label").text("#{ff:upper(msg.mailTrust)}");
                    $("#office_label").text("#{msg.subjectViewFormalityConservatoryCap}");
                    $("#filterExpiration_input").val("");
                    resetTableData();
                    return true;
                }
                function applyBorder(id) {
                    $("#"+id).addClass("border_class");
                }
                function applyClickListener(id, wv) {
                    $("#"+id).click(function() {
                        PF(wv).show();
                    });
                }
            </script>

            <nav class="left" style="margin-left:20px;">
                <a href="#" id="tab1" class="tab selected"
                   onclick="loadTab([{name:'selectedTab', value:'tab1'}]);">#{ff:upper(msg.certificationListDashboard)}</a>
                <a href="#" id="tab2" class="tab"
                   onclick="loadTab([{name:'selectedTab', value:'tab2'}]);">#{ff:upper(msg.certificationListTranscriptionAct)}</a>
                <a href="#" id="tab3" class="tab"
                   onclick="loadTab([{name:'selectedTab', value:'tab3'}]);">#{ff:upper(msg.certificationListCertificate)}</a>
                <a href="#" id="tab4" class="tab"
                   onclick="loadTab([{name:'selectedTab', value:'tab4'}]);">#{ff:upper(msg.certificationListRenew)}</a>
                <h:panelGroup rendered="#{bean.currentUser.isAdmin()}">
                    <a href="#" id="tab5" class="tab"
                       onclick="loadTab([{name:'selectedTab', value:'tab5'}]);">#{ff:upper(msg.certificationListAdministration)}</a>
                </h:panelGroup>
            </nav>

            <p:remoteCommand name="loadTab"
                             action="#{bean.handleTabClick}"/>

            <div id="content_tab1" class="hide">
                <p:panelGrid columns="4" styleClass="ui-panelgrid-blank form-group" cellpadding="3" cellspacing="0"
                             columnClasses="ui-grid-col-4,ui-grid-col-4,ui-grid-col-3,ui-grid-col-1" layout="grid">
                    <p:commandButton value="#{ff:upper(msg.billingListUpdate)}"/>

                    <p:outputLabel></p:outputLabel>

                    <p:selectOneMenu id="client" value="#{bean.selectedClientId}" style="width: 300px; float:right;"
                                     styleClass="#{bean.selectedClientId ne null ? 'select-one-menu' : ''}">
                        <f:selectItem itemLabel="#{ff:upper(msg.billingListClient)}" itemValue="#{null}"
                                      noSelectionOption="true"/>
                        <f:selectItems value="#{bean.clients}" />
                        <!-- <p:ajax event="itemSelect" listener="#{bean.filterByClient}" update="@this slides1 costPanel"/> -->
                    </p:selectOneMenu>

                    <p:selectOneMenu id="year" value="#{bean.selectedYear}" label="#{msg.requestClient}"
                                     style="width: calc( 100% - 5px);"
                                     styleClass="#{bean.selectedYear ne null ? 'select-one-menu' : ''}">
                        <f:selectItem itemLabel="#{ff:upper(msg.billingListYear)}" itemValue="#{null}"
                                      noSelectionOption="true"/>
                        <f:selectItems value="#{bean.years}"/>
                    </p:selectOneMenu>
                </p:panelGrid>
                <div class="react-grid-layout" style="height: 640px;">
                    <p:outputPanel id = "costPanel">
                        <p:panelGrid columns="4" styleClass="ui-panelgrid-blank form-group"
                                     cellpadding="3" cellspacing="0"
                                     columnClasses="ui-grid-col-3,ui-grid-col-3,ui-grid-col-3,ui-grid-col-3"
                                     layout="grid">
                            <div class="react-grid-item react-draggable cssTransforms react-resizable-hide react-resizable"
                                 style="width: calc(25% - 9px); height: 100px; line-height: 100px; position: absolute; transform: translate(-4px, 0px); box-sizing: border-box;">
                                <div>
                                    <div class="ricavi_outer_div">
                                        <div class="inner_div">
                                            <i class="ricavi-img"></i>
                                        </div>
                                        <div color="#fff" class="box_header">#{msg.billingListRevenues}</div>
                                        <div class="cost">0 €</div>
                                    </div>
                                    <div class="list_icon"
                                         style="font-size: 17px; color: rgb(255, 255, 255);" title="">
                                        <i class="fa fa-fw fa-list11"
                                           style="font-size: inherit;"></i>
                                    </div>
                                </div>
                                <span class="resizable_icon"></span>
                            </div>
                            <div class="react-grid-item react-draggable cssTransforms react-resizable-hide react-resizable"
                                 style="width: calc(25% - 9px); height: 100px; line-height: 100px; position: absolute; transform: translate(calc(100% + 6px), 0px); box-sizing: border-box;">
                                <div>
                                    <div class="costi_outer_div">
                                        <div class="inner_div">
                                            <i class="ricavi-img"></i>
                                        </div>
                                        <div color="#fff" class=" box_header">#{msg.billingListCosts}</div>
                                        <div class="cost">0 €</div>
                                    </div>
                                    <div class="list_icon"
                                         style="font-size: 17px; color: rgb(255, 255, 255);" title="">
                                        <i class="fa fa-fw fa-list11"
                                           style="font-size: inherit;"></i>
                                    </div>

                                </div>
                                <span class="resizable_icon"></span>
                            </div>
                            <div class="react-grid-item react-draggable cssTransforms react-resizable-hide react-resizable"
                                 style="width: calc(25% - 9px); height: 100px; line-height: 100px; position: absolute; transform: translate(calc(200% + 16px), 0px); box-sizing: border-box;">
                                <div>
                                    <div class="incassi_outer_div">
                                        <div class="inner_div">
                                            <i class="incassi-bianco-img"></i>
                                        </div>
                                        <div color="#fff" class=" box_header">#{msg.billingListTributes}</div>
                                        <div class="cost">0</div>
                                    </div>

                                    <div class="list_icon"
                                         style="font-size: 17px; color: rgb(255, 255, 255);" title="">
                                        <i class="fa fa-fw fa-list11"
                                           style="font-size: inherit;"></i>
                                    </div>

                                </div>
                                <span class="resizable_icon"></span>
                            </div>
                            <div class="react-grid-item react-draggable cssTransforms react-resizable-hide react-resizable"
                                 style="width: calc(25% - 9px); height: 100px; line-height: 100px; position: absolute; transform: translate(calc(300% + 26px), 0px); box-sizing: border-box;">
                                <div>
                                    <div class="tributi_outer_div">
                                        <div class="inner_div" style="position: absolute;">
                                            <i class="fa fa-university"
                                               style="position: relative; left: -9px; bottom: -18px; font-size: 80px;"></i>
                                        </div>
                                        <div color="#fff" class=" box_header">#{msg.billingInvoicesCount}</div>
                                        <div class="cost">0</div>
                                    </div>

                                    <div class="list_icon"
                                         style="font-size: 17px; color: rgb(255, 255, 255);" title="">
                                        <i class="fa fa-fw fa-list11"
                                           style="font-size: inherit;"></i>
                                    </div>

                                </div>
                                <span class="resizable_icon"></span>
                            </div>
                        </p:panelGrid>
                    </p:outputPanel>
                    <div class="layout-dashboard" style="max-width: 98%;">
                        <h:panelGroup id="slides1" layout="block" styleClass="p-grid"
                                      style="margin-top: 7% !important;height: 210px;">
                            <div style="width: calc(25% - 8px);position: absolute;transform: translate(16px, 0px);">
                                <div class="react-grid-item react-draggable cssTransforms react-resizable-hide react-resizable"
                                     style="height: 210px; border-radius: 5px;">
                                    <div class="sc-hcnlBt wHMuN">
                                        <div>
                                            <div color="#6e7a81" class="trimester"
                                                 style="float: left;">#{msg.billingListFirstSemestre}</div>
                                            <div class="list_icon_trimester">
                                                <i class="fa fa-fw fa-list11" style="font-size: inherit;"></i>
                                            </div>
                                        </div>

                                        <div style="margin-top: 38px;">
                                            <div class="flexBox-0-0 fullWidth-0-2 wrap-nowrap-0-7
															direction-column-0-5 justifyContent-center-0-26 alignItems-stretch-0-14 alignContent-center-0-17">
                                                <div class="month_div" style="border: 0px;">
                                                    <div class="month_outer">
                                                        <div class="month_inner">#{msg.january} - #{msg.february}</div>
                                                    </div>
                                                    <div class="cost_outer">
                                                        <div class="cost_inner">
                                                            <h:outputText value="#{bean.monthJanFebAmount}">
                                                                <f:convertNumber locale="it_IT"/>
                                                            </h:outputText> €
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="month_div">
                                                    <div class="month_outer">
                                                        <div class="month_inner">#{msg.march} - #{msg.april}</div>
                                                    </div>
                                                    <div class="cost_outer">
                                                        <div class="cost_inner">
                                                            <h:outputText value="#{bean.monthMarAprAmount}">
                                                                <f:convertNumber locale="it_IT"/>
                                                            </h:outputText> €
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="month_div">
                                                    <div class="month_outer">
                                                        <div class="month_inner">#{msg.may} - #{msg.june}</div>
                                                    </div>
                                                    <div class="cost_outer">
                                                        <div class="cost_inner">
                                                            <h:outputText value="#{bean.monthMayJunAmount}">
                                                                <f:convertNumber locale="it_IT"/>
                                                            </h:outputText> €
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="cost_total">
                                                <h:outputText
                                                        value="#{bean.monthJanFebAmount+bean.monthMarAprAmount+bean.monthMayJunAmount}">
                                                    <f:convertNumber locale="it_IT"/>
                                                </h:outputText> €
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div style="width: calc(25% - 8px);position: absolute;transform: translate(calc(100% + 26px), 0px);">
                                <div class="react-grid-item react-draggable cssTransforms react-resizable-hide react-resizable"
                                     style="height: 210px; border-radius: 5px;">
                                    <div class="sc-hcnlBt wHMuN">
                                        <div>
                                            <div color="#6e7a81" class="trimester"
                                                 style="float: left;">#{msg.billingListSecondSemestre}</div>
                                            <div class="list_icon_trimester">
                                                <i class="fa fa-fw fa-list11" style="font-size: inherit;"></i>
                                            </div>
                                        </div>

                                        <div style="margin-top: 38px;">
                                            <div class="flexBox-0-0 fullWidth-0-2 wrap-nowrap-0-7
															direction-column-0-5 justifyContent-center-0-26 alignItems-stretch-0-14 alignContent-center-0-17">
                                                <div class="month_div" style="border: 0px;">
                                                    <div class="month_outer">
                                                        <div class="month_inner">#{msg.july} - #{msg.august}</div>
                                                    </div>
                                                    <div class="cost_outer">
                                                        <div class="cost_inner">
                                                            <h:outputText value="#{bean.monthJulAugAmount}">
                                                                <f:convertNumber locale="it_IT"/>
                                                            </h:outputText> €
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="month_div">
                                                    <div class="month_outer">
                                                        <div class="month_inner">#{msg.september} - #{msg.october}</div>
                                                    </div>
                                                    <div class="cost_outer">
                                                        <div class="cost_inner">
                                                            <h:outputText value="#{bean.monthSepOctAmount}">
                                                                <f:convertNumber locale="it_IT"/>
                                                            </h:outputText> €
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="month_div">
                                                    <div class="month_outer">
                                                        <div class="month_inner">#{msg.november} - #{msg.december}</div>
                                                    </div>
                                                    <div class="cost_outer">
                                                        <div class="cost_inner">
                                                            <h:outputText value="#{bean.monthNovDecAmount}">
                                                                <f:convertNumber locale="it_IT"/>
                                                            </h:outputText> €
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="cost_total">
                                                <h:outputText
                                                        value="#{bean.monthJulAugAmount+bean.monthSepOctAmount+bean.monthNovDecAmount}">
                                                    <f:convertNumber locale="it_IT"/>
                                                </h:outputText> €
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </h:panelGroup>
                        <h:panelGroup id="calendarWidget" layout="block" styleClass="p-grid"
                                      style="margin-top: -215px !important; margin-left: calc(51% - 5px); max-height: 440px; position: absolute; width: calc(50% + -5px);">
                            <div class="p-col-12" style="max-height: 440px;">
                                <div class="card" style="max-height: 440px;padding-top: 8px;">
                                    <p:schedule id="schedule" value="#{bean.calendarBean.eventModel}"
                                                aspectRatio="2.0" widgetVar="myschedule">
                                        <p:ajax event="dateSelect" listener="#{bean.calendarBean.onDateSelect}" update="eventDetails" oncomplete="PF('eventDialog').show();" />
                                        <p:ajax event="eventSelect" listener="#{bean.calendarBean.onEventSelect}" update="eventDetails" oncomplete="PF('eventDialog').show();" />
                                        <p:ajax event="eventMove" listener="#{bean.calendarBean.onEventMove}" update="messages" />
                                        <p:ajax event="eventResize" listener="#{bean.calendarBean.onEventResize}" update="messages" />
                                    </p:schedule>

                                </div>
                            </div>
                        </h:panelGroup>
                    </div>
                    <div class="layout-dashboard" style="max-width: 98%;">
                        <h:panelGroup id="turnoverPerMonthWidget" layout="block" styleClass="p-grid"
                                      style="margin-top: 1% !important;">
                            <div style="width: calc(25% - 8px);position: absolute;transform: translate(16px, 0px);">
                                <div class="react-grid-item react-draggable cssTransforms react-resizable-hide react-resizable"
                                     style="height: 220px; border-radius: 5px;">
                                    <div class="sc-hcnlBt wHMuN color-white" style="background-color: #81C784;">
                                        <div>
                                            <div color="#6e7a81" class="trimester"
                                                 style="float: left;">#{msg.subjectTurnoverPerMonth}</div>
                                            <div class="list_icon_trimester">
                                                <i class="fa fa-fw fa-list11" style="font-size: inherit;"></i>
                                            </div>
                                        </div>

                                        <div style="margin-top: 38px;">
                                            <h:panelGroup layout="block" styleClass="flexBox-0-0 fullWidth-0-2 wrap-nowrap-0-7
															direction-column-0-5 justifyContent-center-0-26 alignItems-stretch-0-14 alignContent-center-0-17">
                                                <div class="month_div"
                                                     style="border: 0px;border-bottom: 1px solid rgb(221, 221, 221);">
                                                    <div class="month_outer column_outer">
                                                        <div class="month_inner"></div>
                                                        <div class="month_inner">Imp.</div>
                                                        <div class="month_inner">Non Imp.</div>
                                                        <div class="month_inner">Tot.</div>
                                                    </div>
                                                </div>
                                                <c:forEach var="item" items="#{bean.turnoverPerMonth}"
                                                           varStatus="loop">
                                                    <c:if test="${loop.index ge bean.quadrimesterStartIdx and loop.index le bean.quadrimesterEndIdx}">
                                                        <div class="month_div"
                                                             style="border: 0px;padding-bottom: 0px;#{(loop.index eq 0 or loop.index eq 4 or loop.index eq 8) ? '' : 'padding-top: 0px;'}">
                                                            <div class="month_outer column_outer">
                                                                <div class="month_inner">#{bean.months[loop.index]}</div>
                                                                <div class="month_inner">
                                                                    <h:outputText value="#{item.totalTax}">
                                                                        <f:convertNumber locale="it_IT"/>
                                                                    </h:outputText>
                                                                </div>
                                                                <div class="month_inner">
                                                                    <h:outputText value="#{item.nonTotalTax}">
                                                                        <f:convertNumber locale="it_IT"/>
                                                                    </h:outputText>
                                                                </div>
                                                                <div class="month_inner">
                                                                    <h:outputText value="#{item.total}">
                                                                        <f:convertNumber locale="it_IT"/>
                                                                    </h:outputText>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </c:if>
                                                </c:forEach>
                                            </h:panelGroup>
                                            <div style="padding: 5px 20px;">
                                                <div>
                                                    <i class="excel-img"></i>
                                                </div>
                                                <div style="float: right;">
                                                    <p:commandButton icon="test" update="turnoverPerMonthWidget"
                                                                     action="#{bean.setQuadrimesterIdx(0, 3)}"
                                                                     styleClass="dot #{bean.quadrimesterStartIdx eq 0 ? 'selected' : ''}"/>
                                                    <p:commandButton icon="test" update="turnoverPerMonthWidget"
                                                                     action="#{bean.setQuadrimesterIdx(4, 7)}"
                                                                     styleClass="dot #{bean.quadrimesterStartIdx eq 4 ? 'selected' : ''}"/>
                                                    <p:commandButton icon="test" update="turnoverPerMonthWidget"
                                                                     action="#{bean.setQuadrimesterIdx(8, 11)}"
                                                                     styleClass="dot #{bean.quadrimesterStartIdx eq 8 ? 'selected' : ''}"/>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </h:panelGroup>
                        <h:panelGroup id="turnoverPerCustomerWidget" layout="block" styleClass="p-grid"
                                      style="margin-top: 0px !important;margin-left: calc(25% + 4px);">
                            <div style="width: calc(25% - 8px);position: absolute;transform: translate(16px, 0px);">
                                <div class="react-grid-item react-draggable cssTransforms react-resizable-hide react-resizable"
                                     style="height: 220px; border-radius: 5px;">
                                    <div class="sc-hcnlBt wHMuN color-white" style="background-color: #FAB544;">
                                        <div>
                                            <div color="#6e7a81" class="trimester"
                                                 style="float: left;">#{msg.turnoverPerCustomer}</div>
                                            <div class="list_icon_trimester">
                                                <i class="fa fa-fw fa-list11" style="font-size: inherit;"></i>
                                            </div>
                                        </div>

                                        <div style="margin-top: 38px;">
                                            <h:panelGroup layout="block" styleClass="flexBox-0-0 fullWidth-0-2 wrap-nowrap-0-7
															direction-column-0-5 justifyContent-center-0-26 alignItems-stretch-0-14 alignContent-center-0-17">
                                                <div class="month_div"
                                                     style="border: 0px;border-bottom: 1px solid rgb(221, 221, 221);">
                                                    <div class="month_outer column_outer">
                                                        <div class="month_inner"></div>
                                                        <div class="month_inner">Imp.</div>
                                                        <div class="month_inner">Non Imp.</div>
                                                        <div class="month_inner">Tot.</div>
                                                    </div>
                                                </div>
                                                <c:forEach var="item" items="#{bean.turnoverPerCustomer}"
                                                           varStatus="loop">
                                                    <c:if test="${loop.index ge bean.quadrimesterStartIdx and loop.index le bean.quadrimesterEndIdx}">
                                                        <div class="month_div"
                                                             style="border: 0px;padding-bottom: 0px;#{(loop.index eq 0 or loop.index eq 4 or loop.index eq 8) ? '' : 'padding-top: 0px;'}">
                                                            <div class="month_outer column_outer">
                                                                <div class="month_inner">#{item.clientName}</div>
                                                                <div class="month_inner">
                                                                    <h:outputText value="#{item.totalTax}">
                                                                        <f:convertNumber locale="it_IT"/>
                                                                    </h:outputText>
                                                                </div>
                                                                <div class="month_inner">
                                                                    <h:outputText value="#{item.nonTotalTax}">
                                                                        <f:convertNumber locale="it_IT"/>
                                                                    </h:outputText>
                                                                </div>
                                                                <div class="month_inner">
                                                                    <h:outputText value="#{item.total}">
                                                                        <f:convertNumber locale="it_IT"/>
                                                                    </h:outputText>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </c:if>
                                                </c:forEach>
                                            </h:panelGroup>
                                            <div style="padding: 5px 20px;">
                                                <div>
                                                    <i class="excel-img"></i>
                                                </div>
                                                <div style="float: right;">
                                                    <p:commandButton icon="test" update="turnoverPerCustomerWidget"
                                                                     action="#{bean.setQuadrimesterIdx(0, 3)}"
                                                                     styleClass="dot #{bean.quadrimesterStartIdx eq 0 ? 'selected' : ''}"/>
                                                    <p:commandButton icon="test" update="turnoverPerCustomerWidget"
                                                                     action="#{bean.setQuadrimesterIdx(4, 7)}"
                                                                     styleClass="dot #{bean.quadrimesterStartIdx eq 4 ? 'selected' : ''}"/>
                                                    <p:commandButton icon="test" update="turnoverPerCustomerWidget"
                                                                     action="#{bean.setQuadrimesterIdx(8, 11)}"
                                                                     styleClass="dot #{bean.quadrimesterStartIdx eq 8 ? 'selected' : ''}"/>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </h:panelGroup>
                    </div>

                </div>
            </div>

            <div id="content_tab2" class="hide" style="display: none;">
                <p:remoteCommand name="loadTranscriptionTab" action="#{bean.loadTranscriptionTab}" update=":transcriptionTable"/>
                <div class="p-col-12">
                    <div class="p-formgroup-inline alignEnd">
                        <div class="p-field">
                            <p:inputText value="#{bean.searchLastName}" placeholder="#{ff:upper(msg.requestEditSubjectListName)}" id="searchLastName" />
                        </div>

                        <div class="p-field">
                            <p:inputText value="#{bean.searchFiscalCode}" placeholder="#{ff:upper(msg.requestFiscalCodeCap)}" id="searchFiscalCode" />
                        </div>

                        <div class="p-field">
                            <p:commandButton
                                    style="" id="searchButton" styleClass="ui-button-warning-icon searchPanelButton"
                                    onclick="checkDates();"
                                    action="#{bean.prepareToModifyTranscriptionTab}" icon="ui-icon ui-icon-search pi pi-search"
                                    update=":transcriptionTable" />
                        </div>
                        <div class="settingsBlock" style="margin-bottom: 10px;">
                            <p:commandButton id="settingButton" onclick="togglePanel();"
                                             type="button" style="float: right;"
                                             styleClass="ui-button-warning-icon searchPanelButton"
                                             icon="ui-icon ui-icon-search pi pi-sliders-h"/>

                            <script type="text/javascript">
                                // <![CDATA[
                                $("body").click(function(e){
                                    var target = $(e.target);
                                    if (!target.parents('#settingButton').length && !target.parents('#settingPanel').length && !target.parents('#transcriptionTabClient_panel').length
                                        && !target.parents('#manager_panel').length && !target.parents('#office_panel').length
                                        && !target.parents('#stateSelectCheckboxPanel').length && !target.parents('#fiduciario_panel').length
                                        && !target.parents('#ui-datepicker-div').length && !target.parents('.ui-datepicker-header').length) {
                                        PF('panelSetting').getJQ().hide();
                                    }
                                    if(target.closest('#statuses').length || target.closest('#stateSelectCheckboxPanelDataTable').length) {
                                        $("#statuses").addClass("border_class");
                                    } else {
                                        $("#statuses").removeClass("border_class");
                                    }
                                });
                                function loadFilterData() {
                                    onLoadFilterData();
                                }
                                function togglePanel() {
                                    PF('panelSetting').getJQ().toggle();
                                }
                                jQuery(document).ready(function() {
                                    PF('panelSetting').getJQ().hide();
                                });
                                // ]]>
                            </script>

                            <p:panel id="settingPanel" widgetVar="panelSetting" closable="true"
                                     toggleable="true" style="display: none;">
                                <div class="p-grid">
                                    <div class="p-col-12" style="text-align: center;">
                                        <h2>Filtra per</h2>
                                    </div>
                                    <div class="p-col-6">
                                        <div style="">
                                            <h:outputText style="color: #003871;"
                                                          value=""/>
                                        </div>
                                    </div>
                                    <div class="p-col-6">
                                        <div style="">
                                            <h:outputText style="color: #003871;"
                                                          value="#{ff:upper(msg.status)}:"/>
                                        </div>
                                    </div>
                                    <div class="p-col-6">
                                        <p:selectOneMenu id="transcriptionTabClient" value="#{bean.selectedClientId}"
                                                         label="#{msg.requestClient}"
                                                         style="width: calc( 100% - 5px);" styleClass="#{bean.selectedClientId ne null ? 'select-one-menu' : ''}">
                                            <f:selectItem itemLabel="#{ff:upper(msg.requestListClient)}"
                                                          itemValue="#{null}"
                                                          noSelectionOption="true"/>
                                            <f:selectItems value="#{bean.clients}"/>
                                            <p:ajax event="itemSelect" update="@this"/>
                                        </p:selectOneMenu>
                                    </div>

                                    <div class="p-col-6">
                                        <p:selectCheckboxMenu id="statuses" style="width: 100%;min-height: 38px;" multiple="true" label="" value="#{bean.selectedStates}"
                                                              onclick="PF('stateSelectCheckboxWV').show(); applyBorder('statuses');" styleClass="#{bean.getStateSelected() gt 0 ? ' select-checkbox' : ''}">
                                            <f:selectItems value="#{bean.stateWrappers}" var="state" itemValue="#{state}"
                                                           itemLabel="#{state.value}"/>
                                        </p:selectCheckboxMenu>
                                    </div>

                                    <div class="p-col-6">
                                        <p:selectOneMenu id="manager" value="#{bean.managerClientFilterid}"
                                                         style="width: calc( 100% - 5px);" styleClass="#{bean.managerClientFilterid ne null ? 'select-one-menu' : ''}">
                                            <f:selectItem itemLabel="#{ff:upper(msg.clientManager)}"
                                                          itemValue="#{null}"
                                                          noSelectionOption="true"/>
                                            <f:selectItems value="#{bean.managerClients}"/>
                                            <p:ajax event="itemSelect" update="@this"/>
                                        </p:selectOneMenu>
                                    </div>
                                    <div class="p-col-6">
                                        <p:selectOneMenu id="fiduciario" value="#{bean.fiduciaryClientFilterId}"
                                                         style="width: calc( 100% - 5px);" styleClass="#{bean.fiduciaryClientFilterId ne null ? 'select-one-menu' : ''}">
                                            <f:selectItem itemLabel="#{ff:upper(msg.mailTrust)}"
                                                          itemValue="#{null}"
                                                          noSelectionOption="true"/>
                                            <f:selectItems value="#{bean.fiduciaryClients}"/>
                                            <p:ajax event="itemSelect" update="@this"/>
                                        </p:selectOneMenu>
                                    </div>
                                    <div class="p-col-6">
                                        <p:selectOneMenu id="office" value="#{bean.aggregationFilterId}"
                                                         style="width: calc( 100% - 5px);" styleClass="#{bean.aggregationFilterId ne null ? 'select-one-menu' : ''}">
                                            <f:selectItem itemLabel="#{msg.subjectViewFormalityConservatoryCap}"
                                                          itemValue="#{null}"
                                                          noSelectionOption="true"/>
                                            <f:selectItems value="#{bean.landAggregations}"/>
                                            <p:ajax event="itemSelect" update="@this"/>
                                        </p:selectOneMenu>
                                    </div>
                                    <div class="p-col-6">
                                        <p:calendar id="filterExpiration" readonlyInput="false" showOn="button"
                                                    onkeypress="if(!searchOnEnter(event, 'searchButton')) return false;"
                                                    pattern="dd/MM/yyyy" mask="true"
                                                    locale="it" navigator="true" popupIconOnly="true"
                                                    placeholder="#{msg.expirationDateCap}"
                                                    value="#{bean.dateExpiration}" styleClass="#{bean.dateExpiration ne null ? 'calender-filled' : ''}">
                                            <p:ajax event="dateSelect" update="@this" />
                                        </p:calendar>
                                    </div>
                                    <div class="p-col-12">
                                        <div style="">
                                            <h:outputText style="color: #003871;"
                                                          value="#{ff:upper(msg.requestListDateOfInput)}:"/>
                                        </div>
                                    </div>
                                    <div class="p-col-6">
                                        <p:calendar id="filterDateFrom" readonlyInput="false"
                                                    showOn="button"
                                                    onkeypress="if(!searchOnEnter(event, 'searchButton')) return true;"
                                                    pattern="dd/MM/yyyy" mask="true" locale="it"
                                                    navigator="true"
                                                    popupIconOnly="true"
                                                    onblur="setTimeout(function(){checkDates();}, 500);check_date(this);"
                                                    value="#{bean.dateFrom}"
                                                    placeholder="#{msg.mailManagerDateFromReqlist}" styleClass="#{bean.dateFrom ne null ? 'calender-filled' : ''}">
                                            <p:ajax event="dateSelect" update="@this" />
                                        </p:calendar>
                                        <div id="hyphen"></div>
                                    </div>
                                    <div class="p-col-6">
                                        <p:calendar id="filterDateTo" readonlyInput="false" showOn="button"
                                                    onkeypress="if(!searchOnEnter(event, 'searchButton')) return false;"
                                                    pattern="dd/MM/yyyy" mask="true"
                                                    locale="it" navigator="true" popupIconOnly="true"
                                                    placeholder="#{msg.mailManagerDateToReqlist}"
                                                    onblur="check_date(this)" value="#{bean.dateTo}" styleClass="#{bean.dateTo ne null ? 'calender-filled' : ''}">
                                            <p:ajax event="dateSelect" update="@this" />
                                        </p:calendar>
                                    </div>
                                    <div class="p-col-12">
                                        <div style="">
                                            <h:outputText style="color: #003871;"
                                                          value="#{ff:upper(msg.requestListDateOfEvasion)}:"/>
                                        </div>
                                    </div>
                                    <div class="p-col-6">
                                        <p:calendar id="filterDateFromEvasione" readonlyInput="false"
                                                    showOn="button"
                                                    onkeypress="if(!searchOnEnter(event, 'searchButton')) return true;"
                                                    pattern="dd/MM/yyyy" mask="true" locale="it"
                                                    navigator="true"
                                                    popupIconOnly="true"
                                                    onblur="setTimeout(function(){checkDates();}, 500);check_date(this);"
                                                    value="#{bean.dateFromEvasion}"
                                                    placeholder="#{msg.mailManagerDateFromReqlist}" styleClass="#{bean.dateFromEvasion ne null ? 'calender-filled' : ''}">
                                            <p:ajax event="dateSelect" update="@this" />
                                        </p:calendar>
                                    </div>
                                    <div class="p-col-6">
                                        <p:calendar id="filterDateToEvasione" readonlyInput="false"
                                                    showOn="button"
                                                    onkeypress="if(!searchOnEnter(event, 'searchButton')) return false;"
                                                    pattern="dd/MM/yyyy" mask="true"
                                                    locale="it" navigator="true" popupIconOnly="true"
                                                    placeholder="#{msg.mailManagerDateToReqlist}"
                                                    onblur="check_date(this)" value="#{bean.dateToEvasion}" styleClass="#{bean.dateToEvasion ne null ? 'calender-filled' : ''}">
                                            <p:ajax event="dateSelect" update="@this" />
                                        </p:calendar>
                                    </div>
                                    <div class="p-col-12 search-panel-btns" style="text-align: center;">
                                        <p:commandButton value="#{ff:upper(msg.requestPrintSelectTemplate)}"
                                                         style="background: #00CC52;"
                                                         id="searchButtonFilter"
                                                         action="#{bean.prepareToModifyTranscriptionTab}"
                                                         onclick="checkDates();"
                                                         update=":transcriptionTable"
                                                         oncomplete="PF('panelSetting').getJQ().hide();"/>
                                        <p:commandButton id="manageReestablishBtn" style="width: auto;"
                                                         value="#{ff:upper(msg.mailManageReestablish)}"
                                                         update=":form:settingPanel "
                                                         actionListener="#{bean.reset}"
                                                         oncomplete="loadTranscriptionTab();PF('panelSetting').getJQ().hide();"/>
                                    </div>
                                </div>
                                <p:overlayPanel id="stateSelectCheckboxPanel" my="left top" at="right bottom"
                                                widgetVar="stateSelectCheckboxWV" for="statuses" style="width:200px;left: 1650px !important;" styleClass="settingsBlock">

                                    <p:dataTable id="stateSelectCheckboxPanelDataTable" var="state" emptyMessage="#{msg.noRecordsFound}"
                                                 value="#{bean.stateWrappers}" selectionMode="single"
                                                 selection="#{bean.selectedStateForFilter}" rowKey="#{state.value}">
                                        <p:ajax event="rowSelect"
                                                listener="#{bean.selectStateForFilter}"
                                                update="stateSelectCheckboxPanelDataTable"/>
                                        <p:column style="width:18px">
                                            <f:facet name="header">
                                                <p:selectBooleanCheckbox value="#{bean.selectedAllStatesOnPanel}">
                                                    <p:ajax update="stateSelectCheckboxPanelDataTable" event="change"/>
                                                    <p:ajax event="change" update="statuses" oncomplete="applyClickListener('statuses', 'stateSelectCheckboxWV');"/>
                                                </p:selectBooleanCheckbox>
                                            </f:facet>
                                            <p:selectBooleanCheckbox value="#{state.selected}">
                                                <p:ajax update="stateSelectCheckboxPanelDataTable" event="change"/>
                                                <p:ajax event="change" update="statuses" oncomplete="applyClickListener('statuses', 'stateSelectCheckboxWV');"/>
                                            </p:selectBooleanCheckbox>
                                        </p:column>
                                        <p:column headerText="#{msg.status}">
                                            <h:outputText value="#{state.value}"/>
                                        </p:column>
                                    </p:dataTable>
                                </p:overlayPanel>
                            </p:panel>
                        </div>
                    </div>
                </div>
				<p:panel id="table_div">
                    <p:dataTable id="transcriptionTable" value="#{bean.requestListTranscription}" emptyMessage="#{msg.noRecordsFound}"
                                 var="req" rows="15" lazy="true" style="margin-top:30px;" styleClass="request-table"
                                 paginator="true" paginatorAlwaysVisible="true" rowIndexVar="rowId"
                                 paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink}
                                     	{LastPageLink} {RowsPerPageDropdown}"
                                 rowsPerPageTemplate="15, 30, 45, 60">
                        <p:column headerText="#{ff:upper(msg.requestDate)}" style="width: 5vw;min-width: 120px;position: relative;">
                            <h:outputText value="#{req.createDate}" converter="dateTimeConverter" style="color:#003871;font-weight: bold !important;"/>
                            <br/>
                            <h:outputText value="#{req.createDate}" converter="timeConverter" style="color:#003871;"/>
                            <br/>
                            <br/>
                            <h:outputText value="#{not empty req.request.stateDescription ? ff:upper(req.request.stateDescription) : ''}"
                                          styleClass="#{(req.request.stateDescription eq 'Inserita' or ff:upper(req.request.stateDescription) eq 'PROFILATA')
                        ? 'status-icon status-green' : (req.request.stateDescription eq 'In lavorazione' ? 'status-icon status-yellow' :((req.request.stateDescription eq 'Da inviare' or ff:upper(req.request.stateDescription) eq 'EST. DA INVIARE') ? 'status-icon status-navy' : ((req.request.stateDescription eq 'Sospesa' or ff:upper(req.request.stateDescription) eq 'ESTERNA')? 'status-icon status-magenta' : (req.request.stateDescription eq 'Evasa' ? 'status-icon status-red': (req.request.stateDescription eq 'Inviata allo SDI' ? 'status-icon status-cyan': ((req.request.stateDescription eq 'Fatturata' or ff:upper(req.request.stateDescription) eq 'FATTURATA OLD') ? 'status-icon state-blue': (req.request.stateDescription eq 'Spedita' ? 'status-icon state-blue' : (req.request.stateDescription eq 'Annullata' ? 'status-icon state-brown' : ''))))))))}"/>
                        </p:column>
                        <p:column headerText="#{ff:upper(msg.requestListClient)}" style="width: 9vw;min-width: 159px;position: relative">
                            <p:outputPanel style="text-align:center;">
                                <h:outputText value="#{req.clientName}"/>
                            </p:outputPanel>
                            <br/>
                            <div style="height :20px; position:absolute; left: 7px; bottom: 7px;">
                                <p:graphicImage id="info-#{loop.index}" url="/resources/images/tooltip.png" style="width:20px; height:20px;"
                                                rendered="#{not empty req.request.mail and (not empty req.request.clientFiduciary or not empty req.request.managerId)}" />
                                <p:tooltip for="info-#{loop.index}" styleClass="custom-design-tooltip">
                                    <h:outputText value="#{ff:upper(msg.requestManagers)}" style="font-weight:bold;color:#003871;"/>
                                    <br />
                                    <h:outputText value="#{req.request.haveManagers()}" escape="false" rendered="#{not empty req.request.haveManagers()}"/>
                                    <br />
                                    <h:outputText value="#{ff:upper(msg.requestTrustees)}" style="font-weight:bold;color:#003871;" />
                                    <br />
                                    <h:outputText value="#{req.request.getClientNameProfessional(req.request.clientFiduciary)}" escape="false"
                                                  rendered="#{not empty req.request.clientFiduciary}" style="color:#003871;"/>
                                </p:tooltip>
                            </div>
                        </p:column>
                        <p:column headerText="#{ff:upper(msg.requestListServiceCap)}" style="width: 13.1vw;min-width: 180px; position:relative;" >
                            <!-- <h:outputText value="#{req.actType}"/> -->
                            <p:outputPanel style="margin-left: 20px;text-align: left; padding-top: 15px;">
	                            <p:outputPanel id="servicesColumn"
	                                           rendered="#{req.request.serviceName eq null}"
	                                           style="background-color: transparent;width: inherit;"/>
	                            <p:outputPanel>
	                                <h:outputText styleClass="#{bean.getItemIconStyleClass(req.request.requestType.id)}" style="display: inline-flex;margin-right: 5px;" />
	                                <h:outputText id="requestTypeName" value="#{req.request.requestTypeName}" style="vertical-align: top;font-weight: bold !important;" 
	                                		  rendered="#{req.request.requestTypeName ne null}"/>
	                            </p:outputPanel>
	                            <h:outputText id="service" value="#{req.request.serviceName}" rendered="#{req.request.serviceName ne null}"/>
	
	                            <br/>
	                            <div style="height :20px; position:absolute; left: 7px; bottom: 7px;">
	                                <p:graphicImage id="multipleservice-#{loop.index}" url="/resources/images/tooltip.png"
	                                                style="width:20px; height:20px;"  rendered="#{not empty req.request.multipleServices 
	                                                	or not empty req.textInVisura}" />
	                                <p:tooltip for="multipleservice-#{loop.index}" styleClass="custom-design-tooltip" 
	                                				rendered="#{not empty req.request.multipleServices or not empty req.textInVisura}">
	                                    <ui:repeat var="ele" value="#{req.request.multipleServices}" varStatus="service">
	                                        <h:outputText value="#{ele}" escape="false" style="color:#003871;margin-left: 24px;"/>
	                                        <br />
	                                    </ui:repeat>
	                                    <h:outputText value="&lt;br/&gt;" escape="false" 
	                                    			  rendered="#{not empty req.request.multipleServices and not empty req.textInVisura}"/>
	                                    <h:outputText id="visuraText" value="#{req.textInVisura}" 
	                                    			  rendered="#{not empty req.textInVisura}"
	                                                  style="color:#003871;margin-left: 24px;"/>
	                                </p:tooltip>
	                            </div>
                                <!-- <br/> -->
                                <div style="min-height: 30px; position:relative; left: -18px; bottom: -10px;">
                                    <p:graphicImage id="special-formality-#{loop.index}" url="/resources/images/tooltip.png" 
                                    				style="width:20px;height:20px;"
                                                    rendered="#{not empty req.request.specialFormality and not empty req.request.specialFormality.textInVisura}" />
                                    <p:tooltip for="special-formality-#{loop.index}" styleClass="custom-design-tooltip">
                                        <h:outputText value="#{req.request.specialFormality.textInVisura}" style="color:#003871;"/>
                                    </p:tooltip>
                                </div>
	                        </p:outputPanel>
                        </p:column>
                        
                        <p:column headerText="#{ff:upper(msg.nominative)}" style="width: 9vw;min-width: 159px;">
                            <h:outputText value="#{req.getSubjectName((req.request.requestSubjects != null and req.request.requestSubjects.size() gt 0 ? req.request.requestSubjects.get(0) : null))}"/>
                            <br/>
                            <h:outputText value="#{req.getFiscalCodeVATNumber((req.request.requestSubjects != null and req.request.requestSubjects.size() gt 0 ? req.request.requestSubjects.get(0) : null))}" style="color:#003871"/>
                            <br/>
                            <div style="height :20px; position:absolute;">
                                <p:graphicImage id="subject-#{loop.index}" url="/resources/images/tooltip.png" style="width:20px; height:20px;"
                                                rendered="#{req.request.requestSubjects != null and req.request.requestSubjects.size() gt 1}"/>
                                <p:tooltip for="subject-#{loop.index}" styleClass="custom-design-tooltip" rendered="#{req.request.requestSubjects != null and req.request.requestSubjects.size() gt 1}">
                                    <p:outputPanel>
                                        <ui:repeat value="#{req.request.requestSubjects}" var="requestSubject" offset="1">
                                            <h:outputText value="#{req.getSubjectName(requestSubject)}" style="font-weight:bold;color:#003871;"/>
                                            <br/>
                                            <h:outputText value="#{req.getFiscalCodeVATNumber(requestSubject)}" style="color:#003871"/>
                                            <br/>
                                        </ui:repeat>
                                    </p:outputPanel>
                                </p:tooltip>
                            </div>
                        </p:column>
                        
                        <p:column headerText="#{ff:upper(msg.requestListCorservatoryName)}" style="width: 9vw;min-width: 159px;position: relative" >
                            <p:outputPanel style="text-align:center;">
                                <h:outputText value="#{req.conservatory}"/>
                            </p:outputPanel>
                        </p:column>
                        
                        <p:column headerText="#{ff:upper(msg.requestListCurrentOperator)}" style="width: 8.3vw;min-width: 177px;">
                            <f:facet name="header">
                                <h:outputText value="#{ff:upper(msg.requestListCurrentOperator)}"
                                              rendered="#{not bean.canSeeAllUsers}" style="font-size: medium;font-weight: normal;"/>
                                <p:commandButton id="userSelectCheckboxShow"
                                                 rendered="#{bean.canSeeAllUsers}"
                                                 onclick="PF('userSelectCheckboxWV').show(); event.stopImmediatePropagation();"
                                                 value="#{ff:upper(msg.requestListCurrentOperator)}" type="button" style="font-size: 14px;font-weight: normal;"/>
                            </f:facet>
                            <h:outputText value="#{req.request.userName}"/>
                        </p:column>
                        <p:column headerText="#{ff:upper(msg.cert)}" style="width: 4vw;min-width: 100px;text-align: center;" >
                            <h:outputText value="#{not empty req.manageCertification ? msg.yes : ''}"/>
                        </p:column>
                        <p:column style="width: 4vw;min-width: 81px;" headerText="#{ff:upper(msg.requestListOpenMail)}">
			                <p:outputPanel style="#{not req.request.external and empty req.request.mail.id and not req.request.haveAllegatiDocuments ? 'text-align: center;' : 'display: flex;'}">
			                    <p:commandButton id="mailBtn" styleClass="richiesta-da-mail-icon" action="#{bean.openRequestMail}"
			                                     style="color: transparent;background-color: transparent;border-color: transparent;margin: 0 auto;cursor: pointer;"
			                                     rendered="#{not empty req.request.mail}">
			                        <f:setPropertyActionListener value="#{req.request.mail.id}" target="#{bean.entityEditId}"/>
			                    </p:commandButton>
			                    <p:tooltip for="mailBtn" styleClass="custom-design-tooltip">
			                    	<h:outputText value="#{req.request.mailSubject}"
                                                          style="font-weight:bold;color:#003871;"/>
			                    </p:tooltip>
			                    
			                    <h:outputText id="externalUserIcon" rendered="#{req.request.external and not req.request.haveAllegatiDocuments}"
                                                      style="margin: 0 auto;" styleClass="richiesta-da-clienti-icon" />
                                <p:tooltip for="externalUserIcon" styleClass="custom-design-tooltip" escape="false"
                                           rendered="#{req.request.external and not req.request.haveAllegatiDocuments}">
                                    <h:outputText value="#{req.request.createUserFullName}"
                                                  style="font-weight:bold;color:#003871;" escape="false"/>
                                </p:tooltip>
			
			                    <p:outputPanel rendered="#{req.request.external and req.request.haveAllegatiDocuments}" 
			                    					style="display: flex;margin-left: calc( 50% - 15px );">
                                    <p:commandButton id="externalUserIconA"  styleClass="richiesta-da-clienti-icon" 
                                    				 action="#{bean.loadAllegatiDocuments}" update="requestDocs"
                                                     style="color: transparent !important;background-color: transparent !important;
                                                     	border-color: transparent !important;margin: 0 auto;cursor: pointer;"
                                                     oncomplete="PF('documentDialog').show();">
                                        <f:setPropertyActionListener value="#{req.request.id}" target="#{bean.entityEditId}"/>
                                    </p:commandButton>
                                    <p:tooltip for="externalUserIconA" styleClass="custom-design-tooltip" escape="false">
                                        <h:outputText value="#{req.request.createUserFullName}"
                                                      style="font-weight:bold;color:#003871;" escape="false"/>
                                    </p:tooltip>
                                    <h:outputText value="A"  style="width: 19px;height: 20px;background-color: #003871;
                                    				  border-radius: 50%;color: white;display: block;margin-top: -10px;margin-left: -6px;text-align: center;" />
                                </p:outputPanel>
                                
                                <p:graphicImage id="internalUserIcon" url="/resources/images/richiesta-da-operatore-getesi.png"
                                                style="height :28px;"  
                                                rendered="#{not req.request.external and empty req.request.mail.id and not req.request.haveAllegatiDocuments}" />
                                <p:tooltip for="internalUserIcon" styleClass="custom-design-tooltip" escape="false"
                                           rendered="#{not empty req.request.createUserFullName}">
                                    <h:outputText value="#{req.request.createUserFullName}"
                                                  style="font-weight:bold;color:#003871;" escape="false"/>
                                </p:tooltip>
			
			                   	<p:outputPanel style="display: flex;#{empty req.request.mail.id ? 'margin-left: 38%;' : ''}"
			                   				rendered="#{not req.request.external and empty req.request.mail.id and req.request.haveAllegatiDocuments}">
	                                <p:commandButton id="internalUserIconA" value="G" action="#{bean.loadAllegatiDocuments}" 
	                                				 update="requestDocs" styleClass="g-btn" 
	                                				 style="background-color: transparent !important;display: block;
	                                				 	width: 24px;height: 24px;border: 2px solid;border-radius: 50%;color: #003871;margin: 0 auto;cursor: pointer;"
	                                                 oncomplete="PF('documentDialog').show();">
	                                    <f:setPropertyActionListener value="#{req.request.id}" target="#{bean.entityEditId}"/>
	                                </p:commandButton>
	                                <p:tooltip for="internalUserIconA" styleClass="custom-design-tooltip" escape="false"
	                                           rendered="#{not empty req.request.createUserFullName}">
	                                    <h:outputText value="#{req.request.createUserFullName}"
	                                                  style="font-weight:bold;color:#003871;" escape="false"/>
	                                </p:tooltip>
	                                <h:outputText value="A"  
	                                			style="width: 19px;height: 20px;background-color: #003871;border-radius: 50%;
	                                			color: white;display: block;margin-top: -10px;margin-left: -6px;text-align: center;" />
                               	</p:outputPanel> 
			                </p:outputPanel>
			            </p:column>

			            <p:column styleClass="action_midle_column al-cen-fx" headerText="#{ff:upper(msg.requestListDocuments)}" style="width: 4vw;min-width: 81px;">
			                <p:outputPanel style="display: flex;" rendered="#{req.request.haveDocuments}">
			                   <p:outputPanel style="display: flex;">
			                       <p:commandButton styleClass="attachment-icon" action="#{bean.loadRequestDocuments}" update="requestDocs"
			                                        style="color: transparent !important;background-color: transparent !important;
			                                        	border-color: transparent !important;margin: 0 auto;cursor: pointer;"
			                                        oncomplete="PF('documentDialog').show();">
			                           <f:setPropertyActionListener value="#{req.request.id}" target="#{bean.entityEditId}"/>
			                       </p:commandButton>
			                       <h:outputText value="#{req.request.documentsCount}" 
			                       				 style="width: 19px;height: 20px;background-color: #003871;border-radius: 50%;
			                       					color: white;display: block;margin-top: -10px;margin-left: -6px;text-align: center;" />
			                   </p:outputPanel>
			               </p:outputPanel>
			            </p:column>
			            
                        <p:column headerText="#{ff:upper(msg.requestListManage)}" style="width: 4vw;min-width: 81px;" >
	                        <p:commandButton id="gestisci-btn" value="#{ff:upper(msg.requestListManage)}" 
	                        				 class="action-btn" style="display: none;"
	                                         action="#{bean.manageRequest}">
	                            <f:setPropertyActionListener value="#{req.request.id}"
	                                                         target="#{bean.entityEditId}"/>
	                        </p:commandButton>
	                        <p:commandButton id="operational_flow-btn" value="#{ff:upper(msg.requestListOperationalFLow)}"
	                                         class="action-btn" style="display: none;"
	                                         action="#{bean.openTranscriptionManagement}" ajax="false">
	                            <f:setPropertyActionListener value="#{req.request.id}"
	                                                         target="#{bean.entityEditId}"/>
	                        </p:commandButton>
	                        <p:commandButton id="elimina-btn" value="#{ff:upper(msg.roleCanDelete)}" class="action-btn" style="display: none;"
	                                         oncomplete="PF('dlg2').show()" disabled="#{!bean.canDelete}">
	                            <f:setPropertyActionListener value="#{req.request.id}"
	                                                         target="#{bean.entityDeleteId}"/>
	                        </p:commandButton>
                            <div class="icon-block" style="justify-content: center;">
                                <p:commandLink id="actionPnl" global="false" style="outline: none;" immediate="true" readonly="true">
                                    <i class="menu-dots-icon" style="font-size: x-large;"
                                       onclick="highlightRow(#{rowId});document.getElementById('transcriptionTable:#{rowId}:actionPnl').focus();" />
                                </p:commandLink>
                                
                                <p:tooltip for="actionPnl" hideEvent="blur" showEvent="focus" styleClass="actionPnl-tooltip">
                                    <p:outputPanel id="actionGrid" styleClass="actionPnl-panel">
                                        <p:commandButton value="#{ff:upper(msg.requestListManage)}" styleClass="action-btn" 
                                    				 onclick="highlightRow(#{rowId});document.getElementById('transcriptionTable:#{rowId}:gestisci-btn').click()"
                                                     disabled="#{!bean.canEdit}" 
                                                     style="width:120px;margin-left: 5px; margin-right: 5px; margin-top:5px; margin-bottom:8px;" 
                                                     rendered="#{!req.request.visibleExternal or (req.request.visibleExternal and req.request.lastRequestManageBy eq 1)}">
                                        </p:commandButton>
                                        <p:commandButton value="#{ff:upper(msg.requestListOperationalFLow)}" 
                                                         class="action-btn" onclick="document.getElementById('transcriptionTable:#{rowId}:operational_flow-btn').click()"
                                                         update="@form" style="width:120px; margin-left: 5px; margin-right: 5px; margin-bottom:8px;">
                                        </p:commandButton>
                                        <p:commandButton value="#{ff:upper(msg.roleCanDelete)}" class="action-btn" 
                                        				 onclick="document.getElementById('transcriptionTable:#{rowId}:elimina-btn').click()"
                                                         rendered="#{!req.request.visibleExternal or (req.request.visibleExternal and req.request.lastRequestManageBy eq 1)}" 
                                                         disabled="#{!bean.canDelete}" style="width:120px; margin-left: 5px; margin-right: 5px; margin-bottom:5px;">
                                        </p:commandButton>
                                    </p:outputPanel>
                                </p:tooltip>
                            </div>
                    	</p:column>
                    </p:dataTable>
                    <p:overlayPanel id="userSelectCheckboxPanel" my="left top" at="left bottom"
                                    widgetVar="userSelectCheckboxWV" for="transcriptionTable:userSelectCheckboxShow"
                                    rendered="#{bean.canSeeAllUsers}"
                                    onHide="loadTranscriptionTab();" dynamic="true" style="width:300px">
                        <p:dataTable id="userSelectCheckboxPanelDataTable" var="state" emptyMessage="#{msg.noRecordsFound}"
                                     value="#{bean.userWrappers}" selectionMode="single"
                                     selection="#{bean.selectedUserForFilter}" rowKey="#{state.value}">

                            <p:ajax event="rowSelect"
                                    listener="#{requestListBean.selectUserForFilter}"
                                    update="userSelectCheckboxPanelDataTable"/>

                            <p:column style="width:18px">
                                <f:facet name="header">
                                    <p:selectBooleanCheckbox value="#{bean.selectedAllUsersOnPanel}">
                                        <p:ajax update="userSelectCheckboxPanelDataTable" event="change"/>
                                    </p:selectBooleanCheckbox>
                                </f:facet>
                                <p:selectBooleanCheckbox value="#{state.selected}">
                                    <p:ajax update="userSelectCheckboxPanelDataTable" event="change"/>
                                </p:selectBooleanCheckbox>
                            </p:column>

                            <p:column headerText="#{msg.mailManagerAssignUsers}">
                                <h:outputText value="#{state.value}"/>
                            </p:column>
                        </p:dataTable>
                    </p:overlayPanel>
                </p:panel>
            </div>

            <div id="content_tab3" class="hide" style="display: none;">
                <p:remoteCommand name="loadCertificationTab" action="#{bean.loadCertificationTab}" update="certification_table_div :certificationTable"/>
                <div class="p-col-12">
                    <div class="p-formgroup-inline alignEnd">
                        <div class="p-field">
                            <p:inputText value="#{bean.certificationSearchLastName}" placeholder="#{ff:upper(msg.requestEditSubjectListName)}" id="certificationSearchLastName" />
                        </div>

                        <div class="p-field">
                            <p:inputText value="#{bean.certificationSearchFiscalCode}" placeholder="#{ff:upper(msg.requestFiscalCodeCap)}" id="certificationSearchFiscalCode" />
                        </div>

                        <div class="p-field">
                            <p:commandButton
                                    style="" id="certificationSearchButton" styleClass="ui-button-warning-icon searchPanelButton"
                                    action="#{bean.prepareToModifyCertificationTab}" icon="ui-icon ui-icon-search pi pi-search"
                                    update=":certificationTable" />
                        </div>
                        <div class="settingsBlock" style="margin-bottom: 10px;">
                            <p:commandButton id="certificationSettingButton" onclick="certificationTogglePanel();"
                                             type="button" style="float: right;"
                                             styleClass="ui-button-warning-icon searchPanelButton"
                                             icon="ui-icon ui-icon-search pi pi-sliders-h"/>

                            <script type="text/javascript">
                                // <![CDATA[
                                $("body").click(function(e){
                                    var target = $(e.target);
                                    if (!target.parents('#certificationSettingButton').length && !target.parents('#certificationSettingPanel').length && !target.parents('#certificationTabClient_panel').length
                                        && !target.parents('#certificationManager_panel').length && !target.parents('#certificationOffice_panel').length
                                        && !target.parents('#stateSelectCheckboxPanel').length && !target.parents('#certificationFiduciario_panel').length
                                        && !target.parents('#ui-datepicker-div').length && !target.parents('.ui-datepicker-header').length) {
                                        PF('certificationPanelSetting').getJQ().hide();
                                    }

                                });
                                function certificationTogglePanel() {
                                    PF('certificationPanelSetting').getJQ().toggle();
                                }
                                jQuery(document).ready(function() {
                                    PF('certificationPanelSetting').getJQ().hide();
                                });
                                // ]]>
                            </script>

                            <p:panel id="certificationSettingPanel" widgetVar="certificationPanelSetting" closable="true"
                                     toggleable="true" style="display: none;">
                                <div class="p-grid">
                                    <div class="p-col-12" style="text-align: center;">
                                        <h2>Filtra per</h2>
                                    </div>
                                    <div class="p-col-6">
                                        <div style="">
                                            <h:outputText style="color: #003871;"
                                                          value=""/>
                                        </div>
                                    </div>
                                    <div class="p-col-6">
                                        <div style="">
                                            <h:outputText style="color: #003871;"
                                                          value="#{ff:upper(msg.status)}:"/>
                                        </div>
                                    </div>
                                    <div class="p-col-6">
                                        <p:selectOneMenu id="certificationTabClient" value="#{bean.selectedClientId}"
                                                         label="#{msg.requestClient}"
                                                         style="width: calc( 100% - 5px);" styleClass="#{bean.selectedClientId ne null ? 'select-one-menu' : ''}">
                                            <f:selectItem itemLabel="#{ff:upper(msg.requestListClient)}"
                                                          itemValue="#{null}"
                                                          noSelectionOption="true"/>
                                            <f:selectItems value="#{bean.clients}"/>
                                            <p:ajax event="itemSelect" update="@this"/>
                                        </p:selectOneMenu>
                                    </div>

                                    <div class="p-col-6">
                                        <p:selectCheckboxMenu id="certificationStatuses" style="width: 100%;min-height: 38px;" multiple="true" label="" value="#{bean.selectedStates}"
                                                              styleClass="#{bean.getStateSelected() gt 0 ? ' select-checkbox' : ''}">
                                            <f:selectItems value="#{bean.stateWrappers}" var="state" itemValue="#{state}"
                                                           itemLabel="#{state.value}"/>
                                        </p:selectCheckboxMenu>
                                    </div>

                                    <div class="p-col-6">
                                        <p:selectOneMenu id="certificationManager" value="#{bean.managerClientFilterid}"
                                                         style="width: calc( 100% - 5px);" styleClass="#{bean.managerClientFilterid ne null ? 'select-one-menu' : ''}">
                                            <f:selectItem itemLabel="#{ff:upper(msg.clientManager)}"
                                                          itemValue="#{null}"
                                                          noSelectionOption="true"/>
                                            <f:selectItems value="#{bean.managerClients}"/>
                                            <p:ajax event="itemSelect" update="@this"/>
                                        </p:selectOneMenu>
                                    </div>
                                    <div class="p-col-6">
                                        <p:selectOneMenu id="certificationFiduciario" value="#{bean.fiduciaryClientFilterId}"
                                                         style="width: calc( 100% - 5px);" styleClass="#{bean.fiduciaryClientFilterId ne null ? 'select-one-menu' : ''}">
                                            <f:selectItem itemLabel="#{ff:upper(msg.mailTrust)}"
                                                          itemValue="#{null}"
                                                          noSelectionOption="true"/>
                                            <f:selectItems value="#{bean.fiduciaryClients}"/>
                                            <p:ajax event="itemSelect" update="@this"/>
                                        </p:selectOneMenu>
                                    </div>
                                    <div class="p-col-6">
                                        <p:selectOneMenu id="certificationOffice" value="#{bean.aggregationFilterId}"
                                                         style="width: calc( 100% - 5px);" styleClass="#{bean.aggregationFilterId ne null ? 'select-one-menu' : ''}">
                                            <f:selectItem itemLabel="#{msg.subjectViewFormalityConservatoryCap}"
                                                          itemValue="#{null}"
                                                          noSelectionOption="true"/>
                                            <f:selectItems value="#{bean.landAggregations}"/>
                                            <p:ajax event="itemSelect" update="@this"/>
                                        </p:selectOneMenu>
                                    </div>
                                    <div class="p-col-6">
                                        <p:calendar id="certificationFilterExpiration" readonlyInput="false" showOn="button"
                                                    onkeypress="if(!searchOnEnter(event, 'certificationSearchButton')) return false;"
                                                    pattern="dd/MM/yyyy" mask="true"
                                                    locale="it" navigator="true" popupIconOnly="true"
                                                    placeholder="#{msg.expirationDateCap}"
                                                    value="#{bean.dateExpiration}" styleClass="#{bean.dateExpiration ne null ? 'calender-filled' : ''}">
                                            <p:ajax event="dateSelect" update="@this" />
                                        </p:calendar>
                                    </div>
                                    <div class="p-col-12">
                                        <div style="">
                                            <h:outputText style="color: #003871;"
                                                          value="#{ff:upper(msg.requestListDateOfInput)}:"/>
                                        </div>
                                    </div>
                                    <div class="p-col-6">
                                        <p:calendar id="certificationFilterDateFrom" readonlyInput="false"
                                                    showOn="button"
                                                    onkeypress="if(!searchOnEnter(event, 'certificationSearchButton')) return true;"
                                                    pattern="dd/MM/yyyy" mask="true" locale="it"
                                                    navigator="true"
                                                    popupIconOnly="true"
                                                    onblur="setTimeout(function(){checkDates();}, 500);check_date(this);"
                                                    value="#{bean.dateFrom}"
                                                    placeholder="#{msg.mailManagerDateFromReqlist}" styleClass="#{bean.dateFrom ne null ? 'calender-filled' : ''}">
                                            <p:ajax event="dateSelect" update="@this" />
                                        </p:calendar>
                                        <div id="certificationhyphen"></div>
                                    </div>
                                    <div class="p-col-6">
                                        <p:calendar id="certificationFilterDateTo" readonlyInput="false" showOn="button"
                                                    onkeypress="if(!searchOnEnter(event, 'certificationSearchButton')) return false;"
                                                    pattern="dd/MM/yyyy" mask="true"
                                                    locale="it" navigator="true" popupIconOnly="true"
                                                    placeholder="#{msg.mailManagerDateToReqlist}"
                                                    onblur="check_date(this)" value="#{bean.dateTo}" styleClass="#{bean.dateTo ne null ? 'calender-filled' : ''}">
                                            <p:ajax event="dateSelect" update="@this" />
                                        </p:calendar>
                                    </div>
                                    <div class="p-col-12">
                                        <div style="">
                                            <h:outputText style="color: #003871;"
                                                          value="#{ff:upper(msg.requestListDateOfEvasion)}:"/>
                                        </div>
                                    </div>
                                    <div class="p-col-6">
                                        <p:calendar id="certificationFilterDateFromEvasione" readonlyInput="false"
                                                    showOn="button"
                                                    onkeypress="if(!searchOnEnter(event, 'certificationSearchButton')) return true;"
                                                    pattern="dd/MM/yyyy" mask="true" locale="it"
                                                    navigator="true"
                                                    popupIconOnly="true"
                                                    onblur="setTimeout(function(){checkDates();}, 500);check_date(this);"
                                                    value="#{bean.dateFromEvasion}"
                                                    placeholder="#{msg.mailManagerDateFromReqlist}" styleClass="#{bean.dateFromEvasion ne null ? 'calender-filled' : ''}">
                                            <p:ajax event="dateSelect" update="@this" />
                                        </p:calendar>
                                    </div>
                                    <div class="p-col-6">
                                        <p:calendar id="certificationFilterDateToEvasione" readonlyInput="false"
                                                    showOn="button"
                                                    onkeypress="if(!searchOnEnter(event, 'certificationSearchButton')) return false;"
                                                    pattern="dd/MM/yyyy" mask="true"
                                                    locale="it" navigator="true" popupIconOnly="true"
                                                    placeholder="#{msg.mailManagerDateToReqlist}"
                                                    onblur="check_date(this)" value="#{bean.dateToEvasion}" styleClass="#{bean.dateToEvasion ne null ? 'calender-filled' : ''}">
                                            <p:ajax event="dateSelect" update="@this" />
                                        </p:calendar>
                                    </div>
                                    <div class="p-col-12 search-panel-btns" style="text-align: center;">
                                        <p:commandButton value="#{ff:upper(msg.requestPrintSelectTemplate)}"
                                                         style="background: #00CC52;"
                                                         id="certificationSearchButtonFilter"
                                                         action="#{bean.prepareToModifyCertificationTab}"
                                                         onclick="checkDates();"
                                                         update=":certificationTable"
                                                         oncomplete="PF('certificationPanelSetting').getJQ().hide();"/>
                                        <p:commandButton id="certificationManageReestablishBtn" style="width: auto;"
                                                         value="#{ff:upper(msg.mailManageReestablish)}"
                                                         update=":form:certificationSettingPanel"
                                                         actionListener="#{bean.reset}"
                                                         oncomplete="loadCertificationTab();PF('certificationPanelSetting').getJQ().hide();"/>
                                    </div>
                                </div>
                            </p:panel>
                        </div>
                    </div>
                </div>
                <p:panel id="certification_table_div">
                    <p:dataTable id="certificationTable" value="#{bean.certificationRequestModel}" emptyMessage="#{msg.noRecordsFound}"
                                 var="reqCert" rows="15" lazy="true" style="margin-top:30px;" styleClass="request-table"
                                 paginator="true" paginatorAlwaysVisible="true" rowIndexVar="rowIdCert"
                                 paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink}
                                     	{LastPageLink} {RowsPerPageDropdown}"
                                 rowsPerPageTemplate="15, 30, 45, 60">
                        <p:column headerText="#{msg.mailManagerEmailReceiveDate}" style="width: 5vw;min-width: 120px;">
                            <h:outputText value="#{reqCert.createDate}" converter="dateTimeConverter" style="color:#003871;font-weight: bold !important;"/>
                            <br/>
                            <h:outputText value="#{reqCert.createDate}" converter="timeConverter" style="color:#003871;"/>
                            <br/>
                            <br/>
                            <h:outputText value="#{not empty reqCert.stateDescription ? ff:upper(reqCert.stateDescription) : ''}"
                                          styleClass="#{(reqCert.stateDescription eq 'Inserita' or ff:upper(reqCert.stateDescription) eq 'PROFILATA')
                        ? 'status-icon status-green' : (reqCert.stateDescription eq 'In lavorazione' ? 'status-icon status-yellow' :((reqCert.stateDescription eq 'Da inviare' or ff:upper(reqCert.stateDescription) eq 'EST. DA INVIARE') ? 'status-icon status-navy' : ((reqCert.stateDescription eq 'Sospesa' or ff:upper(reqCert.stateDescription) eq 'ESTERNA')? 'status-icon status-magenta' : (reqCert.stateDescription eq 'Evasa' ? 'status-icon status-red': (reqCert.stateDescription eq 'Inviata allo SDI' ? 'status-icon status-cyan': ((reqCert.stateDescription eq 'Fatturata' or ff:upper(reqCert.stateDescription) eq 'FATTURATA OLD') ? 'status-icon state-blue': (reqCert.stateDescription eq 'Spedita' ? 'status-icon state-blue' : (reqCert.stateDescription eq 'Annullata' ? 'status-icon state-brown' : ''))))))))}"/>
                        </p:column>
                        <p:column headerText="#{ff:upper(msg.requestListClient)}" style="width: 9vw;min-width: 159px;position: relative">
                            <p:outputPanel style="text-align:center;">
                                <h:outputText value="#{reqCert.clientName}"/>
                            </p:outputPanel>
                            <br/>
                            <div style="height :20px; position:absolute; left: 7px; bottom: 7px;">
                                <p:graphicImage id="info-#{loop.index}" url="/resources/images/tooltip.png" style="width:20px; height:20px;"
                                                rendered="#{not empty reqCert.mail and (not empty reqCert.clientFiduciary or not empty reqCert.managerId)}" />
                                <p:tooltip for="info-#{loop.index}" styleClass="custom-design-tooltip">
                                    <h:outputText value="#{ff:upper(msg.requestManagers)}" style="font-weight:bold;color:#003871;"/>
                                    <br />
                                    <h:outputText value="#{reqCert.haveManagers()}" escape="false" rendered="#{not empty reqCert.haveManagers()}"/>
                                    <br />
                                    <h:outputText value="#{ff:upper(msg.requestTrustees)}" style="font-weight:bold;color:#003871;" />
                                    <br />
                                    <h:outputText value="#{reqCert.getClientNameProfessional(reqCert.clientFiduciary)}" escape="false"
                                                  rendered="#{not empty reqCert.clientFiduciary}" style="color:#003871;"/>
                                </p:tooltip>
                            </div>
                        </p:column>
                        <p:column headerText="#{ff:upper(msg.requestListServiceCap)}" style="width: 11vw;min-width: 170px;" >
                            <!-- <h:outputText value="#{req.actType}"/> -->
                            <p:outputPanel style="margin-left: 20px;text-align: left;">
                                <p:outputPanel id="certServicesColumn"
                                               rendered="#{reqCert.serviceName eq null}"
                                               style="background-color: transparent;width: inherit;"/>
                                <p:outputPanel>
                                    <h:outputText styleClass="#{bean.getItemIconStyleClass(reqCert.requestType.id)}" style="display: inline-flex;margin-right: 5px;" />
                                    <h:outputText id="certRequestTypeName" value="#{reqCert.requestTypeName}" style="vertical-align: top;font-weight: bold !important;"
                                                  rendered="#{reqCert.requestTypeName ne null}"/>
                                </p:outputPanel>
                                <h:outputText id="certService" value="#{reqCert.serviceName}" rendered="#{reqCert.serviceName ne null}"/>

                                <br/>
                <h:panelGroup layout="block" style="height :20px; position:absolute; left: 7px; bottom: 7px;">
                                    <p:graphicImage id="multipleservice-#{loop.index}" url="/resources/images/tooltip.png"
                                                    style="width:20px;height:20px;margin-top: 22px;margin-left: -18px;position: absolute;" />
                                    <p:tooltip for="multipleservice-#{loop.index}" styleClass="custom-design-tooltip"
                                               rendered="#{not empty reqCert.multipleServices or not empty reqCert.textInVisura}">
                                        <ui:repeat var="ele" value="#{reqCert.multipleServices}" varStatus="service">
                                            <h:outputText value="#{ele}" escape="false" style="color:#003871;margin-left: 24px;"/>
                                            <br />
                                        </ui:repeat>
                                        <h:outputText value="&lt;br/&gt;" escape="false"
                                                      rendered="#{not empty reqCert.multipleServices and not empty reqCert.textInVisura}"/>
                                        <h:outputText id="certVisuraText" value="#{reqCert.textInVisura}"
                                                      rendered="#{not empty reqCert.textInVisura}"
                                                      style="color:#003871;margin-left: 24px;"/>
                                    </p:tooltip>
                </h:panelGroup>

                <h:panelGroup layout="block" style="min-height :24px" rendered="#{not empty reqCert.specialFormality and not empty reqCert.specialFormality.textInVisura}">
                <p:graphicImage id="special-formality-#{loop.index}" url="/resources/images/tooltip.png" style="width:20px;height:20px;position: absolute;margin-top: 8px;"/>

                <p:tooltip for="special-formality-#{loop.index}" styleClass="custom-design-tooltip">
                                        <h:outputText value="#{reqCert.specialFormality.textInVisura}" style="color:#003871;"/>
                                    </p:tooltip>
                </h:panelGroup>
                            </p:outputPanel>
                        </p:column>
                        <p:column headerText="#{ff:upper(msg.nominative)}" style="width: 9vw;min-width: 159px;">
                            <p:commandLink value="#{ff:upper(reqCert.nameStr)}" rendered="#{reqCert.subject ne null}" action="#{bean.openRequestSubject}" style="cursor: pointer;">
                                <f:setPropertyActionListener value="#{reqCert.subject.id}" target="#{bean.entityEditId}"/>
                            </p:commandLink>
                            <h:outputText value="#{ff:upper(reqCert.nameStr)}" rendered="#{reqCert.subject eq null}"/>
                            <br/>
                            <h:outputText value="#{reqCert.fiscalCodeVATNamber}" style="color:#003871"/>
                        </p:column>
                        <p:column headerText="#{ff:upper(msg.requestListCorservatoryName)}" style="width: 9vw;min-width: 159px;position: relative" >
                            <p:outputPanel style="text-align:center;">
                                <h:outputText value="#{reqCert.conservatoryName}"/>
                            </p:outputPanel>
                        </p:column>
                        <p:column headerText="#{ff:upper(msg.requestListCurrentOperator)}" style="width: 8.3vw;min-width: 177px;">
                            <f:facet name="header">
                                <h:outputText value="#{ff:upper(msg.requestListCurrentOperator)}"
                                              rendered="#{not bean.canSeeAllUsers}" style="font-size: medium;font-weight: normal;"/>
                                <p:commandButton id="userCertSelectCheckboxShow"
                                                 rendered="#{bean.canSeeAllUsers}"
                                                 onclick="PF('userCertSelectCheckboxWV').show(); event.stopImmediatePropagation();"
                                                 value="#{ff:upper(msg.requestListCurrentOperator)}" type="button" style="font-size: 14px;font-weight: normal;"/>
                            </f:facet>
                            <h:outputText value="#{reqCert.userName}"/>
                        </p:column>
                        <p:column style="width: 4vw;min-width: 81px;" headerText="#{ff:upper(msg.requestListOpenMail)}">
                            <p:outputPanel style="#{not reqCert.external and empty reqCert.mail.id and not reqCert.haveAllegatiDocuments ? 'text-align: center;' : 'display: flex;'}">
                                <p:commandButton id="certMailBtn" styleClass="richiesta-da-mail-icon" action="#{bean.openRequestMail}"
                                                 style="color: transparent;background-color: transparent;border-color: transparent;margin: 0 auto;cursor: pointer;"
                                                 rendered="#{not empty reqCert.mail}">
                                    <f:setPropertyActionListener value="#{reqCert.mail.id}" target="#{bean.entityEditId}"/>
                                </p:commandButton>
                                <p:tooltip for="certMailBtn" styleClass="custom-design-tooltip">
                                    <h:outputText value="#{reqCert.mailSubject}"
                                                  style="font-weight:bold;color:#003871;"/>
                                </p:tooltip>

                                <h:outputText id="certExternalUserIcon" rendered="#{reqCert.external and not reqCert.haveAllegatiDocuments}"
                                              style="margin: 0 auto;" styleClass="richiesta-da-clienti-icon" />
                                <p:tooltip for="certExternalUserIcon" styleClass="custom-design-tooltip" escape="false"
                                           rendered="#{reqCert.external and not reqCert.haveAllegatiDocuments}">
                                    <h:outputText value="#{reqCert.createUserFullName}"
                                                  style="font-weight:bold;color:#003871;" escape="false"/>
                                </p:tooltip>

                                <p:outputPanel rendered="#{reqCert.external and reqCert.haveAllegatiDocuments}"
                                               style="display: flex;margin-left: calc( 50% - 15px );">
                                    <p:commandButton id="certExternalUserIconA"  styleClass="richiesta-da-clienti-icon"
                                                     action="#{bean.loadAllegatiDocuments}" update="requestDocs"
                                                     style="color: transparent !important;background-color: transparent !important;
                                                     	border-color: transparent !important;margin: 0 auto;cursor: pointer;"
                                                     oncomplete="PF('documentDialog').show();">
                                        <f:setPropertyActionListener value="#{reqCert.id}" target="#{bean.entityEditId}"/>
                                    </p:commandButton>
                                    <p:tooltip for="certExternalUserIconA" styleClass="custom-design-tooltip" escape="false">
                                        <h:outputText value="#{reqCert.createUserFullName}"
                                                      style="font-weight:bold;color:#003871;" escape="false"/>
                                    </p:tooltip>
                                    <h:outputText value="A"  style="width: 19px;height: 20px;background-color: #003871;
                                    				  border-radius: 50%;color: white;display: block;margin-top: -10px;margin-left: -6px;text-align: center;" />
                                </p:outputPanel>

                                <p:graphicImage id="certInternalUserIcon" url="/resources/images/richiesta-da-operatore-getesi.png"
                                                style="height :28px;"
                                                rendered="#{not reqCert.external and empty reqCert.mail.id and not reqCert.haveAllegatiDocuments}" />
                                <p:tooltip for="certInternalUserIcon" styleClass="custom-design-tooltip" escape="false"
                                           rendered="#{not empty reqCert.createUserFullName}">
                                    <h:outputText value="#{reqCert.createUserFullName}"
                                                  style="font-weight:bold;color:#003871;" escape="false"/>
                                </p:tooltip>

                                <p:outputPanel style="display: flex;#{empty reqCert.mail.id ? 'margin-left: 38%;' : ''}"
                                               rendered="#{not reqCert.external and empty reqCert.mail.id and reqCert.haveAllegatiDocuments}">
                                    <p:commandButton id="certInternalUserIconA" value="G" action="#{bean.loadAllegatiDocuments}"
                                                     update="requestDocs" styleClass="g-btn"
                                                     style="background-color: transparent !important;display: block;
	                                				 	width: 24px;height: 24px;border: 2px solid;border-radius: 50%;color: #003871;margin: 0 auto;cursor: pointer;"
                                                     oncomplete="PF('documentDialog').show();">
                                        <f:setPropertyActionListener value="#{reqCert.id}" target="#{bean.entityEditId}"/>
                                    </p:commandButton>
                                    <p:tooltip for="certInternalUserIconA" styleClass="custom-design-tooltip" escape="false"
                                               rendered="#{not empty reqCert.createUserFullName}">
                                        <h:outputText value="#{reqCert.createUserFullName}"
                                                      style="font-weight:bold;color:#003871;" escape="false"/>
                                    </p:tooltip>
                                    <h:outputText value="A"
                                                  style="width: 19px;height: 20px;background-color: #003871;border-radius: 50%;
	                                			color: white;display: block;margin-top: -10px;margin-left: -6px;text-align: center;" />
                                </p:outputPanel>
                            </p:outputPanel>
                        </p:column>
                        <p:column styleClass="action_midle_column al-cen-fx" headerText="#{ff:upper(msg.requestListDocuments)}" style="width: 4vw;min-width: 81px;">
                            <p:outputPanel style="display: flex;" rendered="#{reqCert.haveDocuments}">
                                <p:outputPanel style="display: flex;">
                                    <p:commandButton styleClass="attachment-icon" action="#{bean.loadRequestDocuments}" update="requestDocs"
                                                     style="color: transparent !important;background-color: transparent !important;
			                                        	border-color: transparent !important;margin: 0 auto;cursor: pointer;"
                                                     oncomplete="PF('documentDialog').show();">
                                        <f:setPropertyActionListener value="#{reqCert.id}" target="#{bean.entityEditId}"/>
                                    </p:commandButton>
                                    <h:outputText value="#{reqCert.documentsCount}"
                                                  style="width: 19px;height: 20px;background-color: #003871;border-radius: 50%;
			                       					color: white;display: block;margin-top: -10px;margin-left: -6px;text-align: center;" />
                                </p:outputPanel>
                            </p:outputPanel>
                        </p:column>
                        <p:column headerText="#{ff:upper(msg.requestListManage)}" style="width: 4vw;min-width: 81px;" >
                            <p:commandButton id="gestisci-cert-btn" value="#{ff:upper(msg.requestListManage)}"
                                             class="action-btn" style="display: none;"
                                             action="#{bean.manageRequest}">
                                <f:setPropertyActionListener value="#{reqCert.id}"
                                                             target="#{bean.entityEditId}"/>
                            </p:commandButton>
                            <p:commandButton id="cert_operational_flow-btn" value="#{ff:upper(msg.requestListOperationalFLow)}"
                                             class="action-btn" style="display: none;"
                                             action="#{bean.openTranscriptionManagement}" ajax="false">
                                <f:setPropertyActionListener value="#{reqCert.id}"
                                                             target="#{bean.entityEditId}"/>
                            </p:commandButton>
                            <p:commandButton id="cert-elimina-btn" value="#{ff:upper(msg.roleCanDelete)}" class="action-btn" style="display: none;"
                                             oncomplete="PF('certdlg2').show()" disabled="#{!bean.canDelete}">
                                <f:setPropertyActionListener value="#{reqCert.id}"
                                                             target="#{bean.entityDeleteId}"/>
                            </p:commandButton>
                            <div class="icon-block" style="justify-content: center;">
                                <p:commandLink id="certActionPnl" global="false" style="outline: none;" immediate="true" readonly="true">
                                    <i class="menu-dots-icon" style="font-size: x-large;"
                                       onclick="highlightRow(#{rowIdCert});document.getElementById('certificationTable:#{rowIdCert}:certActionPnl').focus();" />
                                </p:commandLink>

                                <p:tooltip for="certActionPnl" hideEvent="blur" showEvent="focus" styleClass="certActionPnl-tooltip">
                                    <p:outputPanel id="certActionGrid" styleClass="certActionPnl-panel">
                                        <p:commandButton value="#{ff:upper(msg.requestListManage)}" styleClass="action-btn"
                                                         onclick="highlightRow(#{rowIdCert});document.getElementById('certificationTable:#{rowIdCert}:gestisci-cert-btn').click()"
                                                         disabled="#{!bean.canEdit}"
                                                         style="width:120px;margin-left: 5px; margin-right: 5px; margin-top:5px; margin-bottom:8px;"
                                                         rendered="#{!reqCert.visibleExternal or (reqCert.visibleExternal and reqCert.lastRequestManageBy eq 1)}">
                                        </p:commandButton>
                                        <p:commandButton value="#{ff:upper(msg.requestListOperationalFLow)}"
                                                         class="action-btn" onclick="document.getElementById('certificationTable:#{rowIdCert}:cert_operational_flow-btn').click()"
                                                         update="@form" style="width:120px; margin-left: 5px; margin-right: 5px; margin-bottom:8px;">
                                        </p:commandButton>
                                        <p:commandButton value="#{ff:upper(msg.roleCanDelete)}" class="action-btn"
                                                         onclick="document.getElementById('certificationTable:#{rowIdCert}:cert-elimina-btn').click()"
                                                         rendered="#{!reqCert.visibleExternal or (reqCert.visibleExternal and reqCert.lastRequestManageBy eq 1)}"
                                                         disabled="#{!bean.canDelete}" style="width:120px; margin-left: 5px; margin-right: 5px; margin-bottom:5px;">
                                        </p:commandButton>
                                    </p:outputPanel>
                                </p:tooltip>
                            </div>
                        </p:column>
                    </p:dataTable>
                    <p:overlayPanel id="userCertSelectCheckboxPanel" my="left top" at="left bottom"
                                    widgetVar="userCertSelectCheckboxWV" for="certificationTable:userCertSelectCheckboxShow"
                                    rendered="#{bean.canSeeAllUsers}"
                                    onHide="loadCertificationTab();" dynamic="true" style="width:300px">
                        <p:dataTable id="userCertSelectCheckboxPanelDataTable" var="state" emptyMessage="#{msg.noRecordsFound}"
                                     value="#{bean.userWrappers}" selectionMode="single"
                                     selection="#{bean.selectedCertUserForFilter}" rowKey="#{state.value}">

                            <p:ajax event="rowSelect"
                                    listener="#{bean.selectCertUserForFilter}"
                                    update="userCertSelectCheckboxPanelDataTable"/>

                            <p:column style="width:18px">
                                <f:facet name="header">
                                    <p:selectBooleanCheckbox value="#{bean.selectedAllUsersOnPanel}">
                                        <p:ajax update="userCertSelectCheckboxPanelDataTable" event="change"/>
                                    </p:selectBooleanCheckbox>
                                </f:facet>
                                <p:selectBooleanCheckbox value="#{state.selected}">
                                    <p:ajax update="userCertSelectCheckboxPanelDataTable" event="change"/>
                                </p:selectBooleanCheckbox>
                            </p:column>

                            <p:column headerText="#{msg.mailManagerAssignUsers}">
                                <h:outputText value="#{state.value}"/>
                            </p:column>
                        </p:dataTable>
                    </p:overlayPanel>
                </p:panel>
            </div>
            <div id="content_tab4" class="hide" style="display: none;">
            	<p:remoteCommand name="loadRenewalTab" action="#{bean.loadRenewalTab}" update="renewal_table_div :renewalTable"/>
            	<div class="p-col-12">
                    <div class="p-formgroup-inline alignEnd">
                    	<div class="p-field">
                            <p:commandButton id="importExcelButton" styleClass="green-button" value="#{msg.importExcel}"
                                    		 oncomplete="PF('importExcelDialogWV').show();" update="importExcelPanel" />
                        </div>
                        
                        <div class="p-field">
                            <p:inputText value="#{bean.renewalSearchLastName}" placeholder="#{ff:upper(msg.requestEditSubjectListName)}" id="renewalSearchLastName" />
                        </div>

                        <div class="p-field">
                            <p:inputText value="#{bean.renewalSearchFiscalCode}" placeholder="#{ff:upper(msg.requestFiscalCodeCap)}" id="renewalSearchFiscalCode" />
                        </div>

                        <div class="p-field">
                            <p:commandButton
                                    style="" id="renewalSearchButton" styleClass="ui-button-warning-icon searchPanelButton"
                                    action="#{bean.prepareToModifyRenewalTab}" icon="ui-icon ui-icon-search pi pi-search"
                                    update=":renewalTable" />
                        </div>
                        <div class="settingsBlock" style="margin-bottom: 10px;">
                            <p:commandButton id="renewalSettingButton" onclick="renewalTogglePanel();"
                                             type="button" style="float: right;"
                                             styleClass="ui-button-warning-icon searchPanelButton"
                                             icon="ui-icon ui-icon-search pi pi-sliders-h"/>

                            <script type="text/javascript">
                                // <![CDATA[
                                $("body").click(function(e){
                                    var target = $(e.target);
                                    if (!target.parents('#renewalSettingButton').length && !target.parents('#renewalSettingPanel').length && !target.parents('#renewalTabClient_panel').length
                                        && !target.parents('#renewalManager_panel').length && !target.parents('#renewalOffice_panel').length
                                        && !target.parents('#stateSelectCheckboxPanel').length && !target.parents('#renewalFiduciario_panel').length
                                        && !target.parents('#ui-datepicker-div').length && !target.parents('.ui-datepicker-header').length) {
                                        PF('renewalPanelSetting').getJQ().hide();
                                    }

                                });
                                function renewalTogglePanel() {
                                    PF('renewalPanelSetting').getJQ().toggle();
                                }
                                jQuery(document).ready(function() {
                                    PF('renewalPanelSetting').getJQ().hide();
                                });
                                // ]]>
                            </script>

                            <p:panel id="renewalSettingPanel" widgetVar="renewalPanelSetting" closable="true"
                                     toggleable="true" style="display: none;">
                                <div class="p-grid">
                                    <div class="p-col-12" style="text-align: center;">
                                        <h2>Filtra per</h2>
                                    </div>
                                    <div class="p-col-6">
                                        <div style="">
                                            <h:outputText style="color: #003871;"
                                                          value=""/>
                                        </div>
                                    </div>
                                    <div class="p-col-6">
                                        <div style="">
                                            <h:outputText style="color: #003871;"
                                                          value="#{ff:upper(msg.status)}:"/>
                                        </div>
                                    </div>
                                    <div class="p-col-6">
                                        <p:selectOneMenu id="renewalTabClient" value="#{bean.selectedClientId}"
                                                         label="#{msg.requestClient}"
                                                         style="width: calc( 100% - 5px);" styleClass="#{bean.selectedClientId ne null ? 'select-one-menu' : ''}">
                                            <f:selectItem itemLabel="#{ff:upper(msg.requestListClient)}"
                                                          itemValue="#{null}"
                                                          noSelectionOption="true"/>
                                            <f:selectItems value="#{bean.clients}"/>
                                            <p:ajax event="itemSelect" update="@this"/>
                                        </p:selectOneMenu>
                                    </div>

                                    <div class="p-col-6">
                                        <p:selectCheckboxMenu id="renewalStatuses" style="width: 100%;min-height: 38px;" multiple="true" label="" value="#{bean.selectedStates}"
                                                              styleClass="#{bean.getStateSelected() gt 0 ? ' select-checkbox' : ''}">
                                            <f:selectItems value="#{bean.stateWrappers}" var="state" itemValue="#{state}"
                                                           itemLabel="#{state.value}"/>
                                        </p:selectCheckboxMenu>
                                    </div>

                                    <div class="p-col-6">
                                        <p:selectOneMenu id="renewalManager" value="#{bean.managerClientFilterid}"
                                                         style="width: calc( 100% - 5px);" styleClass="#{bean.managerClientFilterid ne null ? 'select-one-menu' : ''}">
                                            <f:selectItem itemLabel="#{ff:upper(msg.clientManager)}"
                                                          itemValue="#{null}"
                                                          noSelectionOption="true"/>
                                            <f:selectItems value="#{bean.managerClients}"/>
                                            <p:ajax event="itemSelect" update="@this"/>
                                        </p:selectOneMenu>
                                    </div>
                                    <div class="p-col-6">
                                        <p:selectOneMenu id="renewalFiduciario" value="#{bean.fiduciaryClientFilterId}"
                                                         style="width: calc( 100% - 5px);" styleClass="#{bean.fiduciaryClientFilterId ne null ? 'select-one-menu' : ''}">
                                            <f:selectItem itemLabel="#{ff:upper(msg.mailTrust)}"
                                                          itemValue="#{null}"
                                                          noSelectionOption="true"/>
                                            <f:selectItems value="#{bean.fiduciaryClients}"/>
                                            <p:ajax event="itemSelect" update="@this"/>
                                        </p:selectOneMenu>
                                    </div>
                                    <div class="p-col-6">
                                        <p:selectOneMenu id="renewalOffice" value="#{bean.aggregationFilterId}"
                                                         style="width: calc( 100% - 5px);" styleClass="#{bean.aggregationFilterId ne null ? 'select-one-menu' : ''}">
                                            <f:selectItem itemLabel="#{msg.subjectViewFormalityConservatoryCap}"
                                                          itemValue="#{null}"
                                                          noSelectionOption="true"/>
                                            <f:selectItems value="#{bean.landAggregations}"/>
                                            <p:ajax event="itemSelect" update="@this"/>
                                        </p:selectOneMenu>
                                    </div>
                                    <div class="p-col-6">
                                        <p:calendar id="renewalFilterExpiration" readonlyInput="false" showOn="button"
                                                    onkeypress="if(!searchOnEnter(event, 'renewalSearchButton')) return false;"
                                                    pattern="dd/MM/yyyy" mask="true"
                                                    locale="it" navigator="true" popupIconOnly="true"
                                                    placeholder="#{msg.expirationDateCap}"
                                                    value="#{bean.dateExpiration}" styleClass="#{bean.dateExpiration ne null ? 'calender-filled' : ''}">
                                            <p:ajax event="dateSelect" update="@this" />
                                        </p:calendar>
                                    </div>
                                    <div class="p-col-12">
                                        <div style="">
                                            <h:outputText style="color: #003871;"
                                                          value="#{ff:upper(msg.requestListDateOfInput)}:"/>
                                        </div>
                                    </div>
                                    <div class="p-col-6">
                                        <p:calendar id="renewalFilterDateFrom" readonlyInput="false"
                                                    showOn="button"
                                                    onkeypress="if(!searchOnEnter(event, 'renewalSearchButton')) return true;"
                                                    pattern="dd/MM/yyyy" mask="true" locale="it"
                                                    navigator="true"
                                                    popupIconOnly="true"
                                                    onblur="setTimeout(function(){checkDates();}, 500);check_date(this);"
                                                    value="#{bean.dateFrom}"
                                                    placeholder="#{msg.mailManagerDateFromReqlist}" styleClass="#{bean.dateFrom ne null ? 'calender-filled' : ''}">
                                            <p:ajax event="dateSelect" update="@this" />
                                        </p:calendar>
                                        <div id="renewalhyphen"></div>
                                    </div>
                                    <div class="p-col-6">
                                        <p:calendar id="renewalFilterDateTo" readonlyInput="false" showOn="button"
                                                    onkeypress="if(!searchOnEnter(event, 'renewalSearchButton')) return false;"
                                                    pattern="dd/MM/yyyy" mask="true"
                                                    locale="it" navigator="true" popupIconOnly="true"
                                                    placeholder="#{msg.mailManagerDateToReqlist}"
                                                    onblur="check_date(this)" value="#{bean.dateTo}" styleClass="#{bean.dateTo ne null ? 'calender-filled' : ''}">
                                            <p:ajax event="dateSelect" update="@this" />
                                        </p:calendar>
                                    </div>
                                    <div class="p-col-12">
                                        <div style="">
                                            <h:outputText style="color: #003871;"
                                                          value="#{ff:upper(msg.requestListDateOfEvasion)}:"/>
                                        </div>
                                    </div>
                                    <div class="p-col-6">
                                        <p:calendar id="renewalFilterDateFromEvasione" readonlyInput="false"
                                                    showOn="button"
                                                    onkeypress="if(!searchOnEnter(event, 'renewalSearchButton')) return true;"
                                                    pattern="dd/MM/yyyy" mask="true" locale="it"
                                                    navigator="true"
                                                    popupIconOnly="true"
                                                    onblur="setTimeout(function(){checkDates();}, 500);check_date(this);"
                                                    value="#{bean.dateFromEvasion}"
                                                    placeholder="#{msg.mailManagerDateFromReqlist}" styleClass="#{bean.dateFromEvasion ne null ? 'calender-filled' : ''}">
                                            <p:ajax event="dateSelect" update="@this" />
                                        </p:calendar>
                                    </div>
                                    <div class="p-col-6">
                                        <p:calendar id="renewalFilterDateToEvasione" readonlyInput="false"
                                                    showOn="button"
                                                    onkeypress="if(!searchOnEnter(event, 'renewalSearchButton')) return false;"
                                                    pattern="dd/MM/yyyy" mask="true"
                                                    locale="it" navigator="true" popupIconOnly="true"
                                                    placeholder="#{msg.mailManagerDateToReqlist}"
                                                    onblur="check_date(this)" value="#{bean.dateToEvasion}" styleClass="#{bean.dateToEvasion ne null ? 'calender-filled' : ''}">
                                            <p:ajax event="dateSelect" update="@this" />
                                        </p:calendar>
                                    </div>
                                    <div class="p-col-12 search-panel-btns" style="text-align: center;">
                                        <p:commandButton value="#{ff:upper(msg.requestPrintSelectTemplate)}"
                                                         style="background: #00CC52;"
                                                         id="renewalSearchButtonFilter"
                                                         action="#{bean.prepareToModifyRenewalTab}"
                                                         onclick="checkDates();"
                                                         update=":renewalTable"
                                                         oncomplete="PF('renewalPanelSetting').getJQ().hide();"/>
                                        <p:commandButton id="renewalManageReestablishBtn" style="width: auto;"
                                                         value="#{ff:upper(msg.mailManageReestablish)}"
                                                         update=":form:renewalSettingPanel"
                                                         actionListener="#{bean.reset}"
                                                         oncomplete="loadRenewalTab();PF('renewalPanelSetting').getJQ().hide();"/>
                                    </div>
                                </div>
                            </p:panel>
                        </div>
                    </div>
                </div>
                <p:panel id="renewal_table_div">
                    <p:dataTable id="renewalTable" value="#{bean.requestListRenewal}" emptyMessage="#{msg.noRecordsFound}"
                                 var="reqRenewal" rows="15" lazy="true" style="margin-top:30px;" styleClass="request-table"
                                 paginator="true" paginatorAlwaysVisible="true" rowIndexVar="rowIdRenewal"
                                 paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                 rowsPerPageTemplate="15, 30, 45, 60">
                        <p:column headerText="#{ff:upper(msg.expirationDate)}" style="width: 5vw; min-width: 120px;">
                            <h:outputText value="#{reqRenewal.request.termDate}" converter="dateTimeConverter"
                                          style="color:#003871;font-weight: bold !important;" rendered="#{not empty reqRenewal.request.termDate}"/>
                            <h:outputText value="#{reqRenewal.request.actDate}" converter="dateTimeConverter20Years"
                                          style="color:#003871;font-weight: bold !important;" rendered="#{empty reqRenewal.request.termDate}"/>
                            <br/>
                            <br/>
                            <br/>
                            <h:outputText value="#{not empty reqRenewal.request.stateDescription ? ff:upper(reqRenewal.request.stateDescription) : ''}"
                                          styleClass="#{(reqRenewal.request.stateDescription eq 'Inserita' or ff:upper(reqRenewal.request.stateDescription) eq 'PROFILATA')
                        						? 'status-icon status-green' : (reqRenewal.request.stateDescription eq 'In lavorazione'
                        						? 'status-icon status-yellow' :((reqRenewal.request.stateDescription eq 'Da inviare'
                        						or ff:upper(reqRenewal.request.stateDescription) eq 'EST. DA INVIARE')
                        						? 'status-icon status-navy' : ((reqRenewal.request.stateDescription eq 'Sospesa'
                        						or ff:upper(reqRenewal.request.stateDescription) eq 'ESTERNA')? 'status-icon status-magenta'
                        						: (reqRenewal.request.stateDescription eq 'Evasa' ? 'status-icon status-red'
                        						: (reqRenewal.request.stateDescription eq 'Inviata allo SDI' ? 'status-icon status-cyan'
                        						: ((reqRenewal.request.stateDescription eq 'Fatturata' or ff:upper(reqRenewal.request.stateDescription) eq 'FATTURATA OLD')
                        						? 'status-icon state-blue': (reqRenewal.request.stateDescription eq 'Spedita' ? 'status-icon state-blue' : (reqRenewal.request.stateDescription eq 'Annullata' ? 'status-icon state-brown' : ''))))))))}"/>
                        </p:column>
                        <p:column headerText="#{ff:upper(msg.requestListClient)}" style="width: 9vw;min-width: 159px;position: relative">
                            <p:outputPanel style="text-align:center;">
                                <h:outputText value="#{reqRenewal.clientName}"/>
                            </p:outputPanel>
                            <br/>
                            <div style="height :20px; position:absolute; left: 7px; bottom: 7px;">
                                <p:graphicImage id="renewalClientInfo-#{loop.index}" url="/resources/images/tooltip.png" style="width:20px; height:20px;"
                                                rendered="#{not empty reqCert.mail and (not empty reqRenewal.clientFiduciary or not empty reqRenewal.managerId)}" />
                                <p:tooltip for="renewalClientInfo-#{loop.index}" styleClass="custom-design-tooltip">
                                    <h:outputText value="#{ff:upper(msg.requestManagers)}" style="font-weight:bold;color:#003871;"/>
                                    <br />
                                    <h:outputText value="#{reqRenewal.request.haveManagers()}" escape="false" rendered="#{not empty reqRenewal.request.haveManagers()}"/>
                                    <br />
                                    <h:outputText value="#{ff:upper(msg.requestTrustees)}" style="font-weight:bold;color:#003871;" />
                                    <br />
                                    <h:outputText value="#{reqRenewal.getClientNameProfessional(reqRenewal.clientFiduciary)}" escape="false"
                                                  rendered="#{not empty reqRenewal.clientFiduciary}" style="color:#003871;"/>
                                </p:tooltip>
                            </div>
                        </p:column>
                        <p:column headerText="#{ff:upper(msg.requestListServiceCap)}" style="width: 11vw;min-width: 170px;" >
                            <p:outputPanel style="margin-left: 20px;text-align: left;">
                                <p:outputPanel id="renewalServicesColumn"
                                               rendered="#{reqRenewal.request.serviceName eq null}"
                                               style="background-color: transparent;width: inherit;"/>
                                <p:outputPanel>
                                    <h:outputText styleClass="#{bean.getItemIconStyleClass(reqRenewal.request.requestType.id)}" style="display: inline-flex;margin-right: 5px;" />
                                    <h:outputText id="renewalRequestTypeName" value="#{reqRenewal.request.requestTypeName}" style="vertical-align: top;font-weight: bold !important;"
                                                  rendered="#{reqRenewal.request.requestTypeName ne null}"/>
                                </p:outputPanel>
                                <h:outputText id="renewalService" value="#{reqRenewal.request.serviceName}" rendered="#{reqRenewal.request.serviceName ne null}"/>

                                <br/>
                                <h:panelGroup layout="block" style="height :20px; position:absolute; left: 7px; bottom: 7px;">
                                    <p:graphicImage id="reqRenewal-multipleservice-#{loop.index}" url="/resources/images/tooltip.png"
                                                    style="width:20px;height:20px;margin-top: 22px;margin-left: -18px;position: absolute;" />
                                    <p:tooltip for="reqRenewal-multipleservice-#{loop.index}" styleClass="custom-design-tooltip"
                                               rendered="#{not empty reqRenewal.request.multipleServices or not empty reqRenewal.textInVisura}">
                                        <ui:repeat var="ele" value="#{reqRenewal.request.multipleServices}" varStatus="service">
                                            <h:outputText value="#{ele}" escape="false" style="color:#003871;margin-left: 24px;"/>
                                            <br />
                                        </ui:repeat>
                                        <h:outputText value="&lt;br/&gt;" escape="false"
                                                      rendered="#{not empty reqRenewal.request.multipleServices and not empty reqRenewal.textInVisura}"/>
                                        <h:outputText id="renewalVisuraText" value="#{reqRenewal.textInVisura}"
                                                      rendered="#{not empty reqRenewal.textInVisura}"
                                                      style="color:#003871;margin-left: 24px;"/>
                                    </p:tooltip>
                                </h:panelGroup>
                                <br/>
                                <h:panelGroup layout="block" style="min-height :24px" rendered="#{not empty reqCert.specialFormality and not empty reqCert.specialFormality.textInVisura}">
                                                    <p:graphicImage id="reqRenewal-special-formality-#{loop.index}" url="/resources/images/tooltip.png" style="width:20px;height:20px;position: absolute;margin-top: 8px;"/>
                                                    <p:tooltip for="reqRenewal-special-formality-#{loop.index}" styleClass="custom-design-tooltip">
                                                        <h:outputText value="#{reqRenewal.request.specialFormality.textInVisura}" style="color:#003871;"/>
                                                    </p:tooltip>
                                </h:panelGroup>
                            </p:outputPanel>
                        </p:column>
                        <p:column headerText="#{ff:upper(msg.nominative)}" style="width: 9vw;min-width: 159px;">
                            <h:outputText value="#{reqRenewal.getSubjectName((reqRenewal.request.requestSubjects != null
                            			  and reqRenewal.request.requestSubjects.size() gt 0 ? reqRenewal.request.requestSubjects.get(0) : null))}"/>
                            <br/>
                            <h:outputText value="#{reqRenewal.getFiscalCodeVATNumber((reqRenewal.request.requestSubjects != null
                            			  and reqRenewal.request.requestSubjects.size() gt 0 ? reqRenewal.request.requestSubjects.get(0) : null))}" style="color:#003871"/>
                            <br/>
                            <div style="height :20px; position:absolute;">
                                <p:graphicImage id="subject" url="/resources/images/tooltip.png" style="width:20px; height:20px;"
                                                rendered="#{reqRenewal.request.requestSubjects != null and reqRenewal.request.requestSubjects.size() gt 1}"/>
                                <p:tooltip for="subject" styleClass="custom-design-tooltip" rendered="#{reqRenewal.request.requestSubjects != null
                                			and reqRenewal.request.requestSubjects.size() gt 1}">
                                    <p:outputPanel>
                                        <ui:repeat value="#{reqRenewal.request.requestSubjects}" var="requestSubject" offset="1">
                                            <h:outputText value="#{reqRenewal.getSubjectName(requestSubject)}" style="font-weight:bold;color:#003871;"/>
                                            <br/>
                                            <h:outputText value="#{reqRenewal.getFiscalCodeVATNumber(requestSubject)}" style="color:#003871"/>
                                            <br/>
                                        </ui:repeat>
                                    </p:outputPanel>
                                </p:tooltip>
                            </div>
                        </p:column>
                        <p:column headerText="#{ff:upper(msg.requestListCorservatoryName)}" style="width: 9vw;min-width: 159px;position: relative" >
                            <p:outputPanel style="text-align:center;">
                                <h:outputText value="#{reqRenewal.conservatory}"/>
                            </p:outputPanel>
                        </p:column>
                        <p:column headerText="#{ff:upper(msg.typeFormalityType)}" style="width: 9vw;min-width: 159px;">
                            <p:outputPanel style="text-align:center;">
                                <h:outputText value="Trascrizione" rendered="#{reqRenewal.actType eq 'T'}"/>
                                <h:outputText value="Iscrizione" rendered="#{reqRenewal.actType eq 'I'}"/>
                                <h:outputText value="Annotamento" rendered="#{reqRenewal.actType eq 'A'}"/>
                                <br /><br />
                                <div style="height :20px; position:absolute; ">
                                    <p:graphicImage id="reqRenewal-typeFormalityType-#{loop.index}"
                                                    url="/resources/images/tooltip.png"
                                                    style="width:20px; height:20px;"
                                                    rendered="#{not empty reqRenewal.request.actNumber
	                                                		  or not empty reqRenewal.request.actDate
	                                                		  or not empty reqRenewal.request.mortagageImport}" />
                                    <p:tooltip for="reqRenewal-typeFormalityType-#{loop.index}" styleClass="custom-design-tooltip"
                                               rendered="#{not empty reqRenewal.request.actNumber or not empty reqRenewal.request.actDate
	                                						or not empty reqRenewal.request.mortagageImport}">
                                        <h:outputText value="#{ff:upper(msg.actNumber)} : "
                                                      rendered="#{not empty reqRenewal.request.actNumber}"/>
                                        <h:outputText value="#{reqRenewal.request.actNumber}" escape="false"
                                                      rendered="#{not empty reqRenewal.request.actNumber}"/><br />
                                        <h:outputText value="#{ff:upper(msg.subjectViewFormalityDate)} : "
                                                      rendered="#{not empty reqRenewal.request.actDate}"/>
                                        <h:outputText value="#{reqRenewal.request.actDate}" converter="dateTimeConverter"
                                                      rendered="#{not empty reqRenewal.request.actDate}"/><br />
                                        <h:outputText value="#{ff:upper(msg.billingListAmount)} : "
                                                      rendered="#{not empty reqRenewal.request.mortagageImport}"/>
                                        <h:outputText value="#{reqRenewal.request.mortagageImport}"
                                                      rendered="#{not empty reqRenewal.request.mortagageImport}"/>
                                    </p:tooltip>
                                </div>
                            </p:outputPanel>
                        </p:column>
                        <p:column headerText="#{msg.pdf}" style="width: 4vw;min-width: 81px;">
                            <p:outputPanel rendered="#{reqRenewal.request.haveAllegatiDocuments}"
                                           style="display: flex;justify-content: center;">
                                <p:commandButton id="renewalExternalUserIconA"  styleClass="richiesta-da-clienti-icon"
                                                 action="#{bean.loadAllegatiDocuments}" update="requestDocs"
                                                 style="color: transparent !important;background-color: transparent !important;
                         	border-color: transparent !important;cursor: pointer;"
                                                 oncomplete="PF('documentDialog').show();">
                                    <f:setPropertyActionListener value="#{reqRenewal.request.id}" target="#{bean.entityEditId}"/>
                                </p:commandButton>
                                <p:tooltip for="renewalExternalUserIconA" styleClass="custom-design-tooltip" escape="false">
                                    <h:outputText value="#{reqRenewal.request.createUserFullName}"
                                                  style="font-weight:bold;color:#003871;" escape="false"/>
                                </p:tooltip>
                                <h:outputText value="A"  style="width: 19px;height: 20px;background-color: #003871;
        				  border-radius: 50%;color: white;display: block;margin-top: -10px;
        				  margin-left: -5px;text-align: center;" />
                            </p:outputPanel>
                        </p:column>
                        <p:column styleClass="action_midle_column al-cen-fx" headerText="#{ff:upper(msg.requestListDocuments)}"
                                  style="width: 4vw;min-width: 81px;">
                            <p:outputPanel style="display: flex;" rendered="#{reqRenewal.request.haveDocuments}">
                                <p:outputPanel style="display: flex;">
                                    <p:commandButton styleClass="attachment-icon" action="#{bean.loadRequestDocuments}" update="requestDocs"
                                                     style="color: transparent !important;background-color: transparent !important;
			                                        	border-color: transparent !important;margin: 0 auto;cursor: pointer;"
                                                     oncomplete="PF('documentDialog').show();">
                                        <f:setPropertyActionListener value="#{reqRenewal.request.id}" target="#{bean.entityEditId}"/>
                                    </p:commandButton>
                                    <h:outputText value="#{reqRenewal.request.documentsCount}"
                                                  style="width: 19px;height: 20px;background-color: #003871;border-radius: 50%;
			                       					color: white;display: block;margin-top: -10px;margin-left: -6px;text-align: center;" />
                                </p:outputPanel>
                            </p:outputPanel>
                        </p:column>
                        <p:column headerText="#{ff:upper(msg.requestListManage)}" style="width: 4vw;min-width: 81px;" >
                            <p:commandButton id="gestisci-renewal-btn" value="#{ff:upper(msg.requestListManage)}"
                                             class="action-btn" style="display: none;"
                                             action="#{bean.manageRequest}">
                                <f:setPropertyActionListener value="#{reqRenewal.request.id}" target="#{bean.entityEditId}"/>
                            </p:commandButton>
                            <p:commandButton id="renewal_operational_flow-btn" value="#{ff:upper(msg.requestListOperationalFLow)}"
                                             class="action-btn" style="display: none;"
                                             action="#{bean.openTranscriptionManagement}" ajax="false">
                                <f:setPropertyActionListener value="#{reqRenewal.request.id}" target="#{bean.entityEditId}"/>
                            </p:commandButton>
                            <p:commandButton id="renewal-elimina-btn" value="#{ff:upper(msg.roleCanDelete)}" class="action-btn" style="display: none;"
                                             oncomplete="PF('certdlg2').show()" disabled="#{!bean.canDelete}">
                                <f:setPropertyActionListener value="#{reqRenewal.request.id}" target="#{bean.entityDeleteId}"/>
                            </p:commandButton>
                            <div class="icon-block" style="justify-content: center;">
                                <p:commandLink id="renewalActionPnl" global="false" style="outline: none;" immediate="true" readonly="true">
                                    <i class="menu-dots-icon" style="font-size: x-large;"
                                       onclick="highlightRow(#{rowIdRenewal});document.getElementById('renewalTable:#{rowIdRenewal}:renewalActionPnl').focus();" />
                                </p:commandLink>

                                <p:tooltip for="renewalActionPnl" hideEvent="blur" showEvent="focus" styleClass="certActionPnl-tooltip">
                                    <p:outputPanel id="renewalActionGrid" styleClass="certActionPnl-panel">
                                        <p:commandButton value="#{ff:upper(msg.requestListManage)}" styleClass="action-btn"
                                                         onclick="highlightRow(#{rowIdRenewal});document.getElementById('renewalTable:#{rowIdRenewal}:gestisci-renewal-btn').click()"
                                                         disabled="#{!bean.canEdit}"
                                                         style="width:120px;margin-left: 5px; margin-right: 5px; margin-top:5px; margin-bottom:8px;"
                                                         rendered="#{!reqRenewal.request.visibleExternal or (reqRenewal.request.visibleExternal and reqRenewal.request.lastRequestManageBy eq 1)}">
                                        </p:commandButton>
                                        <p:commandButton value="#{ff:upper(msg.requestListOperationalFLow)}"
                                                         class="action-btn" onclick="document.getElementById('renewalTable:#{rowIdRenewal}:renewal_operational_flow-btn').click()"
                                                         update="@form" style="width:120px; margin-left: 5px; margin-right: 5px; margin-bottom:8px;">
                                        </p:commandButton>
                                        <p:commandButton value="#{ff:upper(msg.roleCanDelete)}" class="action-btn"
                                                         onclick="document.getElementById('renewalTable:#{rowIdRenewal}:renewal-elimina-btn').click()"
                                                         rendered="#{!reqRenewal.request.visibleExternal or (reqRenewal.request.visibleExternal and reqRenewal.request.lastRequestManageBy eq 1)}"
                                                         disabled="#{!bean.canDelete}"  style="width:120px; margin-left: 5px; margin-right: 5px; margin-bottom:5px;">
                                        </p:commandButton>
                                    </p:outputPanel>
                                </p:tooltip>
                            </div>
                        </p:column>
                    </p:dataTable>
                </p:panel>
            </div>

            <div id="content_tab5" class="hide" style="display: none;">
            </div>
        </div>

        <script type="text/javascript">
            // <![CDATA[
            $(".tab").on("click", function (event) {
                var elementId = event.target.id;
                console.log(elementId);
                if(elementId == 'tab2') {
                    loadTranscriptionTab();
                }
                if(elementId == 'tab3') {
                    loadCertificationTab();
                }
                if(elementId == 'tab4') {
                    loadRenewalTab();
                }
                $(".tab").removeClass("selected");
                $('#' + elementId).addClass("selected");
                $(".hide").hide();
                $("#content_" + elementId).show();
            });
            
            function highlightRow(idx) {
                $('#transcriptionTable_data tr').attr('id', '');
                $('#transcriptionTable_data tr:eq('+idx+')').attr('id', 'selected-row');
            }

            function customExtender() {
                this.cfg.grid = {
                    background: '#ffffff',
                    borderColor: '#D4D4D4',
                }
                console.log(this.cfg);
            }

            var ctx;
            var chartData;
            var myBarChart;

            // ]]>
        </script>

        <p:dialog widgetVar="eventDialog" header="Event Details" showEffect="fade" width="350" >
            <p:outputPanel id="eventDetails" styleClass="ui-fluid">
                <div class="p-field">
                    <p:outputLabel for="eventTitle" value="Title" />
                    <p:inputText id="eventTitle" value="#{bean.calendarBean.event.title}"/>
                </div>
                <div class="p-field">
                    <p:outputLabel for="from" value="From" /><br/>
                    <p:calendar id="from"
                                showOn="button"
                                pattern="dd/MM/yyyy hh:mm:ss" mask="true" locale="it" navigator="true"
                                popupIconOnly="true"
                                value="#{bean.calendarBean.event.startDate}"/>
                </div>
                <div class="p-field">
                    <p:outputLabel for="to" value="To" /><br/>
                    <p:calendar id="to"
                                showOn="button"
                                pattern="dd/MM/yyyy hh:mm:ss" mask="true" locale="it" navigator="true"
                                popupIconOnly="true"
                                value="#{bean.calendarBean.event.endDate}"/>
                </div>
                <div class="p-field-checkbox">
                    <p:selectBooleanCheckbox id="allDay" value="#{bean.calendarBean.event.allDay}" />
                    <p:outputLabel for="allDay" value="All Day" />
                </div>
            </p:outputPanel>
            <f:facet name="footer">
                <p:commandButton id="addButton" value="Save" action="#{bean.calendarBean.addEvent}" icon="pi pi-check" oncomplete="PF('myschedule').update();PF('eventDialog').hide();" />
                <p:commandButton type="reset" value="Reset" styleClass="ui-button-secondary" icon="pi pi-refresh" />
            </f:facet>
        </p:dialog>
        
        <p:dialog id="requestDelete" widgetVar="dlg2" modal="true" resizable="false" styleClass="dialog-green dialog-green-width"
                  draggable="false" effect="SLIDE" >
            #{msg.deleteRequestConfirmation}<br/>
            <br/>
            <div class="btn_line">
                <p:commandButton value="#{msg.confirm}" action="#{bean.deleteEntity}" style="margin-right: 1cm;background-color: #00CC52!important;"
                                 oncomplete="PF('dlg2').hide(); loadTranscriptionTab();"/>
                <p:commandButton value="#{msg.cancel}" onclick="PF('dlg2').hide()" style="background-color: #F3362B !important;"/>
            </div>
        </p:dialog>

        <p:dialog id="certrequestDelete" widgetVar="certdlg2" modal="true" resizable="false" styleClass="dialog-green dialog-green-width"
                  draggable="false" effect="SLIDE" >
            #{msg.deleteRequestConfirmation}<br/>
            <br/>
            <div class="btn_line">
                <p:commandButton value="#{msg.confirm}" action="#{bean.deleteEntity}" style="margin-right: 1cm;background-color: #00CC52!important;"
                                 oncomplete="PF('certdlg2').hide(); loadCertificationTab();"/>
                <p:commandButton value="#{msg.cancel}" onclick="PF('certdlg2').hide()" style="background-color: #F3362B !important;"/>
            </div>
        </p:dialog>
        
        <p:dialog id="documentDialog" widgetVar="documentDialog" modal="true" resizable="false" draggable="false" width="700">
            <p:scrollPanel mode="native"  style="width: 100%; min-height: 300px; max-height: 600px;">
                <p:dataTable value="#{bean.requestDocuments}" var="doc" id="requestDocs" emptyMessage="#{msg.noRecordsFound}">
                    <p:column headerText="#{msg.name}">
                        <h:outputText value="#{doc.title}#{not empty doc.fileExtension ? doc.fileExtension : '' }"/>
                    </p:column>
                    <p:column styleClass="action_column">
                        <p:commandButton icon="fa fa-download" action="#{bean.downloadRequestFile}" ajax="false" styleClass="docdowload">
                            <f:setPropertyActionListener value="#{doc.id}" target="#{bean.entityEditId}"/>
                        </p:commandButton>
                    </p:column>
                </p:dataTable>
            </p:scrollPanel>
        </p:dialog>
        
        <p:dialog id="importExcelDialog" widgetVar="importExcelDialogWV" modal="true" resizable="false" draggable="false" width="900">
            <p:panelGrid id="importExcelPanel" columns="3" style="width: 100%;"
            			 columnClasses="ui-grid-col-4, ui-grid-col-2, ui-grid-col-6">
            	<p:column>
                	<p:selectOneMenu id="renewalClient" value="#{bean.selectedRenewalClientId}"
                                     label="#{msg.requestClient}" 
                                     style="width: calc(100% - 10px);" 
                                     styleClass="#{bean.selectedRenewalClientId ne null ? 'select-one-menu' : ''}">
                        <f:selectItem itemLabel="#{ff:upper(msg.requestListClient)}"
                                      itemValue="#{null}"
                                      noSelectionOption="true"/>
                        <f:selectItems value="#{bean.renewalClients}"/>
                        <p:ajax event="itemSelect" update="@this"/>
                    </p:selectOneMenu>
            	</p:column>
            	<p:column >
            		<p:fileUpload id="excelFileUpload" label="#{msg.upload}" fileUploadListener="#{bean.handleImportExcelUpload}" 
            					  multiple="false" mode="advanced" styleClass="special-upload" auto="true"
                  				  update="importExcelPanel" allowTypes="/(\.|\/)(xls|xlsx)$/"/>
            	</p:column>
            	<p:column>
            		<h:outputText value="" rendered="#{empty bean.importExcelFileName}" style="width: 150px;"></h:outputText>
            		<p:panelGrid columns="2" id="importFilePanel" rendered="#{not empty bean.importExcelFileName}" 
            					 style="width: 100%;" columnClasses="ui-grid-col-10, ui-grid-col-2">
	                    <h:outputText id="importExcelFileName" value="#{bean.importExcelFileName}" />
	                    <p:commandButton icon="fa fa-close" title="#{msg.delete}" update="importExcelPanel"
	                                     ajax="true" action="#{bean.deleteImportExcel}"
	                                     style="background-color: transparent!important; color: #5f666c!important; padding-right: 5px; font-size:18px !important;">
                    	</p:commandButton>
                	</p:panelGrid>
            	</p:column>
            	
            	<p:column></p:column>
            	<p:column></p:column>
            	<p:column style="text-align: right !important;">
            		<p:commandButton id="save" styleClass="green-button" value="#{msg.databaseListImportFile}"
                                     action="#{bean.importRenewalExcel}" update=":renewalTable" style="width: 125px; float: right;"
                                     oncomplete="PF('importExcelDialogWV').hide(); loadRenewalTab();" />
            	</p:column>
            </p:panelGrid>
        </p:dialog>

    </ui:define>
</ui:composition>
</html>
