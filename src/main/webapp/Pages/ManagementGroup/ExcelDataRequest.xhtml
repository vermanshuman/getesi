<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">
<ui:composition template="/resources/tpl/Admin/EmptyBase.xhtml">


    <ui:define name="view_body">
        <ui:param name="bean" value="#{excelDataRequestEdit}" />
		<p:panel id="dataTablePanel">
        <ui:repeat value="#{bean.dataTable}" var="key">
            <p:panelGrid columns="1" styleClass="ui-panelgrid-blank form-group">
                <h:outputText value="#{key.requestName}" style="font-weight:bold;font-size: 20px;"/>
                <p:dataTable value="#{key.requests}" var="req" rowIndexVar="row" emptyMessage="#{msg.noRecordsFound}">
                    <p:columns value="#{key.columnNames}" var="column">
                        <f:facet name="header">
                            <h:outputText value="#{column}" />
                        </f:facet>
                        <h:outputText value="#{key.columnValues[column.concat('_').concat(req.tempId)]}" rendered="#{column eq msg.excelNote}" escape="false"/>
                        <h:outputText value="#{key.columnValues[column.concat('_').concat(req.tempId)]}" rendered="#{column ne msg.excelNote}"/>
                        <f:facet name="footer">
                            <h:outputText value="#{key.footerValues[column]}" style="font-weight:bold;font-size: 15px;"/>
                        </f:facet>
                    </p:columns>
                    <p:column exportable="false" styleClass="action_midle_column">
                        <p:commandButton icon="fa fa-pencil-square-o" action="#{bean.viewExtraCost(key.columnValues, req.tempId)}">
                            <f:setPropertyActionListener value="#{req.id ne null ? req.id : req.multipleRequestId}" target="#{bean.requestId}"/>
                        </p:commandButton>
                    </p:column>
                </p:dataTable>
            </p:panelGrid>
        </ui:repeat>
		</p:panel>
        <p:panelGrid columns="2" styleClass="ui-panelgr id-blank form-group additional_button">
            <p:commandButton id="pdf_btn"
                             action="#{bean.generatePdfRequestCost}"
                             value="#{msg.pdf}"
                             icon="fa fa-fw fa-file-pdf-o"
                             ajax="false" update="@form"/>
        </p:panelGrid>
        <ui:include src="../Dialogs/RequestExtraCostDialog.xhtml"/>
    </ui:define>
</ui:composition>
</html>
