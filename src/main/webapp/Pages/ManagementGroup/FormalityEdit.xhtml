<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui" xmlns:f="http://java.sun.com/jsf/core"
                template="/resources/tpl/Admin/EditBase.xhtml">
    <ui:param name="bean" value="#{formalityEditBean}"/>
    <ui:param name="edit_title" value="#{msg.formality}"/>
    <ui:define name="edit_body">
        <style type="text/css">
            .ui-datagrid-no-border .ui-datagrid-content {
                border: none;
            }

            .to-bottom-text td.ui-panelgrid-cell {
                vertical-align: bottom !important;
            }
        </style>
        <p:panelGrid columns="2" styleClass="ui-panelgrid-blank form-group to-bottom-text">
            <h:outputText style="font-size: 20px" value="#{msg.formalityTitle}"/>
            <p:selectOneMenu style="font-size: 20px" value="#{bean.selectedId}">
                <f:selectItems value="#{bean.conservatories}"/>
            </p:selectOneMenu>
            <p:panelGrid columns="2" styleClass="ui-panelgrid-blank form-group">

                <h:outputText style="font-size: 16px"
                              value="#{msg.formalityNote} #{bean.entity.type}"
                              rendered="#{empty bean.entity.sectionA.annotationType}"/>
                <h:outputText style="font-size: 16px"
                              value="#{msg.formalityRequestNote}"
                              rendered="#{not empty bean.entity.sectionA.annotationType}"/>

                <h:outputText value=""/>

                <h:outputText value="#{msg.formalityGeneralRegister}"/>
                <p:inputText value="#{bean.entity.generalRegister}"/>

                <h:outputText value="#{msg.formalitySpecialRegister}"/>
                <p:inputText value="#{bean.entity.particularRegister}"/>

            </p:panelGrid>
            <p:panelGrid columns="4" styleClass="ui-panelgrid-blank form-group">

                <h:outputText value="#{msg.formalityPresentation}"/>
                <p:inputText value="#{bean.entity.numberPresentation}"/><span> del</span>
                <p:calendar value="#{bean.entity.presentationDate}"
                            pattern="dd/MM/yyyy" mask="true" locale="it" navigator="true" popupIconOnly="true"/>

            </p:panelGrid>
        </p:panelGrid>
        <p:fieldset legend="#{msg.formalitySectionA}">
            <h:outputText style="font-size: 20px" value="#{msg.formalityDataRelation}"/>
            <p:panelGrid columns="2" columnClasses="ui-grid-col-2, ui-grid-col-4"
                         styleClass="ui-panelgrid-blank form-group" layout="grid">

                <h:outputText value="#{msg.formalityDescription}"/>
                <p:inputText value="#{bean.sectionA.titleDescription}" styleClass="input-width"/>

                <h:outputText value="#{msg.formalityDate}"/>
                <p:calendar value="#{bean.sectionA.titleDate}" styleClass="formality-calendar-width" showOn="button"
                            pattern="dd/MM/yyyy" mask="true" locale="it" navigator="true" popupIconOnly="true"/>

                <h:outputText value="#{msg.formalityNotary}"/>
                <p:inputText value="#{bean.sectionA.publicOfficialNotary}" styleClass="input-width"/>

                <h:outputText value="#{msg.formalityPublicOfficial}"/>
                <p:inputText value="#{bean.sectionA.publicOfficial}" styleClass="input-width"/>

                <h:outputText value="#{msg.formalitySeat}"/>
                <p:inputText value="#{bean.sectionA.seat}" styleClass="input-width"/>

                <h:outputText value="#{msg.formalityDirectoryNumber}"/>
                <p:inputText value="#{bean.sectionA.numberDirectory}" styleClass="input-width"/>

                <h:outputText value="#{msg.formalityFiscalCode}"/>
                <p:inputText value="#{bean.sectionA.fiscalCode}" styleClass="input-width"/>

            </p:panelGrid>
            <h:outputText style="font-size: 20px" value="#{msg.formalityAnnotationDate}"/>
            <p:panelGrid columns="2" styleClass="ui-panelgrid-blank form-group"
                         columnClasses="ui-grid-col-2, ui-grid-col-4" layout="grid">

                <h:outputText value="#{msg.annotationType}"/>
                <p:inputText value="#{bean.sectionA.annotationType}" styleClass="input-width"/>

                <h:outputText value="#{msg.annotationDescription}"/>
                <p:inputText value="#{bean.sectionA.annotationDescription}" styleClass="input-width"/>

                <h:outputText value="#{msg.annotationProperties}"/>
                <p:inputText value="#{bean.sectionA.annotationProperties}" styleClass="input-width"/>

            </p:panelGrid>
            <h:outputText style="font-size: 20px" value="#{msg.formalityDataPrivilege}"/>
            <p:panelGrid columns="2" styleClass="ui-panelgrid-blank form-group"
                         columnClasses="ui-grid-col-2, ui-grid-col-4" layout="grid">

                <h:outputText value="#{msg.formalityTypePrivilege}"/>
                <p:inputText value="#{bean.sectionA.mortgageSpecies}" styleClass="input-width"/>

                <h:outputText value="#{msg.formalityDerivedFrom}"/>
                <p:inputText value="#{bean.sectionA.derivedFrom}" styleClass="input-width"/>

                <h:outputText value="#{msg.formalityCapital}"/>
                <p:inputText value="#{bean.sectionA.capital}" styleClass="input-width"/>

                <h:outputText value="#{msg.formalityTotal}"/>
                <p:inputText value="#{bean.sectionA.total}" styleClass="input-width"/>

            </p:panelGrid>
            <h:outputText style="font-size: 20px" value="#{msg.formalityDataConvention}"/>
            <p:panelGrid columns="2" styleClass="ui-panelgrid-blank form-group"
                         columnClasses="ui-grid-col-2, ui-grid-col-4" layout="grid">

                <h:outputText value="#{msg.formalityTypeConvention}"/>
                <p:inputText value="#{bean.sectionA.conventionSpecies}" styleClass="input-width"/>

                <h:outputText value="#{msg.formalityTypeConventionDesc}"/>
                <p:inputText value="#{bean.sectionA.conventionDescription}" styleClass="input-width"/>

            </p:panelGrid>
        </p:fieldset>

        <br/>
        <p:fieldset legend="#{msg.formalitySectionB}" rendered="#{not empty bean.entity.sectionB}">
            <p:dataGrid columns="1" styleClass="ui-datagrid-no-border" value="#{bean.entity.sectionBMap}" var="sec"
                        emptyMessage="">
                <h:outputText style="font-size: 20px" value="#{msg.formalitySectionBMapKey} #{sec.key}"/>
                <br/><br/>
                <p:dataGrid columns="1" styleClass="ui-datagrid-no-border" value="#{sec.value}" var="prop"
                            emptyMessage="">
                    <p:panelGrid styleClass="ui-panelgrid-blank form-group" style="width: 100%">
                        <p:row>
                            <p:column styleClass="ui-g-1">#{msg.formalityCity}</p:column>
                            <p:column styleClass="ui-g-3">
                                <p:selectOneMenu value="#{prop.selectedCityId}">
                                    <f:selectItems value="#{prop.editCities}"/>
                                </p:selectOneMenu>
                            </p:column>
                        </p:row>
                        <ui:repeat value="#{prop.cadastralData}" var="data">
                            <p:row>
                                <p:column styleClass="ui-g-2">#{msg.formalitySection}  <p:inputText
                                        value="#{data.section}" style="width: 100px"/></p:column>
                                <p:column styleClass="ui-g-2">#{msg.formalitySheet}  <p:inputText value="#{data.sheet}"
                                                                                                  style="width: 100px"/></p:column>
                                <p:column styleClass="ui-g-2">#{msg.formalityParticle}<p:inputText
                                        value="#{data.particle}" style="width: 100px"/> </p:column>
                                <p:column styleClass="ui-g-2">#{msg.formalitySub} <p:inputText value="#{data.sub}"
                                                                                               style="width: 100px"/></p:column>
                            </p:row>
                        </ui:repeat>
                        <p:row>
                            <p:column styleClass="ui-g-1">#{msg.formalityAddress}</p:column>
                            <p:column styleClass="ui-g-3"><p:inputText value="#{prop.address}"/></p:column>
                        </p:row>
                        <p:row>
                            <p:column styleClass="ui-g-1">#{msg.formalityPropertyCategory}</p:column>
                            <p:column styleClass="ui-g-3">
                                <p:selectOneMenu value="#{prop.category}">
                                    <f:selectItems value="#{bean.categories}"/>
                                </p:selectOneMenu></p:column>
                        </p:row>
                    </p:panelGrid>
                    <br/>
                </p:dataGrid>
                <br/><br/>
            </p:dataGrid>
        </p:fieldset>
        <br/>
        <p:fieldset legend="#{msg.formalitySectionC}" rendered="#{not empty bean.sectionC}">
            <p:dataGrid columns="1" styleClass="ui-datagrid-no-border" value="#{bean.sectionCEntries}" var="cEntry">
                <h:outputText style="font-size: 20px" value="#{cEntry.key}" rendered="#{not empty cEntry.value}"/>
                <p:dataGrid columns="1" styleClass="ui-datagrid-no-border" value="#{cEntry.value}" var="sub"
                            rendered="#{not empty cEntry.value}">
                    <p:panelGrid styleClass="ui-panelgrid-blank form-group" style="width: 50%"
                                 rendered="#{not sub.typeIsPhysicalPerson}">
                        <p:row>
                            <p:column class="ui-g-6"><h:outputText value="#{msg.formalityCompanyName}"/></p:column>
                            <p:column class="ui-g-6"><p:inputText value="#{sub.businessName}"/></p:column>
                        </p:row>
                        <p:row rendered="#{not sub.nameBirthCity eq ''}">
                            <p:column class="ui-g-6"><h:outputText value="#{msg.formalitySeat}"/></p:column>
                            <p:column class="ui-g-6"><p:inputText value="#{sub.nameBirthCity}"/></p:column>
                        </p:row>
                        <p:row rendered="#{sub.typeId eq 2 and (not empty sub.birthCity.description)}">
                            <p:column class="ui-g-6"><h:outputText value="#{msg.formalitySedeCode}"/></p:column>
                            <p:column class="ui-g-6"><h:outputText
                                    value="#{sub.birthCity.description} (#{sub.birthProvince.code})"/></p:column>
                        </p:row>
                        <p:row>
                            <p:column class="ui-g-6"><h:outputText value="#{msg.formalityFiscalCode}"/></p:column>
                            <p:column class="ui-g-6"><p:inputText value="#{sub.numberVAT}"/></p:column>
                        </p:row>
                        <p:row>
                            <p:column colspan="2"><h:outputText value="#{sub.getBargainingUnitStr(cEntry.key)}"
                                                                escape="false"/></p:column>
                        </p:row>
                    </p:panelGrid>
                    <p:panelGrid styleClass="ui-panelgrid-blank form-group" style="width: 50%"
                                 rendered="#{sub.typeIsPhysicalPerson}">
                        <p:row>
                            <p:column class="ui-g-3"><h:outputText value="#{msg.formalitySurname}"/></p:column>
                            <p:column class="ui-g-3"><p:inputText value="#{sub.surname}"/></p:column>
                            <p:column class="ui-g-3"><h:outputText value="#{msg.formalityName}"/></p:column>
                            <p:column class="ui-g-3"><p:inputText value="#{sub.name}"/></p:column>
                        </p:row>
                        <p:row>
                            <p:column class="ui-g-3"><h:outputText value="#{msg.formalityBorn}"/></p:column>
                            <p:column class="ui-g-3"><p:calendar id="birthdate" styleClass="calendar-width"
                                                                 pattern="dd/MM/yyyy" mask="true"
                                                                 locale="it" navigator="true" popupIconOnly="true"
                                                                 value="#{sub.birthDate}" yearRange="c-70:c+10"/>
                            </p:column>
                            <p:column class="ui-g-3"><h:outputText value="#{msg.formalityBornIn}"/></p:column>
                            <p:column class="ui-g-3"> <h:outputText value="#{sub.nameBirthCity}"/></p:column>
                        </p:row>
                        <p:row>
                            <p:column class="ui-g-3"><h:outputText value="#{msg.formalitySex}"/></p:column>
                            <p:column class="ui-g-3">
                                <p:selectOneMenu value="#{sub.selectedSexTypeId}">
                                    <f:selectItems value="#{bean.sexTypes}"/>
                                </p:selectOneMenu> </p:column>
                            <p:column class="ui-g-3"><h:outputText value="#{msg.formalityFiscalCode}"/></p:column>
                            <p:column class="ui-g-3"><p:inputText value="#{sub.fiscalCode}"/></p:column>
                        </p:row>
                        <p:row>
                            <p:column colspan="4"><h:outputText value="#{sub.getBargainingUnitStr(cEntry.key)}"
                                                                escape="false"/></p:column>
                        </p:row>
                    </p:panelGrid>
                </p:dataGrid>
            </p:dataGrid>
        </p:fieldset>
        <br/>
        <p:fieldset legend="#{msg.formalitySectionD}" rendered="#{not empty bean.entity.sectionD}">
            <p:dataGrid columns="1" styleClass="ui-datagrid-no-border" value="#{bean.entity.sectionD}" var="secD"
                        emptyMessage="">
                <p:inputTextarea value="#{secD.additionalInformation}"
                                 style="width:50%;height:auto;min-height: 200px;"/>
            </p:dataGrid>
        </p:fieldset>
    </ui:define>
</ui:composition>