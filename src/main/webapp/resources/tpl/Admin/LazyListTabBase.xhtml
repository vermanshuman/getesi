<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
>

<ui:composition template="/resources/tpl/Admin/template.xhtml">

    <ui:define name="viewname">
        <li>
            <p:link outcome="#{bean.currentPage.page}">#{page_header}</p:link>
        </li>
    </ui:define>

    <ui:define name="content">
        <div class="ui-g">
            <div class="ui-g-12">
                <div class="card card-w-title" style="#{request.requestURI.contains('MailManagerList') ? 'background-color: transparent' : ''}">
                    <p:outputPanel autoUpdate="true"
                                   rendered="#{empty renderTitle ? true : renderTitle}">
                        <ui:fragment
                                rendered="#{empty center_title || center_title == false}">
                            <h1>#{list_title}</h1>
                        </ui:fragment>

                        <ui:fragment
                                rendered="#{!(empty center_title) and center_title == true}">
                            <div align="center">
                                <h1>#{list_title}</h1>
                            </div>
                        </ui:fragment>
                    </p:outputPanel>

                    <div class="content">
                        <h:form id="form" prependId="false" enctype="multipart/form-data">
                            <script>
                                // <![CDATA[

                                $(document ).ready(function() {
                                    var value = $("[name*='pageNumber']").val();
                                    if(value == 1) {
                                        $('.page_1').addClass("ui-state-active");
                                        $('#page_bottom_1').addClass("ui-state-active");
                                    }else{
                                        $('.page_1').removeClass("ui-state-active");
                                        $('#page_bottom_1').removeClass("ui-state-active");
                                    }
                                });

                                function nextPage(e) {
                                    e.preventDefault();
                                    var pageNumber = getCurrentPageNumber();
                                    var totalPages = getTotalPagesCount();
                                    if(pageNumber < totalPages) {
                                        pageNumber++;
                                        changePage(pageNumber,e);
                                    }
                                }

                                function getTotalPagesCount() {
                                    var totalPages = document.getElementById("tabs:numTotalPages").value;
                                    return totalPages;
                                }

                                function loadPerPage(id) {
                                    $('input[id*="rowsPerPageSelected"]').val(document.getElementById(id).value);
                                    handleRowsChange();
                                }

                                function firstPage(e) {
                                    e.preventDefault();
                                    changePage(1,e);
                                }

                                function changePage(pageNumber, e) {
                                    e.preventDefault();
                                    $('input[name*="pageNumber"]').val(pageNumber);
                                    onPageChange();
                                    getCurrentPageNumber();
                                }

                                function previousPage(e) {
                                    e.preventDefault();
                                    var pageNumber = getCurrentPageNumber();
                                    if(pageNumber>1) {
                                        pageNumber = pageNumber-1;
                                        changePage(pageNumber, e);
                                    }
                                }

                                function lastPage(e) {
                                    e.preventDefault();
                                    var totalPages = getTotalPagesCount();
                                    changePage(totalPages, e);
                                }

                                function getCurrentPageNumber() {
                                    var pageNumber = $('input[name*="pageNumber"]').val();
                                    return parseInt(pageNumber);
                                }
                                function setPageNumber(){
                                    var value = $("[name*='pageNumber']").val();
                                    for (let i = 0; i < 10; i++) {
                                        $('.page_' + i).removeClass("ui-state-active");
                                        $('.page_bottom_' + i).removeClass("ui-state-active");
                                    }
                                    $('.page_' + value).addClass("ui-state-active");
                                    $('.page_bottom_' + value).addClass("ui-state-active");
                                }
                                // ]]>
                            </script>

                            <ui:insert name="list_body"></ui:insert>
                            <p:growl id="messages" showDetail="true" autoUpdate="false"
                                     globalOnly="true"/>
                        </h:form>
                    </div>
                </div>
            </div>
        </div>
    </ui:define>
</ui:composition>
</html>